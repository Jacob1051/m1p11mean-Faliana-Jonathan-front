(self.webpackChunkm1p11mean_faliana_jonathan=self.webpackChunkm1p11mean_faliana_jonathan||[]).push([[496],{9496:(nr,ar,me)=>{"use strict";me.r(ar),me.d(ar,{ManagerModule:()=>ga});var di=me(6814),D=me(6659),u=me(9212),_e=me(5342),ko=me(1781),Ct=me(5619),Eo=me(7398),fi=me(553),gn=me(9862);let or=(()=>{class l{constructor(t,i){this.http=t,this.router=i,this.apiUrl=fi.N.apiUrl,this.userSubject=new Ct.X(JSON.parse(localStorage.getItem("manager"))),this.user=this.userSubject.asObservable()}get userValue(){return this.userSubject.value}login(t){return this.http.post(`${this.apiUrl}/User/login`,t).pipe((0,Eo.U)(i=>{if(i.status>=400&&i.status<600)throw new Error(i.message);return localStorage.setItem("manager",JSON.stringify(i.data)),this.userSubject.next(i.data),i}))}logout(){localStorage.removeItem("manager"),this.userSubject.next(null),this.router.navigate(["/manager/login"])}static#e=this.\u0275fac=function(i){return new(i||l)(u.LFG(gn.eN),u.LFG(D.F0))};static#t=this.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var it=me(2425);function _a(l,e){1&l&&u._UZ(0,"div",0)}const lr=()=>["/manager/dashboard"],ur=()=>["/manager/emp/list"],ms=()=>["/manager/emp/add"],At=()=>["/manager/service/list"],zi=()=>["/manager/service/add"],ba=()=>["/manager/offre/list"],Kt=()=>["/manager/offre/add"],hr=(l,e)=>({"d-flex align-items-center justify-content-center":l,"d-none":e});let $t=(()=>{class l{constructor(t,i,s,a){this.router=t,this.service=i,this.authService=s,this.toastr=a,this.isLoading=!1,this.isAcceuil=()=>"/"==this.router.url}ngOnInit(){this.authService.user.subscribe(t=>{this.user=t,this.userInformation=this.user?this.getUserInformation():null})}goToLogin(){this.router.navigateByUrl("/manager/login")}getUserInformation(){this.isLoading=!0,this.service.getUserInformation(this.user.user_id,this.user.role)?.subscribe({next:t=>{200==t.status?this.userInformation=t.data:(console.error(t.message),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U)),this.isLoading=!1},error:t=>{console.error(t),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.isLoading=!1}})}logout(){this.authService.logout()}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(D.F0),u.Y36(ko.F),u.Y36(or),u.Y36(it._W))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-header-manager"]],decls:70,vars:41,consts:[["id","loading-area"],[1,"site-header","header","mo-left"],[1,"sticky-header","main-bar-wraper","navbar-expand-lg"],[1,"main-bar","clearfix"],[1,"container","clearfix"],[1,"logo-header","mostion"],["routerLink","/",1,"dez-page"],["src","assets/images/logo-2.webp","alt",""],["type","button","data-toggle","collapse","data-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","collapsed","navicon","justify-content-end"],["id","navbarNavDropdown",1,"header-nav","navbar-collapse","collapse","justify-content-end"],[1,"nav","navbar-nav"],["routerLinkActive","active"],["routerLinkActive","active",3,"routerLink"],[1,"fa","fa-chevron-down"],[1,"sub-menu"],["routerLinkActive","active",1,"dez-page",3,"routerLink"],[1,"fa","fa-user","pe-1"],[1,"sub-menu","left"],[1,"header-menu-paragraph","pb-2"],[1,"text-pink"],[1,"text-uppercase"],["role","button"],[1,"dez-page",2,"color","#ed3d8b",3,"click"],[1,"fa","fa-sign-out","pe-1"],[3,"ngClass"],[1,"btn","btn-danger","btn-light-pink","w-100",2,"height","50px",3,"click"]],template:function(i,s){1&i&&(u.YNc(0,_a,1,0,"div",0),u.TgZ(1,"header",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"a",6),u._UZ(7,"img",7),u.qZA()(),u.TgZ(8,"button",8),u._UZ(9,"span")(10,"span")(11,"span"),u.qZA(),u.TgZ(12,"div",9)(13,"ul",10)(14,"li",11)(15,"a",12),u._uU(16,"Tableau de bord "),u.qZA()(),u.TgZ(17,"li",11)(18,"a"),u._uU(19,"Nos employ\xe9s "),u._UZ(20,"i",13),u.qZA(),u.TgZ(21,"ul",14)(22,"li")(23,"a",15),u._uU(24,"Liste des employ\xe9s"),u.qZA()(),u.TgZ(25,"li")(26,"a",15),u._uU(27,"Ajouter un employ\xe9"),u.qZA()()()(),u.TgZ(28,"li",11)(29,"a"),u._uU(30,"Nos Services "),u._UZ(31,"i",13),u.qZA(),u.TgZ(32,"ul",14)(33,"li")(34,"a",15),u._uU(35,"Liste des services"),u.qZA()(),u.TgZ(36,"li",11)(37,"a",15),u._uU(38,"Ajouter un service"),u.qZA()()()(),u.TgZ(39,"li",11)(40,"a"),u._uU(41,"Nos Offres "),u._UZ(42,"i",13),u.qZA(),u.TgZ(43,"ul",14)(44,"li")(45,"a",15),u._uU(46,"Liste des offres"),u.qZA()(),u.TgZ(47,"li",11)(48,"a",15),u._uU(49,"Ajouter une offre"),u.qZA()()()(),u.TgZ(50,"li")(51,"a"),u._UZ(52,"i",16),u._uU(53," Mon compte "),u._UZ(54,"i",13),u.qZA(),u.TgZ(55,"ul",17)(56,"span",18),u._uU(57," Bonjour,"),u._UZ(58,"br"),u.TgZ(59,"b",19)(60,"span",20),u._uU(61),u.qZA(),u._uU(62),u.qZA()(),u.TgZ(63,"li",21)(64,"a",22),u.NdJ("click",function(){return s.logout()}),u._UZ(65,"i",23),u._uU(66," Se d\xe9connecter"),u.qZA()()()(),u.TgZ(67,"li",24)(68,"button",25),u.NdJ("click",function(){return s.goToLogin()}),u._uU(69," Se Connecter "),u.qZA()()()()()()()()),2&i&&(u.um2(0,s.isLoading?0:-1),u.xp6(14),u.ekj("d-block",s.user)("d-none",!s.user),u.xp6(),u.Q6J("routerLink",u.DdM(31,lr)),u.xp6(2),u.ekj("d-block",s.user)("d-none",!s.user),u.xp6(6),u.Q6J("routerLink",u.DdM(32,ur)),u.xp6(3),u.Q6J("routerLink",u.DdM(33,ms)),u.xp6(2),u.ekj("d-block",s.user)("d-none",!s.user),u.xp6(6),u.Q6J("routerLink",u.DdM(34,At)),u.xp6(3),u.Q6J("routerLink",u.DdM(35,zi)),u.xp6(2),u.ekj("d-block",s.user)("d-none",!s.user),u.xp6(6),u.Q6J("routerLink",u.DdM(36,ba)),u.xp6(3),u.Q6J("routerLink",u.DdM(37,Kt)),u.xp6(2),u.ekj("d-block",s.user)("d-none",!s.user),u.xp6(11),u.hij(" ",s.user&&"Manager"==s.user.role?null==s.userInformation?null:s.userInformation.nomManager:""," "),u.xp6(),u.hij(" ",s.user&&"Manager"==s.user.role?null==s.userInformation?null:s.userInformation.prenomManager:""," "),u.xp6(5),u.Q6J("ngClass",u.WLB(38,hr,!s.user,s.user)))},dependencies:[di.mk,D.rH,D.Od]})}return l})(),pi=(()=>{class l{constructor(t){this.router=t}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(D.F0))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-layout-manager"]],decls:3,vars:0,consts:[[1,"page-wraper",2,"min-height","calc(100vh - 82.5px)"]],template:function(i,s){1&i&&(u._UZ(0,"app-header-manager"),u.TgZ(1,"div",0),u._UZ(2,"router-outlet"),u.qZA())},dependencies:[D.lC,$t]})}return l})();const _t=(l,e)=>{var t=(0,u.f3M)(D.F0),i=(0,u.f3M)(or);return!!i.userValue||(i.redirectUrl=e.url,t.navigate(["manager/login"]),!1)};var j=me(95),mn=me(1374),Lo=me(121),$e=me(6676),_n=me(363),Io=me(5516);let Fr=(()=>{class l{constructor(t){this.http=t,this.apiUrl=Io.N.apiUrl}getListeService(){return this.http.get(`${this.apiUrl}/Service/getListeService`)}addService(t){return this.http.post(`${this.apiUrl}/Service/addService`,t)}getService(t){return this.http.get(`${this.apiUrl}/Service/getService/${t}`)}updateService(t,i){return this.http.put(`${this.apiUrl}/Service/updateService/${t}`,i)}deleteService(t){return this.http.delete(`${this.apiUrl}/Service/deleteService/${t}`)}static#e=this.\u0275fac=function(i){return new(i||l)(u.LFG(gn.eN))};static#t=this.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Wi=me(4440),gi=me(2325);const Ro=["modal"];function _s(l,e){1&l&&u._UZ(0,"div",0)}function Qt(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"Nom requis."),u.qZA())}function Fo(l,e){if(1&l&&u.YNc(0,Qt,2,0,"span",43),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.nomEmploye.errors&&t.formControl.nomEmploye.errors.required?0:-1)}}function Bo(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"Pr\xe9nom requis."),u.qZA())}function jo(l,e){if(1&l&&u.YNc(0,Bo,2,0,"span",43),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.prenomEmploye.errors&&t.formControl.prenomEmploye.errors.required?0:-1)}}function cr(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"E-mail requis."),u.qZA())}function bs(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"Pas un format d'e-mail valide."),u.qZA())}function Uo(l,e){if(1&l&&u.YNc(0,cr,2,0,"span",43)(1,bs,2,0,"span",43),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.email.errors&&t.formControl.email.errors.required?0:-1),u.xp6(),u.um2(1,null!=t.formControl.email.errors&&t.formControl.email.errors.email?1:-1)}}function Br(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"Mot de passe requis."),u.qZA())}function jr(l,e){if(1&l&&u.YNc(0,Br,2,0,"span",43),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.password.errors&&t.formControl.password.errors.required?0:-1)}}function Yo(l,e){1&l&&(u.TgZ(0,"span",44),u._uU(1,"Mot de passe ne correspond pas."),u.qZA())}function vs(l,e){if(1&l&&u.YNc(0,Yo,2,0,"span",43),2&l){const t=u.oxw();u.um2(0,t.addEmployeForm.hasError("PasswordNoMatch")?0:-1)}}function ys(l,e){1&l&&(u.TgZ(0,"div",45)(1,"span",46),u._uU(2,"Veillez s\xe9lectionner au moins un service"),u.qZA()())}function va(l,e){1&l&&u._UZ(0,"span",47)}let St=(()=>{class l{onItemChange(t){this.currentSelectedItem=t}constructor(t,i,s,a,o,c){this.service=t,this.formBuilder=i,this.serviceService=s,this.route=a,this.toastr=o,this.router=c,this.submitted=!1,this.loading=!1,this.title="Ajouter un employ\xe9",this.listItems=[],this.hasServices=!1,this.action=0,this.defaultValue={debut:$e((new Date).setHours(8,0,0)).format("HH:mm"),fin:$e((new Date).setHours(17,0,0)).format("HH:mm"),jourDeLaSemaine:[1,2,3,4,5]},this.isLoading=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.serviceService.getListeService().subscribe(t=>{const i=t.data.map(s=>({id:s._id,name:s.nomService}));this.listItems=i}),this.jourDeLaSemaine=this.formBuilder.group({0:[!1],1:[!0],2:[!0],3:[!0],4:[!0],5:[!0],6:[!1]}),this.addEmployeForm=new j.cw({nomEmploye:new j.NI("Emp",[j.kI.required]),prenomEmploye:new j.NI("loye",[j.kI.required]),email:new j.NI("employe@gmail.com",{validators:[j.kI.required,j.kI.email]}),password:new j.NI("0123456789",{validators:[j.kI.required,j.kI.minLength(8)]}),confirmPassword:new j.NI("0123456789",[j.kI.required]),debutHeure:new j.NI(this.defaultValue.debut,j.kI.required),finHeure:new j.NI(this.defaultValue.fin,j.kI.required),user:new j.NI(null),image:new j.NI(null)},{validators:Lo.i}),this.addEmployeForm.addControl("jourSemaine",this.jourDeLaSemaine),this.id&&(this.action=1,this.title="Modifier l'employ\xe9",this.isLoading=!0,this.service.getEmploye(this.id).pipe((0,mn.P)()).subscribe(t=>{this.resetJourSemaine(),this.addEmployeForm.patchValue(t.data),this.addEmployeForm.patchValue({image:null}),this.addEmployeForm.patchValue({user:t.data.user._id}),this.addEmployeForm.patchValue({email:t.data.user.email}),this.addEmployeForm.patchValue({debutHeure:$e(t.data.horaireTravail.debut).format("HH:mm")}),this.addEmployeForm.patchValue({finHeure:$e(t.data.horaireTravail.fin).format("HH:mm")}),t.data.horaireTravail.jourTravail.forEach(i=>{this.addEmployeForm.get(`jourSemaine.${i}`)?.patchValue(!0)}),this.listItems.forEach(i=>{t.data.mesServices.find(a=>a._id===i.id)&&(i.checked=!0)}),this.isLoading=!1}))}get formControl(){return this.addEmployeForm.controls}onSubmit(){this.submitted=!0;var t=this.listItems.filter(i=>i.checked);if(this.addEmployeForm.valid&&t.length>0){this.loading=!0;const i=this.addEmployeForm.value;if(t.length>0){const s=this.buildWorkHour(i),a=new FormData;a.append("nomEmploye",i.nomEmploye),a.append("prenomEmploye",i.prenomEmploye),a.append("mesServices",JSON.stringify([...t.map(o=>o.id)])),a.append("horaireTravail",JSON.stringify(s)),a.append("email",i.email),a.append("password",i.password),a.append("confirmPassword",i.confirmPassword),a.append("user",i.user),i.image&&a.append("file",i.image[0],i.image[0].name),this.saveEmploye(a).subscribe({next:o=>{200==o.status?(this.toastr.success(1==this.action?"Employ\xe9 modifi\xe9 avec succ\xe8s!":"Employ\xe9 enregistr\xe9 avec succ\xe8s!","Succ\xe8s!",_e.U),this.router.navigate(["/manager/emp/list"])):(console.error(o.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.loading=!1},error:o=>{console.error(o),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.loading=!1}})}else this.hasServices=!1}}saveEmploye(t){return this.id?this.service.updateEmploye(this.id,t):this.service.addEmploye(t)}openModal(){this.myModal.nativeElement.classList.add("show"),document.body.classList.add("modal-open")}closeModal(){this.myModal.nativeElement.classList.remove("show"),document.body.classList.remove("modal-open")}buildWorkHour(t){var i=t.jourSemaine;i=Object.keys(i).filter(b=>i[b]);const{debutHeure:s,finHeure:a}=t,o=s.split(":"),c=a.split(":");let d=$e(),f=$e();return d.set({h:o[0],m:o[1],s:0}),f.set({h:c[0],m:c[1],s:0}),{debut:d.toDate().toISOString(),fin:f.toDate().toISOString(),jourTravail:i}}resetJourSemaine(){this.addEmployeForm.get("jourSemaine.0")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.1")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.2")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.3")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.4")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.5")?.patchValue(!1),this.addEmployeForm.get("jourSemaine.6")?.patchValue(!1)}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(_n.m),u.Y36(j.qu),u.Y36(Fr),u.Y36(D.gz),u.Y36(it._W),u.Y36(D.F0))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-emp-add"]],viewQuery:function(i,s){if(1&i&&u.Gf(Ro,5),2&i){let a;u.iGM(a=u.CRH())&&(s.myModal=a.first)}},decls:101,vars:18,consts:[["id","loading-area"],[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"text-left","pb-4"],["routerLink","/manager/emp/list",1,"btn","btn-danger","btn-light-pink"],[1,"fa","fa-arrow-left"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"shop-account","w-100","p-0"],[1,"row"],[1,"max-w500","m-auto","m-b30"],[1,"p-a30","border-1","seth"],[1,"tab-content","nav"],["enctype","multipart/form-data",1,"w-100",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"font-weight-700"],["id","nom","placeholder","Nom de l'employ\xe9","type","text","formControlName","nomEmploye",1,"form-control"],["id","prenom","placeholder","Prenom de l'employ\xe9","type","text","formControlName","prenomEmploye",1,"form-control"],["id","mail","required","","placeholder","Votre Email","type","email","formControlName","email",1,"form-control"],["id","mdp","required","","placeholder","Votre Mot de Passe","type","password","formControlName","password",1,"form-control"],["formControlName","confirmPassword","placeholder","Mot de Passe","type","password",1,"form-control"],["placeholder","Service",3,"items","showSearch","showAll","showStatus","showError","itemChange"],["class","pb-4"],[1,"form-group","col-md-6"],["name","dzName","type","time","formControlName","debutHeure",1,"form-control"],["name","dzName","type","time","formControlName","finHeure",1,"form-control"],["formGroupName","jourSemaine"],[1,"table-responsive"],[1,"table","table-bordered"],["type","checkbox","formControlName","1"],["type","checkbox","formControlName","2"],["type","checkbox","formControlName","3"],["type","checkbox","formControlName","4"],["type","checkbox","formControlName","5"],["type","checkbox","formControlName","6"],["type","checkbox","formControlName","0"],[3,"formData","formField"],[1,"text-left"],[1,"btn","btn-danger","btn-light-pink","p-3",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","text-danger"],[1,"text-danger"],[1,"pb-4"],[1,"text-danger","pb-4"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,s){1&i&&(u.YNc(0,_s,1,0,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),u._UZ(5,"i",5),u.qZA()(),u.TgZ(6,"div",6)(7,"h2",7),u._uU(8),u.qZA(),u.TgZ(9,"div",8)(10,"div",9),u._UZ(11,"i",10),u.qZA()()(),u.TgZ(12,"div",11)(13,"div",2)(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"form",16),u.NdJ("ngSubmit",function(){return s.onSubmit()}),u.TgZ(19,"div",17)(20,"label",18),u._uU(21,"Nom *"),u.qZA(),u._UZ(22,"input",19),u.YNc(23,Fo,1,1),u.qZA(),u.TgZ(24,"div",17)(25,"label",18),u._uU(26,"Pr\xe9nom *"),u.qZA(),u._UZ(27,"input",20),u.YNc(28,jo,1,1),u.qZA(),u.TgZ(29,"div",17)(30,"label",18),u._uU(31,"E-Mail *"),u.qZA(),u._UZ(32,"input",21),u.YNc(33,Uo,2,2),u.qZA(),u.TgZ(34,"div",17)(35,"label",18),u._uU(36,"Mot de Passe *"),u.qZA(),u._UZ(37,"input",22),u.YNc(38,jr,1,1),u.qZA(),u.TgZ(39,"div",17)(40,"label",18),u._uU(41,"Confirmez votre Mot de Passe"),u.qZA(),u._UZ(42,"input",23),u.YNc(43,vs,1,1),u.qZA(),u.TgZ(44,"div",17)(45,"label",18),u._uU(46,"Affecter service"),u.qZA(),u.TgZ(47,"app-multi-dropdown",24),u.NdJ("itemChange",function(o){return s.onItemChange(o)}),u.qZA()(),u.YNc(48,ys,3,0,"div",25),u.TgZ(49,"div",12)(50,"div",26)(51,"label",18),u._uU(52,"Date de d\xe9but de service"),u.qZA(),u._UZ(53,"input",27),u.qZA(),u.TgZ(54,"div",26)(55,"label",18),u._uU(56,"Date fin de service"),u.qZA(),u._UZ(57,"input",28),u.qZA()(),u.TgZ(58,"label",18),u._uU(59,"Jour \xe0 travailler"),u.qZA(),u.TgZ(60,"div",29)(61,"div",30)(62,"table",31)(63,"tr")(64,"th"),u._uU(65,"Lun"),u.qZA(),u.TgZ(66,"th"),u._uU(67,"Mar"),u.qZA(),u.TgZ(68,"th"),u._uU(69,"Mer"),u.qZA(),u.TgZ(70,"th"),u._uU(71,"Jeu"),u.qZA(),u.TgZ(72,"th"),u._uU(73,"Ven"),u.qZA(),u.TgZ(74,"th"),u._uU(75,"Sam"),u.qZA(),u.TgZ(76,"th"),u._uU(77,"Dim"),u.qZA()(),u.TgZ(78,"tr")(79,"td"),u._UZ(80,"input",32),u.qZA(),u.TgZ(81,"td"),u._UZ(82,"input",33),u.qZA(),u.TgZ(83,"td"),u._UZ(84,"input",34),u.qZA(),u.TgZ(85,"td"),u._UZ(86,"input",35),u.qZA(),u.TgZ(87,"td"),u._UZ(88,"input",36),u.qZA(),u.TgZ(89,"td"),u._UZ(90,"input",37),u.qZA(),u.TgZ(91,"td"),u._UZ(92,"input",38),u.qZA()()()()(),u.TgZ(93,"div",17)(94,"label",18),u._uU(95,"Image"),u.qZA(),u._UZ(96,"app-upload-images",39),u.qZA(),u.TgZ(97,"div",40)(98,"button",41),u.YNc(99,va,1,0,"span",42),u._uU(100," Ajouter un employ\xe9 "),u.qZA()()()()()()()()()()()),2&i&&(u.um2(0,s.isLoading?0:-1),u.xp6(8),u.Oqu(s.title),u.xp6(10),u.Q6J("formGroup",s.addEmployeForm),u.xp6(5),u.um2(23,s.formControl.nomEmploye.touched||s.submitted?23:-1),u.xp6(5),u.um2(28,s.formControl.prenomEmploye.touched||s.submitted?28:-1),u.xp6(5),u.um2(33,s.formControl.email.touched||s.submitted?33:-1),u.xp6(5),u.um2(38,s.formControl.password.touched||s.submitted?38:-1),u.xp6(5),u.um2(43,s.formControl.confirmPassword.touched||s.submitted?43:-1),u.xp6(4),u.Q6J("items",s.listItems)("showSearch",!0)("showAll",!0)("showStatus",!0)("showError",!1),u.xp6(),u.um2(48,s.submitted&&!s.hasServices?48:-1),u.xp6(48),u.Q6J("formData",s.addEmployeForm)("formField","image"),u.xp6(2),u.Q6J("disabled",s.loading),u.xp6(),u.Q6J("ngIf",s.loading&&s.submitted))},dependencies:[Wi.u,gi.a,di.O5,D.rH,j._Y,j.Fj,j.Wl,j.JJ,j.JL,j.Q7,j.sg,j.u,j.x0]})}return l})();function Ur(l,e){1&l&&u._UZ(0,"div",0)}const No=l=>["/manager/emp/edit",l];function mi(l,e){if(1&l&&(u.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"a",15)(4,"div",16),u._UZ(5,"img",17),u.qZA()()(),u.TgZ(6,"div",18)(7,"h5",19)(8,"a",20),u._uU(9),u.qZA()()(),u.TgZ(10,"div",21)(11,"p")(12,"b",22),u._uU(13,"Services offerts: "),u.qZA(),u._uU(14),u.qZA()(),u.TgZ(15,"p",23)(16,"button",24),u._UZ(17,"i",25),u.qZA(),u.TgZ(18,"button",26),u._UZ(19,"i",27),u.qZA()()()()),2&l){const t=e.$implicit,i=u.oxw(2);u.xp6(3),u.MGl("routerLink","/manager/emp/edit/",t._id,""),u.xp6(2),u.hYB("src","",i.apiUrl,"/Employe/",t.image,"",u.LSH),u.xp6(3),u.Q6J("routerLink",u.VKq(8,No,t._id)),u.xp6(),u.Oqu(t.nomEmploye+" "+t.prenomEmploye),u.xp6(5),u.hij("",i.getEmployeListeService(t)," "),u.xp6(2),u.MGl("routerLink","/manager/emp/edit/",t._id,""),u.xp6(2),u.uIk("data-bs-target","#exampleModal"+t._id)}}function ya(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"h1",32),u._uU(5," Suppression d'employ\xe9 "),u.qZA(),u._UZ(6,"button",33),u.qZA(),u.TgZ(7,"div",34),u._uU(8," \xcates-vous s\xfbr de vouloir supprimer l'employ\xe9: "),u.TgZ(9,"b",22),u._uU(10),u.qZA(),u._uU(11," ? "),u.qZA(),u.TgZ(12,"div",35)(13,"button",36),u._uU(14," Fermer "),u.qZA(),u.TgZ(15,"button",37),u.NdJ("click",function(){const a=u.CHM(t).$implicit,o=u.oxw(2);return u.KtG(o.deleteEmploye(a._id))}),u._uU(16," Supprimer "),u.qZA()()()()()}if(2&l){const t=e.$implicit;u.MGl("id","exampleModal",t._id,""),u.xp6(10),u.AsE("",t.nomEmploye," ",t.prenomEmploye,"")}}function Zo(l,e){if(1&l&&(u.SjG(0,mi,20,10,"div",38,u.ikw),u.SjG(2,ya,17,3,"div",39,u.ikw)),2&l){const t=u.oxw();u.wJu(t.listeEmploye),u.xp6(2),u.wJu(t.listeEmploye)}}function Yr(l,e){1&l&&(u.TgZ(0,"div",40)(1,"div",41)(2,"span",42),u._uU(3,"Loading..."),u.qZA()()())}let Bt=(()=>{class l{searchInsideEmpList(){this.listeEmploye=this.searchText?this.listeEmploye.filter(t=>t.nomEmploye.toLowerCase().includes(this.searchText.toLowerCase())||t.prenomEmploye.toLowerCase().includes(this.searchText.toLowerCase())):this.listeEmployeBackup}constructor(t,i){this.service=t,this.toastr=i,this.searchText="",this.listeEmploye=[],this.listeEmployeBackup=[],this.apiUrl=fi.N.apiUrl,this.isLoading=!1,this.getEmployeListeService=s=>s&&s.mesServices&&s.mesServices.length>0?s.mesServices.map(o=>o.nomService).join(", "):"",this.deleteEmploye=s=>{this.service.deleteEmploye(s).subscribe({next:a=>{200==a.status?(this.toastr.success("Une donn\xe9e a \xe9t\xe9 supprim\xe9e!","Success!",_e.U),window.closeModal(),this.isLoading=!0,this.service.getListeEmploye().subscribe({next:o=>{this.listeEmploye=o.data,this.listeEmployeBackup=this.listeEmploye,this.isLoading=!1}})):(console.error(a.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.isLoading=!1},error:a=>{console.error(a),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.isLoading=!1}})}}ngOnInit(){this.isLoading=!0,this.service.getListeEmploye().subscribe({next:t=>{this.listeEmploye=t.data,this.listeEmployeBackup=this.listeEmploye,this.isLoading=!1}})}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(_n.m),u.Y36(it._W))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-emp-list"]],decls:15,vars:3,consts:[["id","loading-area"],[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"d-flex","align-items-center","py-2","justify-content-center"],["type","search","name","","id","","placeholder","Rechercher un(e) employ\xe9(e)...",1,"form-control",2,"text-align","center","border-top","none","border-left","none","border-right","none","max-width","500px",3,"ngModel","input","ngModelChange"],[1,"fa","fa-search","text-body-tertiary"],[1,"row","d-flex"],[1,"col-lg-4","col-md-6","col-sm-6","p-lr0"],[1,"icon-bx-wraper","center","p-a30","h-100"],[1,"icon-lg","radius","m-b20","d-flex","align-items-center","justify-content-center","w-100",2,"min-height","90.5px"],[1,"icon-cell",3,"routerLink"],[1,"circledImageContainer"],["alt","","width","84px",3,"src"],[1,"icon-content"],[1,"dez-tilte"],[3,"routerLink"],[1,""],[1,"text-pink"],[1,"text-right","d-flex","gap-2","justify-content-end","pt-5"],[1,"btn","btn-danger","btn-light-pink",3,"routerLink"],[1,"fa","fa-edit"],["data-bs-toggle","modal",1,"btn","btn-danger","btn-pink",2,"border-radius","0"],[1,"fa","fa-trash"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","d-flex","align-items-center"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger","btn-pink",3,"click"],["class","col-lg-4 col-md-6 col-sm-6 p-lr0"],["class","modal fade","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",3,"id"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(i,s){1&i&&(u.YNc(0,Ur,1,0,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5,"Liste des employ\xe9s"),u.qZA(),u.TgZ(6,"div",5)(7,"div",6),u._UZ(8,"i",7),u.qZA()(),u.TgZ(9,"div",8)(10,"input",9),u.NdJ("input",function(){return s.searchInsideEmpList()})("ngModelChange",function(o){return s.searchText=o}),u.qZA(),u._UZ(11,"i",10),u.qZA()(),u.TgZ(12,"div",11),u.YNc(13,Zo,4,0)(14,Yr,4,0),u.qZA()()()),2&i&&(u.um2(0,s.isLoading?0:-1),u.xp6(10),u.Q6J("ngModel",s.searchText),u.xp6(3),u.um2(13,s.listeEmploye?13:14))},dependencies:[D.rH,j.Fj,j.JJ,j.On]})}return l})();function Nr(l,e){if(1&l&&(u.TgZ(0,"div",24),u._uU(1),u.qZA()),2&l){const t=u.oxw();u.xp6(),u.hij(" ",t.error," ")}}function xs(l,e){1&l&&(u.TgZ(0,"span",26),u._uU(1,"E-mail requis."),u.qZA())}function Ho(l,e){1&l&&(u.TgZ(0,"span",26),u._uU(1,"Pas un format d'e-mail valide."),u.qZA())}function Zr(l,e){if(1&l&&u.YNc(0,xs,2,0,"span",25)(1,Ho,2,0,"span",25),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.email.errors&&t.formControl.email.errors.required?0:-1),u.xp6(),u.um2(1,null!=t.formControl.email.errors&&t.formControl.email.errors.email?1:-1)}}function Xo(l,e){1&l&&(u.TgZ(0,"span",26),u._uU(1,"Mot de passe requis."),u.qZA())}function Hr(l,e){if(1&l&&u.YNc(0,Xo,2,0,"span",25),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.password.errors&&t.formControl.password.errors.required?0:-1)}}function dr(l,e){1&l&&u._UZ(0,"span",27)}let bn=(()=>{class l{constructor(t,i,s,a,o){this.formBuilder=t,this.service=i,this.route=s,this.router=a,this.toastr=o,this.loading=!1,this.submitted=!1}ngOnInit(){this.loginForm=this.formBuilder.group({email:["manager@gmail.com",{validators:[j.kI.required,j.kI.email]}],password:["0123456789",j.kI.required]})}get formControl(){return this.loginForm.controls}onSubmit(){this.submitted=!0,this.error="",this.loginForm.valid&&(this.loading=!0,this.service.login(this.loginForm.value).pipe((0,mn.P)()).subscribe({next:i=>{200==i.status?(this.toastr.success("Vous vous \xeates connect\xe9 avec succ\xe8s!","Succ\xe8s!",_e.U),console.log(i.data),this.router.navigateByUrl(this.route.snapshot.queryParams.returnUrl||"/manager")):(console.error(i.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.loading=!1},error:i=>{this.error="Email ou mot de passe incorrect",this.loading=!1,console.error(i),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U)}}))}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(j.qu),u.Y36(or),u.Y36(D.gz),u.Y36(D.F0),u.Y36(it._W))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-login-manager"]],decls:45,vars:6,consts:[[1,"content-inner-2","bg-white","hair-services","d-flex","align-items-center","soft-background",2,"min-height","83.4vh"],[1,"shop-account","w-100","p-0"],[1,"container"],[1,"row"],[1,"col-md-12","text-center"],[1,"font-weight-700","m-t0","m-b20"],[1,"max-w500","m-auto","m-b30"],[1,"p-a30","border-1","seth"],[1,"tab-content","nav"],[1,"w-100",3,"formGroup","ngSubmit"],[1,"font-weight-700"],[1,"fs-5"],["class","alert alert-danger","role","alert"],[1,"form-group"],["id","mail","required","","placeholder","Votre Email","type","email","formControlName","email",1,"form-control"],["id","mdp","required","","placeholder","Votre Mot de Passe","type","password","formControlName","password",1,"form-control"],[1,"text-left"],[1,"btn","btn-danger","btn-light-pink","py-3","px-4",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["id","forgot-password",1,"tab-pane","fade","col-12","p-a0"],[1,"font-weight-600"],["name","dzName","required","","placeholder","Your Email Id","type","email",1,"form-control"],["data-toggle","tab","href","login.html#login",1,"site-button","outline","gray","button-lg","radius-no"],[1,"site-button","pull-right","button-lg","radius-no"],["role","alert",1,"alert","alert-danger"],["class","text-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),u._uU(6," Connectez-vous \xe0 votre compte "),u.qZA()()(),u.TgZ(7,"div",3)(8,"div",6)(9,"div",7)(10,"div",8)(11,"form",9),u.NdJ("ngSubmit",function(){return s.onSubmit()}),u.TgZ(12,"h4",10),u._uU(13,"SE CONNECTER "),u.TgZ(14,"span",11),u._uU(15,"(Manager)"),u.qZA()(),u.YNc(16,Nr,2,1,"div",12),u.TgZ(17,"div",13)(18,"label",10),u._uU(19,"E-Mail *"),u.qZA(),u._UZ(20,"input",14),u.YNc(21,Zr,2,2),u.qZA(),u.TgZ(22,"div",13)(23,"label",10),u._uU(24,"Mot de Passe *"),u.qZA(),u._UZ(25,"input",15),u.YNc(26,Hr,1,1),u.qZA(),u.TgZ(27,"div",16)(28,"button",17),u.YNc(29,dr,1,0,"span",18),u._uU(30," Se Connecter "),u.qZA()()(),u.TgZ(31,"form",19)(32,"h4",10),u._uU(33," FORGET PASSWORD ? "),u.qZA(),u.TgZ(34,"p",20),u._uU(35," We will send you an email to reset your password. "),u.qZA(),u.TgZ(36,"div",13)(37,"label",10),u._uU(38,"E-MAIL *"),u.qZA(),u._UZ(39,"input",21),u.qZA(),u.TgZ(40,"div",16)(41,"a",22),u._uU(42,"Back"),u.qZA(),u.TgZ(43,"button",23),u._uU(44," Submit "),u.qZA()()()()()()()()()()),2&i&&(u.xp6(11),u.Q6J("formGroup",s.loginForm),u.xp6(5),u.um2(16,s.error?16:-1),u.xp6(5),u.um2(21,s.formControl.email.touched||s.submitted?21:-1),u.xp6(5),u.um2(26,s.formControl.password.touched||s.submitted?26:-1),u.xp6(2),u.Q6J("disabled",s.loading),u.xp6(),u.Q6J("ngIf",s.loading&&s.submitted))},dependencies:[di.O5,j._Y,j.Fj,j.JJ,j.JL,j.Q7,j.F,j.sg,j.u]})}return l})();function vn(l,e){1&l&&(u.TgZ(0,"span",30),u._uU(1,"Nom requis."),u.qZA())}function yn(l,e){if(1&l&&u.YNc(0,vn,2,0,"span",29),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.nomService.errors&&t.formControl.nomService.errors.required?0:-1)}}function xn(l,e){1&l&&(u.TgZ(0,"span",30),u._uU(1,"Prix requis."),u.qZA())}function wn(l,e){if(1&l&&u.YNc(0,xn,2,0,"span",29),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.prix.errors&&t.formControl.prix.errors.required?0:-1)}}function Pn(l,e){1&l&&(u.TgZ(0,"span",30),u._uU(1,"Duree requis."),u.qZA())}function Tn(l,e){if(1&l&&u.YNc(0,Pn,2,0,"span",29),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.duree.errors&&t.formControl.duree.errors.required?0:-1)}}function Dn(l,e){1&l&&(u.TgZ(0,"span",30),u._uU(1,"Commission requis."),u.qZA())}function Cn(l,e){if(1&l&&u.YNc(0,Dn,2,0,"span",29),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.commission.errors&&t.formControl.commission.errors.required?0:-1)}}function zo(l,e){1&l&&u._UZ(0,"span",31)}let xa=(()=>{class l{submit(){if(this.submitted=!0,this.addServiceForm.valid){this.loading=!0;const t=this.addServiceForm.value,i=new FormData;if(i.append("nomService",t.nomService),i.append("prix",t.prix),i.append("duree",t.duree),i.append("commission",t.commission),i.append("description",t.description),i.append("icone",t.icone),t.image)for(let s=0;s<t.image.length;s++)i.append("file",t.image[s],t.image[s].name);if(t.galerie&&t.galerie.length>0)for(let s=0;s<t.galerie.length;s++)i.append("files",t.galerie[s],t.galerie[s].name);this.saveService(i).subscribe({next:s=>{200==s.status?(this.toastr.success("Vous vous \xeates inscrit avec succ\xe8s!","Succ\xe8s!",_e.U),this.router.navigate(["/manager/service/list"])):(console.error(s.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.loading=!1,this.submitted=!1},error:s=>{console.error(s),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.loading=!1,this.submitted=!1}})}}checkIcon(){console.log("inn?")}constructor(t,i,s,a){this.service=t,this.route=i,this.toastr=s,this.router=a,this.submitted=!1,this.loading=!1,this.isLoading=!1,this.title="Ajouter un service"}get formControl(){return this.addServiceForm.controls}ngOnInit(){this.id=this.route.snapshot.params.id,this.addServiceForm=new j.cw({nomService:new j.NI("Service",[j.kI.required]),prix:new j.NI(10,[j.kI.required]),duree:new j.NI(10,{validators:[j.kI.required]}),commission:new j.NI(10,{validators:[j.kI.required]}),description:new j.NI(""),image:new j.NI(null),icone:new j.NI(""),galerie:new j.NI(null)}),this.id&&(this.title="Modifier un service",this.isLoading=!0,this.service.getService(this.id).pipe((0,mn.P)()).subscribe(t=>{this.addServiceForm=new j.cw({nomService:new j.NI(t.data.nomService,[j.kI.required]),prix:new j.NI(t.data.prix,[j.kI.required]),duree:new j.NI(t.data.duree,[j.kI.required]),commission:new j.NI(t.data.commission,[j.kI.required]),description:new j.NI(t.data.description),icone:new j.NI(t.data.icone),image:new j.NI(null),galerie:new j.NI(null)}),this.isLoading=!1}))}saveService(t){return this.id?this.service.updateService(this.id,t):this.service.addService(t)}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(Fr),u.Y36(D.gz),u.Y36(it._W),u.Y36(D.F0))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-service-add"]],decls:58,vars:13,consts:[[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"text-left","pb-4"],["routerLink","/manager/service/list",1,"btn","btn-danger","btn-light-pink"],[1,"fa","fa-arrow-left"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"shop-account","w-100","p-0"],[1,"row"],[1,"max-w500","m-auto","m-b30"],[1,"p-a30","border-1","seth"],[1,"tab-content","nav"],["enctype","multipart/form-data",1,"w-100",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"font-weight-700"],["id","nom","placeholder","Nom du service","type","text","formControlName","nomService",1,"form-control"],["id","prix","placeholder","Prix du service","type","number","formControlName","prix","step","0.1","min","1",1,"form-control"],["id","duree","required","","placeholder","Duree en minute","type","number","min","1","formControlName","duree",1,"form-control"],["id","mdp","required","","placeholder","Commission en pourcentage","type","number","formControlName","commission","step","0.1","min","1",1,"form-control"],["formControlName","description","placeholder","Description du service","type","text","rows","4",1,"form-control",2,"height","auto","padding","15px 20px"],["id","mdp","placeholder","Icone","type","text","formControlName","icone",1,"form-control"],[3,"formData","formField"],[3,"multiple","formData","formField"],[1,"text-left"],["type","submit",1,"btn","btn-danger","btn-light-pink","p-3",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","text-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u._UZ(4,"i",4),u.qZA()(),u.TgZ(5,"div",5)(6,"h2",6),u._uU(7),u.qZA(),u.TgZ(8,"div",7)(9,"div",8),u._UZ(10,"i",9),u.qZA()()(),u.TgZ(11,"div",10)(12,"div",1)(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"form",15),u.NdJ("ngSubmit",function(){return s.submit()}),u.TgZ(18,"div",16)(19,"label",17),u._uU(20,"Nom *"),u.qZA(),u._UZ(21,"input",18),u.YNc(22,yn,1,1),u.qZA(),u.TgZ(23,"div",16)(24,"label",17),u._uU(25,"Prix *"),u.qZA(),u._UZ(26,"input",19),u.YNc(27,wn,1,1),u.qZA(),u.TgZ(28,"div",16)(29,"label",17),u._uU(30,"Duree *"),u.qZA(),u._UZ(31,"input",20),u.YNc(32,Tn,1,1),u.qZA(),u.TgZ(33,"div",16)(34,"label",17),u._uU(35,"Commission *"),u.qZA(),u._UZ(36,"input",21),u.YNc(37,Cn,1,1),u.qZA(),u.TgZ(38,"div",16)(39,"label",17),u._uU(40,"Description"),u.qZA(),u._UZ(41,"textarea",22),u.qZA(),u.TgZ(42,"div",16)(43,"label",17),u._uU(44,"Icone *"),u.qZA(),u._UZ(45,"input",23),u.qZA(),u.TgZ(46,"div",16)(47,"label",17),u._uU(48,"Image *"),u.qZA(),u._UZ(49,"app-upload-images",24),u.qZA(),u.TgZ(50,"div",16)(51,"label",17),u._uU(52,"Galerie *"),u.qZA(),u._UZ(53,"app-upload-images",25),u.qZA(),u.TgZ(54,"div",26)(55,"button",27),u.YNc(56,zo,1,0,"span",28),u._uU(57," Ajouter un service "),u.qZA()()()()()()()()()()()),2&i&&(u.xp6(7),u.Oqu(s.title),u.xp6(10),u.Q6J("formGroup",s.addServiceForm),u.xp6(5),u.um2(22,s.formControl.nomService.touched||s.submitted?22:-1),u.xp6(5),u.um2(27,s.formControl.prix.touched||s.submitted?27:-1),u.xp6(5),u.um2(32,s.formControl.duree.touched||s.submitted?32:-1),u.xp6(5),u.um2(37,s.formControl.commission.touched||s.submitted?37:-1),u.xp6(12),u.Q6J("formData",s.addServiceForm)("formField","image"),u.xp6(4),u.Q6J("multiple",!0)("formData",s.addServiceForm)("formField","galerie"),u.xp6(2),u.Q6J("disabled",s.loading),u.xp6(),u.Q6J("ngIf",s.loading&&s.submitted))},dependencies:[gi.a,di.O5,D.rH,j._Y,j.Fj,j.wV,j.JJ,j.JL,j.Q7,j.qQ,j.sg,j.u]})}return l})();function Wo(l,e){1&l&&u._UZ(0,"div",0)}const Xr=l=>["/manager/service/edit",l];function wa(l,e){if(1&l&&(u.TgZ(0,"div",28)(1,"a",29),u._UZ(2,"i"),u.qZA()()),2&l){const t=u.oxw().$implicit;u.xp6(),u.Q6J("routerLink",u.VKq(4,Xr,t._id)),u.xp6(),u.Tol(t.icone)}}function Go(l,e){if(1&l&&(u.TgZ(0,"div",30)(1,"a",29),u._UZ(2,"img",31),u.qZA()()),2&l){const t=u.oxw().$implicit,i=u.oxw();u.xp6(),u.Q6J("routerLink",u.VKq(2,Xr,t._id)),u.xp6(),u.s9C("src",i.apiUrl+"/Service/"+t.image,u.LSH)}}function Vo(l,e){if(1&l&&(u.TgZ(0,"div",13)(1,"div",14),u.YNc(2,wa,3,6,"div",15)(3,Go,3,4),u.TgZ(4,"div",16)(5,"h5",17)(6,"a",18),u._uU(7),u.qZA()(),u.TgZ(8,"div",19)(9,"p",20)(10,"span",21)(11,"b"),u._uU(12,"Dur\xe9e:"),u.qZA()(),u._uU(13),u.qZA(),u.TgZ(14,"p",22)(15,"span",21)(16,"b"),u._uU(17,"Prix:"),u.qZA()(),u._uU(18),u.qZA()(),u.TgZ(19,"p"),u._uU(20),u.qZA(),u.TgZ(21,"p",23)(22,"button",24),u._UZ(23,"i",25),u.qZA(),u.TgZ(24,"button",26),u._UZ(25,"i",27),u.qZA()()()()()),2&l){const t=e.$implicit;u.xp6(2),u.um2(2,t.icone?2:3),u.xp6(4),u.Q6J("routerLink",u.VKq(8,Xr,t._id)),u.xp6(),u.Oqu(t.nomService),u.xp6(6),u.hij(" ",t.duree," min "),u.xp6(5),u.hij(" ",t.prix," $ "),u.xp6(2),u.Oqu(t.description),u.xp6(2),u.Q6J("routerLink",u.VKq(10,Xr,t._id)),u.xp6(2),u.uIk("data-bs-target","#exampleModal"+t._id)}}function qo(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35)(4,"h1",36),u._uU(5," Suppression de service "),u.qZA(),u._UZ(6,"button",37),u.qZA(),u.TgZ(7,"div",38),u._uU(8," \xcates-vous s\xfbr de vouloir supprimer le service: "),u.TgZ(9,"b",21),u._uU(10),u.qZA(),u._uU(11," ? "),u.qZA(),u.TgZ(12,"div",39)(13,"button",40),u._uU(14," Fermer "),u.qZA(),u.TgZ(15,"button",41),u.NdJ("click",function(){const a=u.CHM(t).$implicit,o=u.oxw();return u.KtG(o.deleteService(a._id))}),u._uU(16," Supprimer "),u.qZA()()()()()}if(2&l){const t=e.$implicit;u.MGl("id","exampleModal",t._id,""),u.xp6(10),u.Oqu(t.nomService)}}function Jo(l,e){1&l&&(u.TgZ(0,"div")(1,"div",42),u._uU(2,"Pas de resultat."),u.qZA()())}let Pa=(()=>{class l{constructor(t,i){this.service=t,this.toastr=i,this.searchText="",this.listeService=[],this.listeServiceBackup=[],this.isLoading=!1,this.deleteService=s=>{this.service.deleteService(s).subscribe({next:a=>{200==a.status?(this.toastr.success("Une donn\xe9e a \xe9t\xe9 supprim\xe9e!","Success!",_e.U),window.closeModal(),this.getListeService()):(console.error(a.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.isLoading=!1},error:a=>{console.error(a),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.isLoading=!1}})},this.getListeService(),this.apiUrl=fi.N.apiUrl}searchInsideService(){this.listeService=this.searchText?this.listeService.filter(t=>t.nomService.toLowerCase().includes(this.searchText.toLowerCase())||t.description.toLowerCase().includes(this.searchText.toLowerCase())||t.duree.toString().includes(this.searchText.toLowerCase())||t.prix.toString().includes(this.searchText.toLowerCase())):this.listeServiceBackup}getListeService(){this.isLoading=!0,this.service.getListeService().subscribe({next:t=>{200==t.status?(this.listeService=t.data,0==this.listeServiceBackup.length&&(this.listeServiceBackup=this.listeService)):(console.error(t.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.isLoading=!1},error:t=>{console.error(t),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.isLoading=!1}})}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(Fr),u.Y36(it._W))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-service-list-manager"]],decls:18,vars:3,consts:[["id","loading-area"],[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"d-flex","align-items-center","py-2","justify-content-center"],["type","search","name","","id","","placeholder","Rechercher un service...",1,"form-control",2,"text-align","center","border-top","none","border-left","none","border-right","none","max-width","500px",3,"ngModel","input","ngModelChange"],[1,"fa","fa-search","text-body-tertiary"],[1,"row","d-flex"],[4,"ngIf"],[1,"col-lg-4","col-md-6","col-sm-6","p-lr0"],[1,"icon-bx-wraper","center","p-a30","h-100"],["class","icon-lg radius m-b20"],[1,"icon-content"],[1,"dez-tilte"],[3,"routerLink"],[1,"text-left",2,"display","inline-block","margin","auto"],[1,"m-0"],[1,"text-pink"],[1,"mb-2"],[1,"text-right","d-flex","gap-2","justify-content-end"],[1,"btn","btn-danger","btn-light-pink",3,"routerLink"],[1,"fa","fa-edit"],["data-bs-toggle","modal",1,"btn","btn-danger","btn-pink",2,"border-radius","0"],[1,"fa","fa-trash"],[1,"icon-lg","radius","m-b20"],[1,"icon-cell",3,"routerLink"],[1,"icon-lg","radius","m-b20","d-flex","align-items-center","justify-content-center","w-100",2,"min-height","90.5px"],["alt","","width","84px",3,"src"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","d-flex","align-items-center"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger","btn-pink",3,"click"],[2,"text-align","center"],["class","col-lg-4 col-md-6 col-sm-6 p-lr0"],["class","modal fade","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",3,"id"]],template:function(i,s){1&i&&(u.YNc(0,Wo,1,0,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5,"Liste des services"),u.qZA(),u.TgZ(6,"div",5)(7,"div",6),u._UZ(8,"i",7),u.qZA()(),u.TgZ(9,"div",8)(10,"input",9),u.NdJ("input",function(){return s.searchInsideService()})("ngModelChange",function(o){return s.searchText=o}),u.qZA(),u._UZ(11,"i",10),u.qZA()(),u.TgZ(12,"div",11),u.SjG(13,Vo,26,12,"div",43,u.ikw),u.SjG(15,qo,17,2,"div",44,u.ikw),u.YNc(17,Jo,3,0,"div",12),u.qZA()()()),2&i&&(u.um2(0,s.isLoading?0:-1),u.xp6(10),u.Q6J("ngModel",s.searchText),u.xp6(3),u.wJu(s.listeService),u.xp6(2),u.wJu(s.listeService),u.xp6(2),u.Q6J("ngIf",0===s.listeService.length))},dependencies:[di.O5,D.rH,j.Fj,j.JJ,j.On]})}return l})();me(9930);var An=me(5427),Ko=me(3579);function Sn(l,e){1&l&&u._UZ(0,"div",0)}function $o(l,e){1&l&&(u.TgZ(0,"span",25),u._uU(1,"En Cours"),u.qZA())}function On(l,e){1&l&&(u.TgZ(0,"span",26),u._uU(1,"Programm\xe9"),u.qZA())}function Qo(l,e){1&l&&(u.TgZ(0,"span",27),u._uU(1,"Termine"),u.qZA())}const el=l=>["/manager/offre/edit",l];function tl(l,e){if(1&l&&(u.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"h5",15)(4,"a",16),u._uU(5),u.qZA()()(),u.YNc(6,$o,2,0,"span",17)(7,On,2,0)(8,Qo,2,0),u.TgZ(9,"div",18)(10,"p")(11,"b",19),u._uU(12,"Du: "),u.qZA(),u._uU(13),u.qZA(),u.TgZ(14,"p")(15,"b",19),u._uU(16,"Au: "),u.qZA(),u._uU(17),u.qZA(),u.TgZ(18,"p")(19,"b",19),u._uU(20,"Remise: "),u.qZA(),u._uU(21),u.qZA()(),u.TgZ(22,"p",20)(23,"button",21),u._UZ(24,"i",22),u.qZA(),u.TgZ(25,"button",23),u._UZ(26,"i",24),u.qZA()()()()),2&l){const t=e.$implicit,i=u.oxw(2);u.xp6(4),u.Q6J("routerLink",u.VKq(8,el,t._id)),u.xp6(),u.Oqu(t.nomOffre),u.xp6(),u.um2(6,i.offreStatus(t)?6:i.isProgrammed(t.dateDebut)?7:8),u.xp6(7),u.hij("",i.formatDate(t.dateDebut)," "),u.xp6(4),u.hij("",i.formatDate(t.dateFin)," "),u.xp6(4),u.hij("",t.remise,"% "),u.xp6(2),u.MGl("routerLink","/manager/offre/edit/",t._id,""),u.xp6(2),u.uIk("data-bs-target","#exampleModal"+t._id)}}function il(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"h1",32),u._uU(5," Suppression d'offre "),u.qZA(),u._UZ(6,"button",33),u.qZA(),u.TgZ(7,"div",34),u._uU(8," \xcates-vous s\xfbr de vouloir supprimer l'offre: "),u.TgZ(9,"b",19),u._uU(10),u.qZA(),u._uU(11," ? "),u.qZA(),u.TgZ(12,"div",35)(13,"button",36),u._uU(14," Fermer "),u.qZA(),u.TgZ(15,"button",37),u.NdJ("click",function(){const a=u.CHM(t).$implicit,o=u.oxw(2);return u.KtG(o.deleteOffre(a._id))}),u._uU(16," Supprimer "),u.qZA()()()()()}if(2&l){const t=e.$implicit;u.MGl("id","exampleModal",t._id,""),u.xp6(10),u.Oqu(t.nomOffre)}}function rl(l,e){if(1&l&&(u.SjG(0,tl,27,10,"div",38,u.ikw),u.SjG(2,il,17,2,"div",39,u.ikw)),2&l){const t=u.oxw();u.wJu(t.listeOffre),u.xp6(2),u.wJu(t.listeOffre)}}function sl(l,e){1&l&&(u.TgZ(0,"div",40)(1,"div",41)(2,"span",42),u._uU(3,"Loading..."),u.qZA()()())}let nl=(()=>{class l{searchInsideOfferList(){this.listeOffre=this.searchText?this.listeOffre.filter(t=>t.nomOffre.toLowerCase().includes(this.searchText.toLowerCase())):this.listeOffreBackup}constructor(t,i,s){this.service=t,this.toastr=i,this.localTimezoneService=s,this.searchText="",this.listeOffre=[],this.listeOffreBackup=[],this.apiUrl=fi.N.apiUrl,this.isLoading=!1,this.dateNow=$e(),this.deleteOffre=a=>{this.service.deleteOffre(a).subscribe({next:o=>{200==o.status?(this.toastr.success("Une donn\xe9e a \xe9t\xe9 supprim\xe9e!","Success!",_e.U),window.closeModal(),this.isLoading=!0,this.service.getListeOffre().subscribe({next:c=>{this.listeOffre=c.data,this.listeOffreBackup=this.listeOffre,this.isLoading=!1}})):(console.error(o.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.isLoading=!1},error:o=>{console.error(o),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.isLoading=!1}})},this.formatDate=a=>($e.locale("fr"),$e(a).format("Do-MM-YYYY hh:mm")),s.setDefaultTimezone()}ngOnInit(){this.isLoading=!0,this.service.getListeOffre().subscribe({next:t=>{this.listeOffre=t.data,console.log(this.listeOffre),this.listeOffreBackup=this.listeOffre,this.isLoading=!1}})}offreStatus(t){return $e(t.dateDebut).toDate()<=$e().toDate()&&$e().toDate()<=$e(t.dateFin).toDate()}isProgrammed(t){return new Date(t)>new Date}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(An.s),u.Y36(it._W),u.Y36(Ko.a))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-offer-list"]],decls:15,vars:3,consts:[["id","loading-area"],[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"d-flex","align-items-center","py-2","justify-content-center"],["type","search","name","","id","","placeholder","Rechercher une offre...",1,"form-control",2,"text-align","center","border-top","none","border-left","none","border-right","none","max-width","500px",3,"ngModel","input","ngModelChange"],[1,"fa","fa-search","text-body-tertiary"],[1,"row","d-flex"],[1,"col-lg-4","col-md-6","col-sm-6","p-lr0"],[1,"icon-bx-wraper","center","p-a30","h-100"],[1,"icon-content"],[1,"dez-tilte"],[3,"routerLink"],["class","badge badge-success"],[1,"py-3"],[1,"text-pink"],[1,"text-right","d-flex","gap-2","justify-content-end","pt-5"],[1,"btn","btn-danger","btn-light-pink",3,"routerLink"],[1,"fa","fa-edit"],["data-bs-toggle","modal",1,"btn","btn-danger","btn-pink",2,"border-radius","0"],[1,"fa","fa-trash"],[1,"badge","badge-success"],[1,"badge","badge-info"],[1,"badge","badge-warning"],["tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade",3,"id"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","d-flex","align-items-center"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-danger","btn-pink",3,"click"],["class","col-lg-4 col-md-6 col-sm-6 p-lr0"],["class","modal fade","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",3,"id"],[1,"text-center"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(i,s){1&i&&(u.YNc(0,Sn,1,0,"div",0),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),u._uU(5,"Liste des offres"),u.qZA(),u.TgZ(6,"div",5)(7,"div",6),u._UZ(8,"i",7),u.qZA()(),u.TgZ(9,"div",8)(10,"input",9),u.NdJ("input",function(){return s.searchInsideOfferList()})("ngModelChange",function(o){return s.searchText=o}),u.qZA(),u._UZ(11,"i",10),u.qZA()(),u.TgZ(12,"div",11),u.YNc(13,rl,4,0)(14,sl,4,0),u.qZA()()()),2&i&&(u.um2(0,s.isLoading?0:-1),u.xp6(10),u.Q6J("ngModel",s.searchText),u.xp6(3),u.um2(13,s.listeOffre?13:14))},dependencies:[D.rH,j.Fj,j.JJ,j.On]})}return l})();var fr=me(5861),zr=me(4036),Ta=me(9877);function al(l,e){1&l&&(u.TgZ(0,"span",18),u._uU(1,"Nom requis."),u.qZA())}function ol(l,e){if(1&l&&u.YNc(0,al,2,0,"span",17),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.nomOffre.errors&&t.formControl.nomOffre.errors.required?0:-1)}}function ll(l,e){1&l&&(u.TgZ(0,"span",18),u._uU(1,"Remise requis."),u.qZA())}function ul(l,e){if(1&l&&u.YNc(0,ll,2,0,"span",17),2&l){const t=u.oxw();u.um2(0,null!=t.formControl.remise.errors&&t.formControl.remise.errors.required?0:-1)}}function hl(l,e){1&l&&u._UZ(0,"span",19)}let Wr=(()=>{class l{constructor(){this.itemChange=new u.vpe(void 0),this.buttonLabel="",this.submitted=!1,this.loading=!1}set offreDatas(t){this.offreData=t}set listeServices(t){this.listeService=t}set offerFormData(t){this.offreData=t}get formControl(){return this.offerForm.controls}onItemServiceChange(t){this.offerForm.patchValue({service:t.id})}ngOnInit(){this.offerForm=new j.cw({nomOffre:new j.NI("",[j.kI.required]),service:new j.NI("",[j.kI.required]),remise:new j.NI(10,[j.kI.required]),dateDebut:new j.NI($e().format("YYYY-MM-DD HH:mm"),{validators:[j.kI.required]}),dateFin:new j.NI($e().add(1,"day").format("YYYY-MM-DD HH:mm"),{validators:[j.kI.required]})}),this.offreData&&(this.offerForm.patchValue({nomOffre:this.offreData.nomOffre}),this.offerForm.patchValue({remise:this.offreData.remise}),this.offerForm.patchValue({dateDebut:$e(this.offreData.dateDebut).format("YYYY-MM-DD HH:mm")}),this.offerForm.patchValue({dateFin:$e(this.offreData.dateFin).format("YYYY-MM-DD HH:mm")}))}submit(){this.offerForm.valid&&this.itemChange.emit(this.offerForm.value)}static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-offer-form"]],inputs:{buttonLabel:"buttonLabel",offreDatas:[u.lbL.None,"offreData","offreDatas"],listeServices:[u.lbL.None,"listeService","listeServices"],offerFormData:[u.lbL.None,"offreData","offerFormData"]},outputs:{itemChange:"itemChange"},decls:33,vars:10,consts:[[1,"shop-account","w-100","p-0"],[1,"container"],[1,"row"],[1,"max-w500","m-auto","m-b30"],[1,"p-a30","border-1","seth"],[1,"tab-content","nav"],[1,"w-100",3,"formGroup","ngSubmit"],[1,"form-group"],[1,"font-weight-700"],["id","nom","placeholder","Nom de l'offre","type","text","formControlName","nomOffre",1,"form-control"],[3,"items","showSearch","showStatus","showError","itemChange"],["id","duree","required","","placeholder","Remise en pourcentage","type","number","formControlName","remise","max","100","min","1","step","1",1,"form-control"],["id","mdp","required","","type","datetime-local","formControlName","dateDebut",1,"form-control"],["id","mdp","required","","type","datetime-local","formControlName","dateFin",1,"form-control"],[1,"text-left"],["type","submit",1,"btn","btn-danger","btn-light-pink","p-3",3,"disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","text-danger"],[1,"text-danger"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form",6),u.NdJ("ngSubmit",function(){return s.submit()}),u.TgZ(7,"div",7)(8,"label",8),u._uU(9,"Nom *"),u.qZA(),u._UZ(10,"input",9),u.YNc(11,ol,1,1),u.qZA(),u.TgZ(12,"div",7)(13,"label",8),u._uU(14,"Service *"),u.qZA(),u.TgZ(15,"app-dropdown",10),u.NdJ("itemChange",function(o){return s.onItemServiceChange(o)}),u.qZA()(),u.TgZ(16,"div",7)(17,"label",8),u._uU(18,"Remise *"),u.qZA(),u._UZ(19,"input",11),u.YNc(20,ul,1,1),u.qZA(),u.TgZ(21,"div",7)(22,"label",8),u._uU(23,"Date Debut"),u.qZA(),u._UZ(24,"input",12),u.qZA(),u.TgZ(25,"div",7)(26,"label",8),u._uU(27,"Date Fin"),u.qZA(),u._UZ(28,"input",13),u.qZA(),u.TgZ(29,"div",14)(30,"button",15),u.YNc(31,hl,1,0,"span",16),u._uU(32),u.qZA()()()()()()()()()),2&i&&(u.xp6(6),u.Q6J("formGroup",s.offerForm),u.xp6(5),u.um2(11,s.formControl.nomOffre.touched||s.submitted?11:-1),u.xp6(4),u.Q6J("items",s.listeService)("showSearch",!0)("showStatus",!0)("showError",!1),u.xp6(5),u.um2(20,s.formControl.remise.touched||s.submitted?20:-1),u.xp6(10),u.Q6J("disabled",s.loading),u.xp6(),u.Q6J("ngIf",s.loading&&s.submitted),u.xp6(),u.hij(" ",s.buttonLabel," "))},dependencies:[Ta.J,di.O5,j._Y,j.Fj,j.wV,j.JJ,j.JL,j.Q7,j.qQ,j.Fd,j.sg,j.u]})}return l})();function cl(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"app-offer-form",11),u.NdJ("itemChange",function(s){u.CHM(t);const a=u.oxw();return u.KtG(a.submit(s))}),u.qZA()}if(2&l){const t=u.oxw();u.Q6J("buttonLabel","Ajouter une offre")("listeService",t.listeService)}}let ws=(()=>{class l{constructor(t,i,s,a){this.serviceService=t,this.offreService=i,this.toastr=s,this.router=a,this.isLoading=!1,this.loading=!1,this.submitted=!1,this.apiUrl="",this.listeService=[],this.apiUrl=fi.N.apiUrl}ngOnInit(){this.getListeService()}getListeService(){var t=this;return(0,fr.Z)(function*(){t.isLoading=!0;var i=yield(0,zr.z)(t.serviceService.getListeService());t.listeService=i.data.map(s=>({id:s._id,name:s.nomService,data:s}))})()}submit(t){this.offreService.addOffre(t).subscribe({next:i=>{200==i.status?(this.toastr.success("Offre ajout\xe9 avec succ\xe8s!","Succ\xe8s!",_e.U),this.router.navigate(["/manager/offre/list"])):(console.error(i.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.loading=!1,this.submitted=!1},error:i=>{console.error(i),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.loading=!1,this.submitted=!1}})}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(Fr),u.Y36(An.s),u.Y36(it._W),u.Y36(D.F0))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-offer-add"]],decls:12,vars:1,consts:[[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"text-left","pb-4"],["routerLink","/manager/offre/list",1,"btn","btn-danger","btn-light-pink"],[1,"fa","fa-arrow-left"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[3,"buttonLabel","listeService"],[3,"buttonLabel","listeService","itemChange"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u._UZ(4,"i",4),u.qZA()(),u.TgZ(5,"div",5)(6,"h2",6),u._uU(7,"Ajouter une offre"),u.qZA(),u.TgZ(8,"div",7)(9,"div",8),u._UZ(10,"i",9),u.qZA()()(),u.YNc(11,cl,1,2,"app-offer-form",10),u.qZA()()),2&i&&(u.xp6(11),u.um2(11,s.listeService.length>0?11:-1))},dependencies:[D.rH,Wr]})}return l})();function dl(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"app-offer-form",11),u.NdJ("itemChange",function(s){u.CHM(t);const a=u.oxw();return u.KtG(a.submit(s))}),u.qZA()}if(2&l){const t=u.oxw();u.Q6J("buttonLabel","Modifier l'offre")("listeService",t.listeService)("offreData",t.offreData)}}let fl=(()=>{class l{constructor(t,i,s,a,o){this.serviceService=t,this.offreService=i,this.toastr=s,this.router=a,this.route=o,this.isLoading=!1,this.loading=!1,this.submitted=!1,this.id="",this.apiUrl="",this.listeService=[],this.apiUrl=fi.N.apiUrl}ngOnInit(){var t=this;return(0,fr.Z)(function*(){t.id=t.route.snapshot.params.id,yield t.getOffre(t.id),yield t.getListeService()})()}getOffre(t){var i=this;return(0,fr.Z)(function*(){i.offreData=yield(0,zr.z)(i.offreService.getOffre(t)),i.offreData=i.offreData.data})()}getListeService(){var t=this;return(0,fr.Z)(function*(){t.isLoading=!0;var i=yield(0,zr.z)(t.serviceService.getListeService());t.listeService=i.data.map(s=>({id:s._id,name:s.nomService,data:s})),t.listeService.forEach(s=>{t.offreData.service._id===s.id&&(s.checked=!0)})})()}submit(t){this.offreService.updateOffre(this.id,t).subscribe({next:i=>{200==i.status?(this.toastr.success("Offre modifi\xe9 avec succ\xe8s!","Succ\xe8s!",_e.U),this.router.navigate(["/manager/offre/list"])):(console.error(i.message),this.toastr.error("Une erreur s'est produite!","Erreur!",_e.U)),this.loading=!1,this.submitted=!1},error:i=>{console.error(i),this.toastr.error("Une erreur s'est produite","Erreur!",_e.U),this.loading=!1,this.submitted=!1}})}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(Fr),u.Y36(An.s),u.Y36(it._W),u.Y36(D.F0),u.Y36(D.gz))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-offer-edit"]],decls:12,vars:1,consts:[[1,"content-inner-2","bg-white","hair-services","soft-background"],[1,"container"],[1,"text-left","pb-4"],["routerLink","/manager/offre/list",1,"btn","btn-danger","btn-light-pink"],[1,"fa","fa-arrow-left"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[3,"buttonLabel","listeService","offreData"],[3,"buttonLabel","listeService","offreData","itemChange"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),u._UZ(4,"i",4),u.qZA()(),u.TgZ(5,"div",5)(6,"h2",6),u._uU(7,"Modifier une offre"),u.qZA(),u.TgZ(8,"div",7)(9,"div",8),u._UZ(10,"i",9),u.qZA()()(),u.YNc(11,dl,1,3,"app-offer-form",10),u.qZA()()),2&i&&(u.xp6(11),u.um2(11,s.listeService.length>0?11:-1))},dependencies:[D.rH,Wr]})}return l})();var Mn=me(6990);let Da=(()=>{class l{constructor(t){this.http=t,this.apiUrl=fi.N.apiUrl}getTempsMoyenEmploye(t){return this.http.get(`${this.apiUrl}/Statistique/getTempsMoyenEmploye/${t}`)}getRdvReservationParMois(){return this.http.get(`${this.apiUrl}/Statistique/getRdvReservationParMois`)}getRdvReservationParJour(){return this.http.get(`${this.apiUrl}/Statistique/getRdvReservationParJour`)}getChiffreAffaireParMois(){return this.http.get(`${this.apiUrl}/Statistique/getChiffreAffaireParMois`)}getChiffreAffaireParJour(){return this.http.get(`${this.apiUrl}/Statistique/getChiffreAffaireParJour`)}static#e=this.\u0275fac=function(i){return new(i||l)(u.LFG(gn.eN))};static#t=this.\u0275prov=u.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})();var Ca=me(2374),Qe=me(7582);class le{constructor(e){Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=e}get value(){return this._value/100}get percent(){return this._value}toString(){return this._value+"%"}interpolate(e,t){return e+this.value*(t-e)}static normalize(e,t,i){return e instanceof le?e:new le(t===i?0:100*Math.min(Math.max(1/(i-t)*(e-t),0),1))}}function jt(l){return new le(l)}jt(0);const W=jt(100),ge=jt(50);function _i(l){return Number(l)!==l}function dt(l){if(null!=l&&!R(l)){let e=Number(l);return _i(e)&&Gi(l)&&""!=l?dt(l.replace(/[^0-9.\-]+/g,"")):e}return l}function Ps(l){if(Ts(l))return new Date(l);if(R(l))return new Date(l);{let e=Number(l);return R(e)?new Date(e):new Date(l)}}function Sa(l,e){return new Array(e+1).join(l)}function Ts(l){return"[object Date]"===function kn(l){return{}.toString.call(l)}(l)}function Gi(l){return"string"==typeof l}function R(l){return"number"==typeof l&&Number(l)==l}function Ds(l){return"object"==typeof l&&null!==l}const ei="__\xa7\xa7\xa7__",Ei="__\xa7\xa7\xa7\xa7__";function Ut(l,e){const t=l.length;for(let i=0;i<t;++i)if(l[i]===e)return i;return-1}function Cs(l,e){const t=l.length,i=new Array(t);for(let s=0;s<t;++s)i[s]=e(l[s],s);return i}function I(l,e){const t=l.length;for(let i=0;i<t;++i)e(l[i],i)}function pr(l,e){let t=l.length;for(;t>0;)--t,e(l[t],t)}function En(l,e){const t=l.length;for(let i=0;i<t&&e(l[i],i);++i);}function bt(l,e){let t=!1,i=0;for(;;){if(i=l.indexOf(e,i),-1===i)return t;t=!0,l.splice(i,1)}}function ot(l,e){let t=l.indexOf(e);return-1!==t&&(l.splice(t,1),!0)}function Ma(l,e,t){let i=Ut(l,e);-1!==i&&we(l,i),null==t?l.push(e):xe(l,t,e)}function Vi(l,e){-1===l.indexOf(e)&&l.push(e)}function Ln(l){const e=l.length,t=new Array(e);for(let i=0;i<e;++i)t[i]=l[i];return t}function xe(l,e,t){l.splice(e,0,t)}function we(l,e){l.splice(e,1)}function ka(l,e){const t=l.length;for(let i=0;i<t;++i)if(e(l[i],i))return i;return-1}function Ea(l,e){const t=ka(l,e);if(-1!==t)return l[t]}function Re(l,e){let t=l.length;for(;t>0;)--t,e(l[t])||l.splice(t,1)}class As{constructor(){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Oe{constructor(e){Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=e}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Ia extends As{constructor(){super(...arguments),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_dispose(){I(this._disposers,e=>{e.dispose()})}}class st extends As{constructor(e){super(),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposers=e}_dispose(){I(this._disposers,e=>{e.dispose()})}get disposers(){return this._disposers}}class In extends Oe{constructor(){super(...arguments),Object.defineProperty(this,"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0})}increment(){return++this._counter,new Oe(()=>{--this._counter,0===this._counter&&this.dispose()})}}function Ae(l,e,t,i){return l.addEventListener(e,t,i||!1),new Oe(()=>{l.removeEventListener(e,t,i||!1)})}function Rn(l){return Ae(window,"resize",e=>{l()})}function ti(l){switch(l){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function lt(l){return l.pointerId||0}function Fn(l){if(ti("pointerevents"))return l;if(ti("touchevents"))switch(l){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerleave":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(ti("mouseevents"))switch(l){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerleave":return"mouseleave";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return l}function Ss(l){if(typeof Touch<"u"&&l instanceof Touch)return!0;if(typeof PointerEvent<"u"&&l instanceof PointerEvent&&null!=l.pointerType)switch(l.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(l instanceof MouseEvent)}else if(null!=l.type&&l.type.match(/^mouse/))return!1;return!0}function Nt(l,e,t){l.style[e]=t}function Ms(l){if(l.composedPath){const e=l.composedPath();return 0===e.length?null:e[0]}return l.target}function bi(l,e){return l.target&&function Se(l,e){let t=e;for(;;){if(l===t)return!0;if(null===t.parentNode){if(null==t.host)return!1;t=t.host}else t=t.parentNode}}(e.root.dom,l.target)}function Li(l,e){l.style.pointerEvents=e?"auto":"none"}function qe(l,e){return R(l)?l:null!=l&&R(l.value)&&R(e)?e*l.value:0}function Me(l,e=0,t="0"){return"string"!=typeof l&&(l=l.toString()),e>l.length?Array(e-l.length+1).join(t)+l:l}function Ii(l){return function Sl(l){return l.replace(/^[\s]*/,"")}(function Un(l){return l.replace(/[\s]*$/,"")}(l))}function ut(l){return l.replace(/\/(date|number|duration)$/i,"")}function qr(l){return l&&l.replace(/<[^>]*>/g,"")}function Ya(l,e=!1){const t=new Date(l.getFullYear(),0,0),i=l.getTime()-t.getTime()+60*(t.getTimezoneOffset()-l.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function Es(l,e=!1){const t=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())),i=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-i);const s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-s.getTime())/864e5+1)/7)}function kl(l,e=!1){const t=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate())),i=t.getUTCDay()||7;return t.setUTCDate(t.getUTCDate()+4-i),new Date(Date.UTC(t.getUTCFullYear(),0,1)).getFullYear()}function El(l,e=!1){const t=Es(new Date(l.getFullYear(),l.getMonth(),1),e);let i=Es(l,e);return 1==i&&(i=53),i-t+1}function vi(l,e){return l>12?l-=12:0===l&&(l=12),null!=e?l+(e-1):l}function Ls(l,e=!1,t=!1,i=!1,s){if(i)return e?"Coordinated Universal Time":"UTC";if(s){const c=l.toLocaleString("en-US",{timeZone:s});return Ii(l.toLocaleString("en-US",{timeZone:s,timeZoneName:e?"long":"short"}).substr(c.length))}let a=l.toLocaleString("UTC"),o=l.toLocaleString("UTC",{timeZoneName:e?"long":"short"}).substr(a.length);return!1===t&&(o=o.replace(/ (standard|daylight|summer|winter) /i," ")),Ii(o)}function Il(l){const e=new Date(Date.UTC(2012,0,1,0,0,0,0)),t=new Date(e.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(e.toLocaleString("en-US",{timeZone:l})).getTime()-t.getTime())/6e4*-1}function Is(l){return l.charAt(0).toUpperCase()+l.slice(1)}function Nn(l){let e,t,i,s=l.h,a=l.s,o=l.l;if(0==a)e=t=i=o;else{let c=function(m,_,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?m+6*(_-m)*g:g<.5?_:g<.6666666666666666?m+(_-m)*(.6666666666666666-g)*6:m},d=o<.5?o*(1+a):o+a-o*a,f=2*o-d;e=c(f,d,s+1/3),t=c(f,d,s),i=c(f,d,s-1/3)}return{r:Math.round(255*e),g:Math.round(255*t),b:Math.round(255*i)}}function yi(l){let e=l.r/255,t=l.g/255,i=l.b/255,s=Math.max(e,t,i),a=Math.min(e,t,i),o=0,c=0,d=(s+a)/2;if(s===a)o=c=0;else{let f=s-a;switch(c=d>.5?f/(2-s-a):f/(s+a),s){case e:o=(t-i)/f+(t<i?6:0);break;case t:o=(i-e)/f+2;break;case i:o=(e-t)/f+4}o/=6}return{h:o,s:c,l:d}}function Fs(l,e){return Math.round((e>0?255-l:l)*e)}function qi(l){return(299*l.r+587*l.g+114*l.b)/1e3>=128}function Ze(l,e){return l||(l=[]),[...l,...e].filter((t,i,s)=>s.indexOf(t)===i)}function Za(l,e){return!(!e||l.left!=e.left||l.right!=e.right||l.top!=e.top||l.bottom!=e.bottom)}function Ha(l){return"#"===l[0]&&(l=l.substr(1)),3==l.length&&(l=l[0].repeat(2)+l[1].repeat(2)+l[2].repeat(2)),parseInt(l,16)}function Jr(l){return J.fromAny(l)}class J{constructor(e){Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|e}get hex(){return this._hex}get r(){return this._hex>>>16}get g(){return this._hex>>8&255}get b(){return 255&this._hex}toCSS(e=1){return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}toCSSHex(){return"#"+Me(this.r.toString(16),2)+Me(this.g.toString(16),2)+Me(this.b.toString(16),2)}toHSL(e=1){return yi({r:this.r,g:this.g,b:this.b,a:e})}static fromHSL(e,t,i){const s=Nn({h:e,s:t,l:i});return this.fromRGB(s.r,s.g,s.b)}toString(){return this.toCSSHex()}static fromHex(e){return new J(e)}static fromRGB(e,t,i){return new J((0|i)+(t<<8)+(e<<16))}static fromString(e){return new J(Ha(e))}static fromCSS(e){return new J(function Fl(l){let e=(l=l.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(e)e.push("1");else if(e=l.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i),!e)return 0;let t="";for(let i=1;i<=3;i++){let s=parseInt(e[i]).toString(16);1==s.length&&(s="0"+s),t+=s}return Ha(t)}(e))}static fromAny(e){if(Gi(e)){if("#"==e[0])return J.fromString(e);if("rgb"==e.substr(0,3))return J.fromCSS(e)}else{if(R(e))return J.fromHex(e);if(e instanceof J)return J.fromHex(e.hex)}throw new Error("Unknown color syntax: "+e)}static alternative(e,t,i){const s=function Na(l,e={r:255,g:255,b:255},t={r:255,g:255,b:255}){let i=e,s=t;return qi(t)&&(i=t,s=e),qi(l)?s:i}({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(s.r,s.g,s.b)}static interpolate(e,t,i,s="rgb"){if("hsl"==s){const a=t.toHSL(),o=i.toHSL();return J.fromHSL(Fe(e,a.h,o.h),Fe(e,a.s,o.s),Fe(e,a.l,o.l))}return J.fromRGB(Fe(e,t.r,i.r),Fe(e,t.g,i.g),Fe(e,t.b,i.b))}static lighten(e,t){const i=function Rs(l,e){return l&&{r:Math.max(0,Math.min(255,l.r+Fs(l.r,e))),g:Math.max(0,Math.min(255,l.g+Fs(l.g,e))),b:Math.max(0,Math.min(255,l.b+Fs(l.b,e))),a:l.a}}({r:e.r,g:e.g,b:e.b},t);return J.fromRGB(i.r,i.g,i.b)}static brighten(e,t){const i=function Rl(l,e){if(l){let i=Fs(Math.min(Math.max(l.r,l.g,l.b),230),e);return{r:Math.max(0,Math.min(255,Math.round(l.r+i))),g:Math.max(0,Math.min(255,Math.round(l.g+i))),b:Math.max(0,Math.min(255,Math.round(l.b+i))),a:l.a}}return l}({r:e.r,g:e.g,b:e.b},t);return J.fromRGB(i.r,i.g,i.b)}static saturate(e,t){const i=function Zt(l,e){if(void 0===l||1==e)return l;let t=yi(l);return t.s=e,Nn(t)}({r:e.r,g:e.g,b:e.b},t);return J.fromRGB(i.r,i.g,i.b)}}function M(l){return Object.keys(l)}function F(l){return Object.assign({},l)}function X(l,e){M(l).forEach(t=>{e(t,l[t])})}function He(l,e){return{}.hasOwnProperty.call(l,e)}function Bs(l){return(0,Qe.mG)(this,void 0,void 0,function*(){if(void 0!==l){const e=[];X(l,(t,i)=>{e.push(i.waitForStop())}),yield Promise.all(e)}})}function Fe(l,e,t){return e+l*(t-e)}function js(l,e,t){return l>=1?t:e}function Xa(l,e,t){return new le(Fe(l,e.percent,t.percent))}function gr(l,e,t){return J.interpolate(l,e,t)}var vt=function(l){return l[l.Stopped=0]="Stopped",l[l.Playing=1]="Playing",l[l.Paused=2]="Paused",l}(vt||{});class mr{constructor(){Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}isDisposed(){return this._disposed}dispose(){if(!this._disposed){this._disposed=!0;const e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{I(e,t=>{t.disposer.dispose()})}finally{this._killed=null,this._iterating=null}}}hasListeners(){return 0!==this._listeners.length}hasListenersByType(e){return function Oa(l,e){const t=l.length;for(let i=0;i<t;++i)if(e(l[i]))return!0;return!1}(this._listeners,t=>(null===t.type||t.type===e)&&!t.killed)}enable(){this._enabled=!0}disable(){this._enabled=!1}enableType(e){delete this._disabled[e]}disableType(e,t=1/0){this._disabled[e]=t}_removeListener(e){if(0===this._iterating){const t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}_removeExistingListener(e,t,i,s){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(a=>{a.once===e&&a.type===t&&(void 0===i||a.callback===i)&&a.context===s&&a.disposer.dispose()})}isEnabled(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&void 0===this._disabled[e]}removeType(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener(t=>{t.type===e&&t.disposer.dispose()})}has(e,t,i){return-1!==ka(this._listeners,a=>!0!==a.once&&a.type===e&&(void 0===t||a.callback===t)&&a.context===i)}_shouldDispatch(e){if(this._disposed)throw new Error("EventDispatcher is disposed");const t=this._disabled[e];return R(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}_eachListener(e){++this._iterating;try{I(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(I(this._killed,t=>{this._removeListener(t)}),this._killed.length=0)}}dispatch(e,t){this._shouldDispatch(e)&&this._eachListener(i=>{!i.killed&&(null===i.type||i.type===e)&&i.dispatch(e,t)})}_on(e,t,i,s,a,o){if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,i,s);const c={type:t,callback:i,context:s,shouldClone:a,dispatch:o,killed:!1,once:e,disposer:new Oe(()=>{c.killed=!0,this._removeListener(c)})};return this._listeners.push(c),c}onAll(e,t,i=!0){return this._on(!1,null,e,t,i,(s,a)=>e.call(t,a)).disposer}on(e,t,i,s=!0){return this._on(!1,e,t,i,s,(a,o)=>t.call(i,o)).disposer}once(e,t,i,s=!0){const a=this._on(!0,e,t,i,s,(o,c)=>{a.disposer.dispose(),t.call(i,c)});return a.disposer}off(e,t,i){this._removeExistingListener(!1,e,t,i)}copyFrom(e){if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");const t=[];return I(e._listeners,i=>{!i.killed&&i.shouldClone&&t.push(null===i.type?this.onAll(i.callback,i.context):i.once?this.once(i.type,i.callback,i.context):this.on(i.type,i.callback,i.context))}),new st(t)}}function Ri(l,e){if(!(l>=0&&l<e))throw new Error("Index out of bounds: "+l)}class _r{constructor(e=[]){Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new mr}),this._values=e}get values(){return this._values}contains(e){return-1!==this._values.indexOf(e)}removeValue(e){let t=0,i=this._values.length;for(;t<i;)this._values[t]===e?(this.removeIndex(t),--i):++t}indexOf(e){return Ut(this._values,e)}get length(){return this._values.length}hasIndex(e){return e>=0&&e<this._values.length}getIndex(e){return this._values[e]}_onPush(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}_onInsertIndex(e,t){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t})}_onSetIndex(e,t,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:t,newValue:i})}_onRemoveIndex(e,t){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t})}_onMoveIndex(e,t,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:t,value:i})}_onClear(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}setIndex(e,t){Ri(e,this._values.length);const i=this._values[e];return i!==t&&(this._values[e]=t,this._onSetIndex(e,i,t)),i}insertIndex(e,t){return Ri(e,this._values.length+1),xe(this._values,e,t),this._onInsertIndex(e,t),t}swap(e,t){const i=this._values.length;if(Ri(e,i),Ri(t,i),e!==t){const s=this._values[e],a=this._values[t];this._values[e]=a,this._onSetIndex(e,s,a),this._values[t]=s,this._onSetIndex(t,a,s)}}removeIndex(e){Ri(e,this._values.length);const t=this._values[e];return we(this._values,e),this._onRemoveIndex(e,t),t}moveValue(e,t){let i=this.indexOf(e);if(-1!==i)if(we(this._values,i),null==t){const s=this._values.length;this._values.push(e),this._onMoveIndex(i,s,e)}else xe(this._values,t,e),this._onMoveIndex(i,t,e);else null==t?(this._values.push(e),this._onPush(e)):(xe(this._values,t,e),this._onInsertIndex(t,e));return e}push(e){return this._values.push(e),this._onPush(e),e}unshift(e){return this.insertIndex(0,e),e}pushAll(e){I(e,t=>{this.push(t)})}copyFrom(e){this.pushAll(e._values)}pop(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}shift(){return this._values.length?this.removeIndex(0):void 0}setAll(e){const t=this._values;this._values=[],this._onClear(t),I(e,i=>{this._values.push(i),this._onPush(i)})}clear(){this.setAll([])}*[Symbol.iterator](){const e=this._values.length;for(let t=0;t<e;++t)yield this._values[t]}each(e){I(this._values,e)}eachReverse(e){pr(this._values,e)}}class Ys extends _r{constructor(){super(...arguments),Object.defineProperty(this,"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_onSetIndex(e,t,i){this.autoDispose&&t.dispose(),super._onSetIndex(e,t,i)}_onRemoveIndex(e,t){this.autoDispose&&t.dispose(),super._onRemoveIndex(e,t)}_onClear(e){this.autoDispose&&I(e,t=>{t.dispose()}),super._onClear(e)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this.autoDispose&&I(this._values,e=>{e.dispose()}))}}class br extends Ys{constructor(e,t){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e,this.make=t}}class Ns extends _r{constructor(e){super(),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._container=e,this._events=this.events.onAll(t=>{if("clear"===t.type)I(t.oldValues,i=>{this._onRemoved(i)});else if("push"===t.type)this._onInserted(t.newValue);else if("setIndex"===t.type)this._onRemoved(t.oldValue),this._onInserted(t.newValue,t.index);else if("insertIndex"===t.type)this._onInserted(t.newValue,t.index);else if("removeIndex"===t.type)this._onRemoved(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");this._onRemoved(t.value),this._onInserted(t.value,t.newIndex)}})}_onInserted(e,t){e._setParent(this._container,!0);const i=this._container._childrenDisplay;void 0===t?i.addChild(e._display):i.addChildAt(e._display,t)}_onRemoved(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._events.dispose(),I(this.values,e=>{e.dispose()}))}}function xi(l){return l}function Fi(l){return l*l*l}function ii(l){return function(e){return 1-l(1-e)}}Math;Math.asin(1);class Wn{constructor(e,t){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e,this._settings=t,X(t,i=>{this._userSettings[i]=!0})}get(e,t){const i=this._settings[e];return void 0!==i?i:t}setRaw(e,t){this._settings[e]=t}set(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}remove(e){delete this._userSettings[e],delete this._settings[e]}setAll(e){M(e).forEach(t=>{this.set(t,e[t])})}_eachSetting(e){X(this._settings,e)}apply(){const e={stateAnimationEasing:!0,stateAnimationDuration:!0},t=this._entity.states.lookup("default");this._eachSetting((i,s)=>{e[i]||(e[i]=!0,this!==t&&(i in t._settings||(t._settings[i]=this._entity.get(i))),this._entity.set(i,s))})}applyAnimate(e){null==e&&(e=this._settings.stateAnimationDuration),null==e&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));let t=this._settings.stateAnimationEasing;null==t&&(t=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",Fi)));const i=this._entity.states.lookup("default"),s={stateAnimationEasing:!0,stateAnimationDuration:!0},a={};return this._eachSetting((o,c)=>{if(!s[o]){s[o]=!0,this!=i&&(o in i._settings||(i._settings[o]=this._entity.get(o)));const d=this._entity.animate({key:o,to:c,duration:e,easing:t});d&&(a[o]=d)}}),a}}class Kr{constructor(e){Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=e}lookup(e){return this._states[e]}create(e,t){const i=this._states[e];if(i)return i.setAll(t),i;{const s=new Wn(this._entity,t);return this._states[e]=s,s}}remove(e){delete this._states[e]}apply(e){const t=this._states[e];t&&t.apply(),this._entity._applyState(e)}applyAnimate(e,t){let i;const s=this._states[e];return s&&(i=s.applyAnimate(t)),this._entity._applyStateAnimated(e,t),i}}const et=new class Gn{constructor(){Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.8.3"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})}};function ri(l,e){return l===e?0:l<e?-1:1}function Ji(l,e,t){const i=l.length,s=e.length,a=Math.min(i,s);for(let o=0;o<a;++o){const c=t(l[o],e[o]);if(0!==c)return c}return ri(i,s)}function qa(l,e){return l===e?0:l<e?-1:1}class zl{constructor(e){Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=e}add(e,t){let i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),this._entity._markDirtyKey(e),new Oe(()=>{ot(i,t)&&this._entity._markDirtyKey(e)})}remove(e){const t=this._callbacks[e];void 0!==t&&(delete this._callbacks[e],0!==t.length&&this._entity._markDirtyKey(e))}enable(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}disable(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}fold(e,t){if(!this._disabled[e]){const i=this._callbacks[e];if(void 0!==i)for(let s=0,a=i.length;s<a;++s)t=i[s](t,this._entity,e)}return t}}class Gs{constructor(e,t,i,s,a,o,c){Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new mr}),this._animation=e,this._from=t,this._to=i,this._duration=s,this._easing=a,this._loops=o,this._interpolate=function Us(l,e){return"number"==typeof l&&"number"==typeof e?Fe:l instanceof le&&e instanceof le?Xa:l instanceof J&&e instanceof J?gr:js}(t,i),this._oldTime=c}get to(){return this._to}get from(){return this._from}get playing(){return this._playing}get stopped(){return this._stopped}stop(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}pause(){this._playing=!1,this._oldTime=null}play(){!this._stopped&&!this._playing&&(this._playing=!0,this._animation._startAnimation())}get percentage(){return this._time/this._duration}waitForStop(){return new Promise((e,t)=>{if(this._stopped)e();else{const s=this.events.on("stopped",()=>{s.dispose(),e()})}})}_checkEnded(){return!(this._loops>1&&(--this._loops,1))}_run(e){null!==this._oldTime&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}_reset(e){this._oldTime=e,this._time=0}_value(e){return this._interpolate(this._easing(e),this._from,this._to)}}let Wl=0;class $r{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++Wl}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=e}_checkDirty(){M(this._settings).forEach(e=>{this._userProperties[e]=!0,this._markDirtyKey(e)})}resetUserSettings(){this._userProperties={}}_runAnimation(e){let t=vt.Stopped;if(!this.isDisposed()){let i=!1,s=!1;X(this._animatingSettings,(a,o)=>{if(o.stopped)this._stopAnimation(a);else if(o.playing){o._run(e);const c=o.percentage;c>=1?o._checkEnded()?this.set(a,o._value(1)):(i=!0,o._reset(e),this._set(a,o._value(1))):(i=!0,this._set(a,o._value(c)))}else s=!0}),X(this._animatingPrivateSettings,(a,o)=>{if(o.stopped)this._stopAnimationPrivate(a);else if(o.playing){o._run(e);const c=o.percentage;c>=1?o._checkEnded()?this.setPrivate(a,o._value(1)):(i=!0,o._reset(e),this._setPrivate(a,o._value(1))):(i=!0,this._setPrivate(a,o._value(c)))}else s=!0}),i?t=vt.Playing:s&&(t=vt.Paused)}return t}_markDirtyKey(e){this.markDirty()}_markDirtyPrivateKey(e){this.markDirty()}on(e,t){let i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Oe(()=>{ot(i,t),0===i.length&&delete this._settingEvents[e]})}onPrivate(e,t){let i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Oe(()=>{ot(i,t),0===i.length&&delete this._privateSettingEvents[e]})}getRaw(e,t){const i=this._settings[e];return void 0!==i?i:t}get(e,t){return this.getRaw(e,t)}_sendKeyEvent(e,t){const i=this._settingEvents[e];void 0!==i&&I(i,s=>{s(t,this,e)})}_sendPrivateKeyEvent(e,t){const i=this._privateSettingEvents[e];void 0!==i&&I(i,s=>{s(t,this,e)})}_setRaw(e,t,i){this._prevSettings[e]=t,this._sendKeyEvent(e,i)}setRaw(e,t){const i=this._settings[e];this._settings[e]=t,i!==t&&this._setRaw(e,i,t)}_set(e,t){const i=this._settings[e];this._settings[e]=t,i!==t&&(this._setRaw(e,i,t),this._markDirtyKey(e))}_stopAnimation(e){const t=this._animatingSettings[e];t&&(delete this._animatingSettings[e],t.stop())}set(e,t){return this._set(e,t),this._stopAnimation(e),t}remove(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}removeAll(){I(M(this._settings),e=>{this.remove(e)})}getPrivate(e,t){const i=this._privateSettings[e];return void 0!==i?i:t}_setPrivateRaw(e,t,i){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,i)}setPrivateRaw(e,t){const i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&this._setPrivateRaw(e,i,t)}_setPrivate(e,t){const i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&(this._setPrivateRaw(e,i,t),this._markDirtyPrivateKey(e))}_stopAnimationPrivate(e){const t=this._animatingPrivateSettings[e];t&&(t.stop(),delete this._animatingPrivateSettings[e])}setPrivate(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}removePrivate(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}setAll(e){X(e,(t,i)=>{this.set(t,i)})}animate(e){const t=e.key,i=e.to,s=e.duration||0,a=e.loops||1,o=void 0===e.from?this.get(t):e.from,c=void 0===e.easing?xi:e.easing;if(0===s)this.set(t,i);else{if(void 0!==o&&o!==i){this.set(t,o);const f=this._animatingSettings[t]=new Gs(this,o,i,s,c,a,this._animationTime());return this._startAnimation(),f}this.set(t,i)}const d=new Gs(this,o,i,s,c,a,null);return d.stop(),d}animatePrivate(e){const t=e.key,i=e.to,s=e.duration||0,a=e.loops||1,o=void 0===e.from?this.getPrivate(t):e.from,c=void 0===e.easing?xi:e.easing;if(0===s)this.setPrivate(t,i);else{if(void 0!==o&&o!==i){this.setPrivate(t,o);const f=this._animatingPrivateSettings[t]=new Gs(this,o,i,s,c,a,this._animationTime());return this._startAnimation(),f}this.setPrivate(t,i)}const d=new Gs(this,o,i,s,c,a,null);return d.stop(),d}_dispose(){}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._dispose())}}class Be extends $r{constructor(e,t,i,s=[]){if(super(t),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Kr(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new zl(this)}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:this._createEvents()}),Object.defineProperty(this,"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._root=e,this._internalTemplates=s,t.id&&this._registerId(t.id)}static new(e,t,i){const s=new this(e,t,!0);return s._template=i,s._afterNew(),s}static _new(e,t,i=[]){const s=new this(e,t,!0,i);return s._afterNew(),s}_afterNew(){this._checkDirty();let e=!1;const t=this._template;t&&(e=!0,t._setObjectTemplate(this)),I(this._internalTemplates,i=>{e=!0,i._setObjectTemplate(this)}),e&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}_afterNewApplyThemes(){this._checkDirty();const e=this._template;e&&e._setObjectTemplate(this),I(this._internalTemplates,t=>{t._setObjectTemplate(this)}),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}_createEvents(){return new mr}get classNames(){return this.constructor.classNames}get className(){return this.constructor.className}_setDefaults(){}_setDefault(e,t){e in this._settings||super.set(e,t)}_setRawDefault(e,t){e in this._settings||super.setRaw(e,t)}_clearDirty(){M(this._dirty).forEach(e=>{this._dirty[e]=!1}),M(this._dirtyPrivate).forEach(e=>{this._dirtyPrivate[e]=!1})}isDirty(e){return!!this._dirty[e]}isPrivateDirty(e){return!!this._dirtyPrivate[e]}_markDirtyKey(e){this._dirty[e]=!0,super._markDirtyKey(e)}_markDirtyPrivateKey(e){this._dirtyPrivate[e]=!0,super._markDirtyKey(e)}isType(e){return-1!==this.classNames.indexOf(e)}_pushPropertyDisposer(e,t){let i=this._disposerProperties[e];return void 0===i&&(i=this._disposerProperties[e]=[]),i.push(t),t}_disposeProperty(e){const t=this._disposerProperties[e];void 0!==t&&(I(t,i=>{i.dispose()}),delete this._disposerProperties[e])}set template(e){const t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}get template(){return this._template}markDirty(){this._root._addDirtyEntity(this)}_startAnimation(){this._root._addAnimation(this)}_animationTime(){return this._root.animationTime}_applyState(e){}_applyStateAnimated(e,t){}get(e,t){const i=this.adapters.fold(e,this._settings[e]);return void 0!==i?i:t}isUserSetting(e){return this._userProperties[e]||!1}set(e,t){return this._userProperties[e]=!0,super.set(e,t)}setRaw(e,t){this._userProperties[e]=!0,super.setRaw(e,t)}_setSoft(e,t){return this._userProperties[e]?t:super.set(e,t)}remove(e){delete this._userProperties[e],this._removeTemplateProperty(e)}setPrivate(e,t){return this._userPrivateProperties[e]=!0,super.setPrivate(e,t)}setPrivateRaw(e,t){this._userPrivateProperties[e]=!0,super.setPrivateRaw(e,t)}removePrivate(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}_setTemplateProperty(e,t,i){this._userProperties[t]||e===this._findTemplateByKey(t)&&super.set(t,i)}_setTemplatePrivateProperty(e,t,i){this._userPrivateProperties[t]||e===this._findTemplateByPrivateKey(t)&&super.setPrivate(t,i)}_removeTemplateProperty(e){if(!this._userProperties[e]){const t=this._findTemplateByKey(e);t?super.set(e,t._settings[e]):super.remove(e)}}_removeTemplatePrivateProperty(e){if(!this._userPrivateProperties[e]){const t=this._findTemplateByPrivateKey(e);t?super.setPrivate(e,t._privateSettings[e]):super.removePrivate(e)}}_walkParents(e){e(this._root._rootContainer),e(this)}_applyStateByKey(e){const t=this.states.create(e,{}),i={};this._eachTemplate(s=>{const a=s.states.lookup(e);a&&a._apply(t,i)}),X(t._settings,s=>{!i[s]&&!t._userSettings[s]&&t.remove(s)})}_applyTemplate(e,t){this._templateDisposers.push(e._apply(this,t)),X(e._settings,(i,s)=>{!t.settings[i]&&!this._userProperties[i]&&(t.settings[i]=!0,super.set(i,s))}),X(e._privateSettings,(i,s)=>{!t.privateSettings[i]&&!this._userPrivateProperties[i]&&(t.privateSettings[i]=!0,super.setPrivate(i,s))}),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}_findStaticTemplate(e){if(this._template&&e(this._template))return this._template}_eachTemplate(e){this._findStaticTemplate(t=>(e(t),!1)),pr(this._internalTemplates,e),I(this._templates,e)}_applyTemplates(e=!0){e&&this._disposeTemplates();const t={settings:{},privateSettings:{},states:{}};this._eachTemplate(i=>{this._applyTemplate(i,t)}),e&&(X(this._settings,i=>{!this._userProperties[i]&&!t.settings[i]&&super.remove(i)}),X(this._privateSettings,i=>{!this._userPrivateProperties[i]&&!t.privateSettings[i]&&super.removePrivate(i)}))}_findTemplate(e){const t=this._findStaticTemplate(e);if(void 0===t){const i=function xl(l,e){const t=function yl(l,e){let t=l.length;for(;t>0;)if(--t,e(l[t],t))return t;return-1}(l,e);if(-1!==t)return l[t]}(this._internalTemplates,e);return void 0===i?Ea(this._templates,e):i}return t}_findTemplateByKey(e){return this._findTemplate(t=>e in t._settings)}_findTemplateByPrivateKey(e){return this._findTemplate(t=>e in t._privateSettings)}_disposeTemplates(){I(this._templateDisposers,e=>{e.dispose()}),this._templateDisposers.length=0}_removeTemplates(){I(this._templates,e=>{e._removeObjectTemplate(this)}),this._templates.length=0}_applyThemes(e=!1){let t=!1;const i=[];let s=[];const a=new Set,o=this.get("themeTagsSelf");return o&&I(o,c=>{a.add(c)}),this._walkParents(c=>{c===this._root._rootContainer&&(t=!0),c._defaultThemes.length>0&&i.push(c._defaultThemes);const d=c.get("themes");d&&s.push(d);const f=c.get("themeTags");f&&I(f,b=>{a.add(b)})}),s=i.concat(s),this._removeTemplates(),(t||e)&&pr(this.classNames,c=>{const d=[];I(s,f=>{I(f,b=>{const m=b._lookupRules(c);m&&pr(m,_=>{if(_.tags.every(T=>a.has(T))){const T=function wl(l,e){let t=0,i=l.length,s=!1;for(;t<i;){const a=t+i>>1,o=e(l[a]);o<0?t=a+1:(0===o&&(s=!0),i=a)}return{found:s,index:t}}(d,v=>{const P=ri(_.tags.length,v.tags.length);return 0===P?Ji(_.tags,v.tags,ri):P});d.splice(T.index,0,_)}})})}),I(d,f=>{this._templates.push(f.template),f.template._setObjectTemplate(this)})}),this._applyTemplates(),(t||e)&&(this._runSetup=!1),t||e}_changed(){}_beforeChanged(){if(this.isDirty("id")){const e=this.get("id");e&&this._registerId(e);const t=this._prevSettings.id;t&&delete et.entitiesById[t]}}_registerId(e){if(et.entitiesById[e]&&et.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');et.entitiesById[e]=this}_afterChanged(){}addDisposer(e){return this._disposers.push(e),e}_dispose(){super._dispose();const e=this._template;e&&e._removeObjectTemplate(this),I(this._internalTemplates,i=>{i._removeObjectTemplate(this)}),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach(i=>{i.dispose()}),X(this._disposerProperties,(i,s)=>{I(s,a=>{a.dispose()})});const t=this.get("id");t&&delete et.entitiesById[t]}setTimeout(e,t){const i=setTimeout(()=>{this.removeDispose(s),e()},t),s=new Oe(()=>{clearTimeout(i)});return this._disposers.push(s),s}removeDispose(e){if(!this.isDisposed()){let t=Ut(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}hasTag(e){return-1!==Ut(this.get("themeTags",[]),e)}addTag(e){if(!this.hasTag(e)){const t=this.get("themeTags",[]);t.push(e),this.set("themeTags",t)}}removeTag(e){if(this.hasTag(e)){const t=this.get("themeTags",[]);bt(t,e),this.set("themeTags",t)}}_t(e,t,...i){return this._root.language.translate(e,t,...i)}get root(){return this._root}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});class Ja{constructor(e,t,i){Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=e,this._template=t,this._settings=i}get(e,t){const i=this._settings[e];return void 0!==i?i:t}set(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}remove(e){delete this._settings[e],this._template._stateChanged(this._name)}setAll(e){M(e).forEach(t=>{this._settings[t]=e[t]}),this._template._stateChanged(this._name)}_apply(e,t){X(this._settings,(i,s)=>{!t[i]&&!e._userSettings[i]&&(t[i]=!0,e.setRaw(i,s))})}}class x{constructor(e){Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=e}lookup(e){return this._states[e]}create(e,t){const i=this._states[e];if(i)return i.setAll(t),i;{const s=new Ja(e,this._template,t);return this._states[e]=s,this._template._stateChanged(e),s}}remove(e){delete this._states[e],this._template._stateChanged(e)}_apply(e,t){X(this._states,(i,s)=>{let a=t.states[i];null==a&&(a=t.states[i]={});const o=e.states.create(i,{});s._apply(o,a)})}}class xr{constructor(){Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}add(e,t){let i=this._callbacks[e];return void 0===i&&(i=this._callbacks[e]=[]),i.push(t),new Oe(()=>{ot(i,t),0===i.length&&delete this._callbacks[e]})}remove(e){void 0!==this._callbacks[e]&&delete this._callbacks[e]}_apply(e){const t=[];return X(this._callbacks,(i,s)=>{I(s,a=>{t.push(e.adapters.add(i,a))})}),new st(t)}}class ft{constructor(e,t){if(Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new x(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new xr}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new mr}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=e}static new(e){return new ft(e,!0)}get entities(){return this._entities}get(e,t){const i=this._settings[e];return void 0!==i?i:t}setRaw(e,t){this._settings[e]=t}set(e,t){this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach(i=>{i._setTemplateProperty(this,e,t)}))}remove(e){e in this._settings&&(delete this._settings[e],this._entities.forEach(t=>{t._removeTemplateProperty(e)}))}removeAll(){X(this._settings,(e,t)=>{this.remove(e)})}getPrivate(e,t){const i=this._privateSettings[e];return void 0!==i?i:t}setPrivateRaw(e,t){return this._privateSettings[e]=t,t}setPrivate(e,t){return this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach(i=>{i._setTemplatePrivateProperty(this,e,t)})),t}removePrivate(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach(t=>{t._removeTemplatePrivateProperty(e)}))}setAll(e){X(e,(t,i)=>{this.set(t,i)})}on(e,t){let i=this._settingEvents[e];return void 0===i&&(i=this._settingEvents[e]=[]),i.push(t),new Oe(()=>{ot(i,t),0===i.length&&delete this._settingEvents[e]})}onPrivate(e,t){let i=this._privateSettingEvents[e];return void 0===i&&(i=this._privateSettingEvents[e]=[]),i.push(t),new Oe(()=>{ot(i,t),0===i.length&&delete this._privateSettingEvents[e]})}_apply(e,t){const i=[];return X(this._settingEvents,(s,a)=>{I(a,o=>{i.push(e.on(s,o))})}),X(this._privateSettingEvents,(s,a)=>{I(a,o=>{i.push(e.onPrivate(s,o))})}),this.states._apply(e,t),i.push(this.adapters._apply(e)),i.push(e.events.copyFrom(this.events)),new st(i)}_setObjectTemplate(e){this._entities.push(e)}_removeObjectTemplate(e){bt(this._entities,e)}_stateChanged(e){this._entities.forEach(t=>{t._applyStateByKey(e)})}}const pt=Math.PI,Vs=pt/180,Bi=180/pt;function tt(l,e,t){if(!R(e)||e<=0){let i=Math.round(l);return t&&i-l==.5&&i--,i}{let i=Math.pow(10,e);return Math.round(l*i)/i}}function je(l,e,t){return Math.min(Math.max(l,e),t)}function Vn(l){return Math.sin(Vs*l)}function Ht(l){return Math.cos(Vs*l)}function qn(l,e){return{x:l*Ht(e),y:l*Vn(e)}}class Js extends mr{constructor(e){super(),Object.defineProperty(this,"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this._sprite=e}_makePointerEvent(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}_onRenderer(e,t){this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;let i=this._rendererDisposers[e];if(void 0===i){const s=this._sprite._display.on(e,a=>{t.call(this,a)});i=this._rendererDisposers[e]=new In(()=>{delete this._rendererDisposers[e],s.dispose()})}return i.increment()}_on(e,t,i,s,a,o){const c=super._on(e,t,i,s,a,o),d=Js.RENDERER_EVENTS[t];return void 0!==d&&(c.disposer=new st([c.disposer,this._onRenderer(t,d)])),c}stopParentDispatch(){this._dispatchParents=!1}dispatchParents(e,t){const i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=i}}}Object.defineProperty(Js,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(l){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",l))&&this.dispatch("click",this._makePointerEvent("click",l))},rightclick:function(l){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",l))},middleclick:function(l){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",l))},dblclick:function(l){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",l))},pointerover:function(l){const e=this._sprite;let t=!0;if(e.getPrivate("trustBounds")){e._getBounds();const i=e.globalBounds();(function wi(l,e){return l.x>=e.left&&l.y>=e.top&&l.x<=e.right&&l.y<=e.bottom})(l.point,i)||(t=!1,e._root._renderer.removeHovering(e._display))}t&&this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",l))},pointerout:function(l){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",l))},pointerdown:function(l){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",l))},pointerup:function(l){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",l))},globalpointerup:function(l){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",l))},globalpointermove:function(l){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",l))},wheel:function(l){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:l.event,point:l.point})}}});class Le extends Be{constructor(){super(...arguments),Object.defineProperty(this,"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this.setPrivateRaw("visible",!0),super._afterNew()}_markDirtyKey(e){super._markDirtyKey(e),("x"==e||"y"==e||"dx"==e||"dy"==e)&&(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}_markDirtyPrivateKey(e){super._markDirtyPrivateKey(e),("x"==e||"y"==e)&&this.markDirtyPosition()}_removeTemplateField(){this._templateField&&this._templateField._removeObjectTemplate(this)}_createEvents(){return new Js(this)}_processTemplateField(){let e;const t=this.get("templateField");if(t){const i=this.dataItem;if(i){const s=i.dataContext;s&&(e=s[t],!(e instanceof ft)&&e&&(e=ft.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}_setDataItem(e){const t=this._dataItem;this._dataItem=e,this._processTemplateField();const i="dataitemchanged";e!=t&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:t,newDataItem:e})}set dataItem(e){this._setDataItem(e)}get dataItem(){if(this._dataItem)return this._dataItem;{let e=this._parent;for(;e;){if(e._dataItem)return e._dataItem;e=e._parent}}}_addPercentageSizeChildren(){let e=this.parent;e&&(this.get("width")instanceof le||this.get("height")instanceof le?Vi(e._percentageSizeChildren,this):ot(e._percentageSizeChildren,this))}_addPercentagePositionChildren(){let e=this.parent;e&&(this.get("x")instanceof le||this.get("y")instanceof le?Vi(e._percentagePositionChildren,this):ot(e._percentagePositionChildren,this))}markDirtyPosition(){this._root._addDirtyPosition(this)}updatePivotPoint(){const e=this._localBounds;if(e){const t=this.get("centerX");null!=t&&(this._display.pivot.x=e.left+qe(t,e.right-e.left));const i=this.get("centerY");null!=i&&(this._display.pivot.y=e.top+qe(i,e.bottom-e.top))}}_beforeChanged(){if(super._beforeChanged(),this._handleStates(),this.isDirty("tooltip")){const e=this._prevSettings.tooltip;e&&e.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){const e=this._tooltipMoveDp;e&&(e.dispose(),this._tooltipMoveDp=void 0);const t=this._tooltipPointerDp;t&&(t.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this.isHover()&&(this._tooltipMoveDp=this.events.on("globalpointermove",i=>{this.showTooltip(i.point)})),this._tooltipPointerDp=new st([this.events.on("pointerover",()=>{this._tooltipMoveDp=this.events.on("globalpointermove",i=>{this.showTooltip(i.point)})}),this.events.on("pointerout",()=>{const i=this._tooltipMoveDp;i&&(i.dispose(),this._tooltipMoveDp=void 0)})]))}}_handleStates(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}_changed(){super._changed();const e=this._display,t=this.events;if(this.isDirty("draggable")){const s=this.get("draggable");s?(this.set("interactive",!0),this._dragDp=new st([t.on("pointerdown",a=>{this.dragStart(a)}),t.on("globalpointermove",a=>{this.dragMove(a)}),t.on("globalpointerup",a=>{this.dragStop(a)})])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),e.cancelTouch=!!s}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){const s=this.get("tooltipText"),a=this.get("tooltipHTML"),o=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(s||a)&&("click"==o?(this._tooltipDp=new st([t.on("click",()=>{this.setTimeout(()=>this.showTooltip(),10)}),Ae(document,"click",c=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)):"always"==o||(this._tooltipDp=new st([t.on("pointerover",()=>{this.showTooltip()}),t.on("pointerout",()=>{this.hideTooltip()})]),this._disposers.push(this._tooltipDp)))}if(this.isDirty("toggleKey")){let s=this.get("toggleKey");s&&"none"!=s?this._toggleDp=t.on("click",()=>{this._isDragging||this.set(s,!this.get(s))}):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(e.alpha=Math.max(0,this.get("opacity",1)),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("rotation")&&(this.markDirtyBounds(),e.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),e.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?e.visible=!0:(e.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();const s=this.parent;s&&(this.isDirty("width")&&this.get("width")instanceof le||this.isDirty("height")&&this.get("height")instanceof le)&&(s.markDirty(),s._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){const s=this.get("wheelable");s&&this.set("interactive",!0),e.wheelable=!!s}(this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(e.filter=this.get("filter"));let i=this.get("filter","");if(this.isDirty("blur")){const s=this.get("blur",0);0!=s&&(i+=" blur("+s+"px)")}if(this.isDirty("saturate")){const s=this.get("saturate",1);1!=s&&(i+=" saturate("+s+")")}if(this.isDirty("brightness")){const s=this.get("brightness",1);1!=s&&(i+=" brightness("+s+")")}if(this.isDirty("contrast")){const s=this.get("contrast",1);1!=s&&(i+=" contrast("+s+")")}if(this.isDirty("sepia")){const s=this.get("sepia",0);0!=s&&(i+=" sepia("+s+")")}if(this.isDirty("hue")){const s=this.get("hue",0);0!=s&&(i+=" hue-rotate("+s+"deg)")}if(this.isDirty("invert")){const s=this.get("invert",0);0!=s&&(i+=" invert("+s+")")}if(i&&(e.filter=i),this.isDirty("cursorOverStyle")&&(e.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new st([t.on("focus",()=>{this.showTooltip()}),t.on("blur",()=>{this.hideTooltip()})]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),this.isPrivateDirty("focusable")&&this.markDirtyAccessibility(),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(e.exportable=this.get("exportable")),this.isDirty("interactive")){const s=this.events;this.get("interactive")?this._hoverDp=new st([s.on("click",a=>{Ss(a.originalEvent)&&(this.getPrivate("touchHovering")||this.setTimeout(()=>{this._handleOver(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.showTooltip(),this.setPrivateRaw("touchHovering",!0),this.events.dispatch("pointerover",{type:"pointerover",target:a.target,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated})},10))}),s.on("globalpointerup",a=>{Ss(a.originalEvent)&&this.getPrivate("touchHovering")&&(this._handleOut(),(this.get("tooltipText")||this.get("tooltipHTML"))&&this.hideTooltip(),this.setPrivateRaw("touchHovering",!1),this.events.dispatch("pointerout",{type:"pointerout",target:a.target,originalEvent:a.originalEvent,point:a.point,simulated:a.simulated})),this._isDown&&this._handleUp(a)}),s.on("pointerover",()=>{this._handleOver()}),s.on("pointerout",()=>{this._handleOut()}),s.on("pointerdown",a=>{this._handleDown(a)})]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",null)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}dragStart(e){this._dragEvent=e,this.events.stopParentDispatch()}dragStop(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;const t="dragstop";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}_handleOver(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleOut(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}_handleUp(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;const t=lt(e.originalEvent);delete this._downPoints[t],0==M(this._downPoints).length&&(this._isDown=!1)}}_hasMoved(e){const t=lt(e.originalEvent),i=this._downPoints[t];if(i){const s=Math.abs(i.x-e.point.x),a=Math.abs(i.y-e.point.y);return s>5||a>5}return!1}_hasDown(){return M(this._downPoints).length>0}_handleDown(e){const t=this.parent;if(t&&!this.get("draggable")&&t._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;const i=lt(e.originalEvent);this._downPoints[i]={x:e.point.x,y:e.point.y}}}dragMove(e){let t=this._dragEvent;if(t){if(t.simulated&&!e.simulated)return!0;let i=0,s=this.parent,a=1;for(;null!=s;)i+=s.get("rotation",0),s=s.parent,s&&(a*=s.get("scale",1));let o=(e.point.x-t.point.x)/a,c=(e.point.y-t.point.y)/a;const d=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const f="dragstart";d.isEnabled(f)&&d.dispatch(f,{type:f,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){let f=this._dragPoint;this.set("x",f.x+o*Ht(i)+c*Vn(i)),this.set("y",f.y+c*Ht(i)-o*Vn(i));const b="dragged";d.isEnabled(b)&&d.dispatch(b,{type:b,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(o,c)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};const f="dragstart";d.isEnabled(f)&&d.dispatch(f,{type:f,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}_updateSize(){}_getBounds(){this._localBounds=this._display.getLocalBounds()}depth(){let e=this.parent,t=0;for(;;){if(!e)return t;++t,e=e.parent}}markDirtySize(){this._sizeDirty=!0,this.markDirty()}markDirtyBounds(){const e=this._display;if(this.get("isMeasured")){this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();const t=this.parent;t&&"absolute"!=this.get("position")&&(null==t.get("width")||null==t.get("height")||t.get("layout"))&&t.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}markDirtyAccessibility(){this._root._invalidateAccessibility(this)}markDirtyLayer(){this._display.markDirtyLayer(!0)}markDirty(){super.markDirty(),this.markDirtyLayer()}_updateBounds(){const e=this._adjustedLocalBounds;let t;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),t=this._adjustedLocalBounds):(t={left:0,right:0,top:0,bottom:0},this._localBounds=t,this._adjustedLocalBounds=t),!e||e.left!==t.left||e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom){const i="boundschanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}_fixMinBounds(e){let t=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));R(t)&&e.right-e.left<t&&(e.right=e.left+t),R(i)&&e.bottom-e.top<i&&(e.bottom=e.top+i);let s=this.getPrivate("width"),a=this.getPrivate("height");R(s)&&(s>0?e.right=e.left+s:e.left=e.right+s),R(a)&&(a>0?e.bottom=e.top+a:e.top=e.bottom+a)}_removeParent(e){e&&(e.children.removeValue(this),ot(e._percentageSizeChildren,this),ot(e._percentagePositionChildren,this))}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._statesHandled=!1}hover(){this.showTooltip(),this._handleOver()}unhover(){this.hideTooltip(),this._handleOut()}showTooltip(e){const t=this.getTooltip(),i=this.get("tooltipText"),s=this.get("tooltipHTML");if((i||s)&&t){const a=this.get("tooltipPosition"),o=this.getPrivate("tooltipTarget",this);("fixed"==a||!e)&&(this._display._setMatrix(),e=this.toGlobal(o._getTooltipPoint())),t.set("pointTo",e),t.set("tooltipTarget",o),t.get("x")||t.set("x",e.x),t.get("y")||t.set("y",e.y),i&&t.label.set("text",i),s&&t.label.set("html",s);const c=this.dataItem;if(c&&t.label._setDataItem(c),"always"==this.get("showTooltipOn")&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();t.label.text.markDirtyText();const d=t.show();return this.setPrivateRaw("showingTooltip",!0),d}}hideTooltip(){const e=this.getTooltip();if(e&&(e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)||this.get("tooltip")==e)){let t=e.get("keepTargetHover")&&0==e.get("stateAnimationDuration",0)?400:void 0;const i=e.hide(t);return this.setPrivateRaw("showingTooltip",!1),i}}_getTooltipPoint(){const e=this._localBounds;if(e){let t=0,i=0;return this.get("isMeasured")?(t=e.left+qe(this.get("tooltipX",0),e.right-e.left),i=e.top+qe(this.get("tooltipY",0),e.bottom-e.top)):(t=qe(this.get("tooltipX",0),this.width()),i=qe(this.get("tooltipY",0),this.height())),{x:t,y:i}}return{x:0,y:0}}getTooltip(){let e=this.get("tooltip");if(e)return e;{let t=this.parent;if(t)return t.getTooltip()}}_updatePosition(){const e=this.parent;let t=this.get("dx",0),i=this.get("dy",0),s=this.get("x"),a=this.getPrivate("x"),o=0,c=0;const d=this.get("position");s instanceof le&&(s=e?e.innerWidth()*s.value+e.get("paddingLeft",0):0),R(s)?o=s+t:null!=a?o=a:e&&"relative"==d&&(o=e.get("paddingLeft",0)+t);let f=this.get("y"),b=this.getPrivate("y");f instanceof le&&(f=e?e.innerHeight()*f.value+e.get("paddingTop",0):0),R(f)?c=f+i:null!=b?c=b:e&&"relative"==d&&(c=e.get("paddingTop",0)+i);const m=this._display;if(m.x!=o||m.y!=c){m.invalidateBounds(),m.x=o,m.y=c;const _="positionchanged";this.events.isEnabled(_)&&this.events.dispatch(_,{type:_,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}x(){let e=this.get("x"),t=this.getPrivate("x");const i=this.parent;return i?e instanceof le?qe(e,i.innerWidth())+i.get("paddingLeft",0):R(e)?e:t??i.get("paddingLeft",this._display.x):this._display.x}y(){let e=this.getPrivate("y");if(null!=e)return e;let t=this.get("y");const i=this.parent;return i?t instanceof le?qe(t,i.innerHeight())+i.get("paddingTop",0):R(t)?t:e??i.get("paddingTop",this._display.y):this._display.y}_dispose(){super._dispose(),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);const e=this.get("tooltip");e&&e.dispose(),this.markDirty()}adjustedLocalBounds(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}localBounds(){return this._localBounds}bounds(){const e=this._adjustedLocalBounds,t=this.x(),i=this.y();return{left:e.left+t,right:e.right+t,top:e.top+i,bottom:e.bottom+i}}globalBounds(){const e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),i=this.toGlobal({x:e.right,y:e.top}),s=this.toGlobal({x:e.right,y:e.bottom}),a=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,i.x,s.x,a.x),top:Math.min(t.y,i.y,s.y,a.y),right:Math.max(t.x,i.x,s.x,a.x),bottom:Math.max(t.y,i.y,s.y,a.y)}}_onShow(e){}_onHide(e){}appear(e,t){return(0,Qe.mG)(this,void 0,void 0,function*(){return yield this.hide(0),t?new Promise((i,s)=>{this.setTimeout(()=>{i(this.show(e))},t)}):this.show(e)})}show(e){return(0,Qe.mG)(this,void 0,void 0,function*(){if(!this._isShowing){this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e);const t=this.states.applyAnimate("default",e);yield Bs(t),this._isShowing=!1}})}hide(e){return(0,Qe.mG)(this,void 0,void 0,function*(){if(!this._isHiding&&!this._isHidden){this._isHiding=!0,this._isShowing=!1;let t=this.states.lookup("hidden");t||(t=this.states.create("hidden",{opacity:0,visible:!1})),this._isHidden=!0,this._onHide(e);const i=this.states.applyAnimate("hidden",e);yield Bs(i),this._isHiding=!1}})}isHidden(){return this._isHidden}isShowing(){return this._isShowing}isHiding(){return this._isHiding}isHover(){return this._display.hovering()}isFocus(){return this._root.focused(this)}isDragging(){return this._isDragging}isVisible(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}isVisibleDeep(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}compositeOpacity(){const e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}width(){let e=this.get("width"),t=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),s=this.getPrivate("width"),a=0;if(R(s))a=s;else if(null==e)this._adjustedLocalBounds&&(a=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof le){const o=this.parent;a=o?o.innerWidth()*e.value:this._root.width()*e.value}else R(e)&&(a=e);return R(i)&&(a=Math.max(i,a)),R(t)&&(a=Math.min(t,a)),a}maxWidth(){let e=this.get("maxWidth",this.getPrivate("maxWidth"));if(R(e))return e;{let i=this.get("width");if(R(i))return i}const t=this.parent;return t?t.innerWidth():this._root.width()}maxHeight(){let e=this.get("maxHeight",this.getPrivate("maxHeight"));if(R(e))return e;{let i=this.get("height");if(R(i))return i}const t=this.parent;return t?t.innerHeight():this._root.height()}height(){let e=this.get("height"),t=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),s=this.getPrivate("height"),a=0;if(R(s))a=s;else if(null==e)this._adjustedLocalBounds&&(a=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof le){const o=this.parent;a=o?o.innerHeight()*e.value:this._root.height()*e.value}else R(e)&&(a=e);return R(i)&&(a=Math.max(i,a)),R(t)&&(a=Math.min(t,a)),a}_findStaticTemplate(e){return this._templateField&&e(this._templateField)?this._templateField:super._findStaticTemplate(e)}_walkParents(e){this._parent&&this._walkParent(e)}_walkParent(e){this._parent&&this._parent._walkParent(e),e(this)}get parent(){return this._parent}_setParent(e,t=!1){const i=this._parent;e!==i&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(i),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}getNumberFormatter(){return this.get("numberFormatter",this._root.numberFormatter)}getDateFormatter(){return this.get("dateFormatter",this._root.dateFormatter)}getDurationFormatter(){return this.get("durationFormatter",this._root.durationFormatter)}toGlobal(e){return this._display.toGlobal(e)}toLocal(e){return this._display.toLocal(e)}_getDownPoint(){const e=this._getDownPointId();if(e)return this._downPoints[e]}_getDownPointId(){if(this._downPoints)return function U(l,e){return M(l).sort(e)}(this._downPoints,(e,t)=>e>t?1:e<t?-1:0)[0]}toFront(){const e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}toBack(){const e=this.parent;e&&e.children.moveValue(this,0)}}Object.defineProperty(Le,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(Le,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Be.classNames.concat([Le.className])});class Qr extends Be{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNewApplyThemes()}get pattern(){return this._pattern}_draw(){}_beforeChanged(){super._beforeChanged(),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fillOpacity"))&&(this._clear=!0),this._checkDirtyFill()}_checkDirtyFill(){(this.isDirty("color")||this.isDirty("fill"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("repetition",""),t=this.get("width",100),i=this.get("height",100),s=this.get("fill"),a=this.get("fillOpacity",1),o=this._backgroundDisplay,c=this._display;c.clear(),o.clear(),s&&a>0&&(o.beginFill(s,a),o.drawRect(0,0,t,i),o.endFill()),c.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(c,o,e,t,i)}this._clear=!1}}Object.defineProperty(Qr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(Qr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Be.classNames.concat([Qr.className])});class es extends Qr{constructor(){super(...arguments),Object.defineProperty(this,"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_beforeChanged(){super._beforeChanged(),this._clear=!0,this.isDirty("src")&&this._load();const e=this.get("canvas");e&&(this.set("width",e.width),this.set("height",e.height))}_draw(){super._draw();const e=this._image;if(e){const i=this.get("width",100),s=this.get("height",100),a=this.get("fit","image");let o=0,c=0;"pattern"==a?(o=i,c=s):(o=e.width,c=e.height,"image"==a&&(this.set("width",o),this.set("height",c)));let f=0,b=0;this.get("centered",!0)&&(f=i/2-o/2,b=s/2-c/2),this._display.image(e,o,c,f,b)}const t=this.get("canvas");t&&this._display.image(t,t.width,t.height,0,0)}_load(){const e=this.get("src");if(e){const t=new Image;t.src=e,t.decode().then(()=>{this._image=t,this._draw(),this.events.isEnabled("loaded")&&this.events.dispatch("loaded",{type:"loaded",target:this})}).catch(i=>{})}}}Object.defineProperty(es,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(es,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Qr.classNames.concat([es.className])});var Jn=function(l){return l.ADD="lighter",l.COLOR="color",l.COLOR_BURN="color-burn",l.COLOR_DODGE="color-dodge",l.DARKEN="darken",l.DIFFERENCE="difference",l.DST_OVER="destination-over",l.EXCLUSION="exclusion",l.HARD_LIGHT="hard-light",l.HUE="hue",l.LIGHTEN="lighten",l.LUMINOSITY="luminosity",l.MULTIPLY="multiply",l.NORMAL="source-over",l.OVERLAY="overlay",l.SATURATION="saturation",l.SCREEN="screen",l.SOFT_LIGHT="soft-light",l.SRC_ATOP="source-atop",l.XOR="xor",l}(Jn||{});const Ka=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset","shadowBlur","shadowColor","shadowOpacity","shadowOffsetX","shadowOffsetY","blur","sepia","invert","brightness","hue","contrast","saturate"];class ze extends Le{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeGraphics()}),Object.defineProperty(this,"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){const e=this.get("fillGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",()=>{this._markDirtyKey("fill")})),this._disposers.push(t.events.on("positionchanged",()=>{this._markDirtyKey("fill")})))}}if(this.isDirty("strokeGradient")){const e=this.get("strokeGradient");if(e){this._display.isMeasured=!0;const t=e.get("target");t&&(this._disposers.push(t.events.on("boundschanged",()=>{this._markDirtyKey("stroke")})),this._disposers.push(t.events.on("positionchanged",()=>{this._markDirtyKey("stroke")})))}}}_changed(){if(super._changed(),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();let e=this.get("strokeDasharray");R(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);const t=this.get("strokeDashoffset");t&&this._display.setLineDashOffset(t);const i=this.get("blendMode",Jn.NORMAL);this._display.blendMode=i;const s=this.get("draw");s&&s(this._display,this);const a=this.get("svgPath");null!=a&&this._display.svgPath(a)}}_afterChanged(){if(super._afterChanged(),this._clear){const e=this.get("fill"),t=this.get("fillGradient"),i=this.get("fillPattern"),s=this.get("fillOpacity"),a=this.get("stroke"),o=this.get("strokeGradient"),c=this.get("strokePattern"),d=this.get("shadowColor"),f=this.get("shadowBlur"),b=this.get("shadowOffsetX"),m=this.get("shadowOffsetY"),_=this.get("shadowOpacity");if(d&&(f||b||m)&&this._display.shadow(d,f,b,m,_),e&&!t&&(this._display.beginFill(e,s),this._display.endFill()),t){if(e){const T=t.get("stops",[]);T.length&&I(T,v=>{(!v.color||v.colorInherited)&&e&&(v.color=e,v.colorInherited=!0),(null==v.opacity||v.opacityInherited)&&(v.opacity=s,v.opacityInherited=!0)})}const g=t.getFill(this);g&&(this._display.beginFill(g,s),this._display.endFill())}if(i){const g=i.pattern;g&&(this._display.beginFill(g,s),this._display.endFill(),i instanceof es&&i.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}if(a||o||c){const g=this.get("strokeOpacity");let T=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(T/=this.get("scale",1)),this.get("crisp")&&(T/=this._root._renderer.resolution);const v=this.get("lineJoin");if(a&&!o&&(this._display.lineStyle(T,a,g,v),this._display.endStroke()),o){const P=o.get("stops",[]);P.length&&I(P,E=>{(!E.color||E.colorInherited)&&a&&(E.color=a,E.colorInherited=!0),(null==E.opacity||E.opacityInherited)&&(E.opacity=g,E.opacityInherited=!0)});const C=o.getFill(this);C&&(this._display.lineStyle(T,C,g,v),this._display.endStroke())}if(c){let P=c.pattern;P&&(this._display.lineStyle(T,P,g,v),this._display.endStroke(),c instanceof es&&c.events.once("loaded",()=>{this._clear=!0,this.markDirty()}))}}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}Object.defineProperty(ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([ze.className])});class yt extends ze{_afterNew(){super._afterNew(),this._display.isMeasured=!0,this.setPrivateRaw("trustBounds",!0)}_beforeChanged(){super._beforeChanged(),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){super._changed(),this._clear&&!this.get("draw")&&this._draw()}_draw(){this._display.drawRect(0,0,this.width(),this.height())}_updateSize(){this.markDirty(),this._clear=!0}}function si(l,e){l.get("reverseChildren",!1)?l.children.eachReverse(e):l.children.each(e)}Object.defineProperty(yt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(yt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ze.classNames.concat([yt.className])});class Pi extends Be{}Object.defineProperty(Pi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(Pi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Be.classNames.concat([Pi.className])});class Pr extends Pi{updateContainer(e){let t=e.get("paddingLeft",0),i=e.innerWidth(),s=0;si(e,o=>{if(o.isVisible()&&"relative"==o.get("position")){let c=o.get("width");if(c instanceof le){s+=c.value;let d=i*c.value,f=o.get("minWidth",o.getPrivate("minWidth",-1/0));f>d&&(i-=f,s-=c.value);let b=o.get("maxWidth",o.getPrivate("maxWidth",1/0));d>b&&(i-=b,s-=c.value)}else R(c)||(c=o.width()),i-=c+o.get("marginLeft",0)+o.get("marginRight",0)}}),(i<=0||i==1/0)&&(i=.1),si(e,o=>{if(o.isVisible()&&"relative"==o.get("position")){let c=o.get("width");if(c instanceof le){let d=i*c.value/s-o.get("marginLeft",0)-o.get("marginRight",0),f=o.get("minWidth",o.getPrivate("minWidth",-1/0)),b=o.get("maxWidth",o.getPrivate("maxWidth",1/0));d=Math.min(Math.max(f,d),b),o.setPrivate("width",d)}else o._prevSettings.width instanceof le&&o.setPrivate("width",void 0)}});let a=t;si(e,o=>{if("relative"==o.get("position"))if(o.isVisible()){let c=o.adjustedLocalBounds(),d=o.get("marginLeft",0),f=o.get("marginRight",0),b=o.get("maxWidth"),m=c.left,_=c.right;b&&_-m>b&&(_=m+b);let g=a+d-m;o.setPrivate("x",g),a=g+_+f}else o.setPrivate("x",void 0)})}}Object.defineProperty(Pr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(Pr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pi.classNames.concat([Pr.className])});class ji extends Pi{updateContainer(e){let t=e.get("paddingTop",0),i=e.innerHeight(),s=0;si(e,o=>{if(o.isVisible()&&"relative"==o.get("position")){let c=o.get("height");if(c instanceof le){s+=c.value;let d=i*c.value,f=o.get("minHeight",o.getPrivate("minHeight",-1/0));f>d&&(i-=f,s-=c.value);let b=o.get("maxHeight",o.getPrivate("maxHeight",1/0));d>b&&(i-=b,s-=c.value)}else R(c)||(c=o.height()),i-=c+o.get("marginTop",0)+o.get("marginBottom",0)}}),(i<=0||i==1/0)&&(i=.1),si(e,o=>{if(o.isVisible()&&"relative"==o.get("position")){let c=o.get("height");if(c instanceof le){let d=i*c.value/s-o.get("marginTop",0)-o.get("marginBottom",0),f=o.get("minHeight",o.getPrivate("minHeight",-1/0)),b=o.get("maxHeight",o.getPrivate("maxHeight",1/0));d=Math.min(Math.max(f,d),b),o.setPrivate("height",d)}else o._prevSettings.height instanceof le&&o.setPrivate("height",void 0)}});let a=t;si(e,o=>{if("relative"==o.get("position"))if(o.isVisible()){let c=o.adjustedLocalBounds(),d=o.get("marginTop",0),f=c.top,b=c.bottom,m=o.get("maxHeight");m&&b-f>m&&(b=f+m);let _=o.get("marginBottom",0),g=a+d-f;o.setPrivate("y",g),a=g+b+_}else o.setPrivate("y",void 0)})}}Object.defineProperty(ji,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(ji,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pi.classNames.concat([ji.className])});class Xt extends Pi{_afterNew(){this._setRawDefault("maxColumns",Number.MAX_VALUE),super._afterNew()}updateContainer(e){let t=e.get("paddingLeft",0),i=e.get("paddingRight",0),s=e.get("paddingTop",0),a=e.maxWidth()-t-i,o=a,c=1;si(e,T=>{if(T.get("visible")&&T.getPrivate("visible")&&!T.get("forceHidden")&&"absolute"!=T.get("position")){let v=T.width();v<o&&(o=v),v>c&&(c=v)}}),o=je(o,1,a),c=je(c,1,a);let d=1;d=this.get("fixedWidthGrid")?a/c:a/o,d=Math.max(1,Math.floor(d)),d=Math.min(this.get("maxColumns",Number.MAX_VALUE),d);let f=this.getColumnWidths(e,d,c,a),b=s,m=0,_=0;d=f.length;let g=t;si(e,T=>{if("relative"==T.get("position")&&T.isVisible()){const v=T.get("marginTop",0),P=T.get("marginBottom",0);let C=T.adjustedLocalBounds(),E=T.get("marginLeft",0),k=T.get("marginRight",0),B=b+v-C.top;T.setPrivate("x",g+E-C.left),T.setPrivate("y",B),g+=f[m]+k,_=Math.max(_,T.height()+v+P),m++,m>=d&&(m=0,g=t,b+=_)}})}getColumnWidths(e,t,i,s){let a=0,o=[],c=0;return si(e,d=>{let f=d.adjustedLocalBounds();"absolute"!=d.get("position")&&d.isVisible()&&(o[c]=this.get("fixedWidthGrid")?i:Math.max(0|o[c],f.right-f.left+d.get("marginLeft",0)+d.get("marginRight",0)),c<e.children.length-1&&(c++,c==t&&(c=0)))}),I(o,d=>{a+=d}),a>s?t>2?this.getColumnWidths(e,t-=1,i,s):[s]:o}}Object.defineProperty(Xt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(Xt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pi.classNames.concat([Xt.className])});class gt{static escape(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}static unescape(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}static cleanUp(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}static chunk(e,t=!1,i=!1){let s=[];e=this.escape(e);let a=t?e.split("'"):[e];for(let o=0;o<a.length;o++){let c=a[o];if(""!==c)if(o%2==0){c=c.replace(/\]\[/g,"]"+ei+"["),c=c.replace(/\[\]/g,"[ ]");let d=c.split(/[\[\]]+/);for(let f=0;f<d.length;f++){let b=this.cleanUp(this.unescape(d[f]));b!==ei&&""!==b&&s.push(f%2==0?{type:"value",text:b}:{type:i?"value":"format",text:"["+b+"]"})}}else{let d=c.split(/[\[\]]+/);for(let f=0;f<d.length;f++){let b=this.cleanUp(this.unescape(d[f]));""!==b&&(f%2==0?s.push({type:"text",text:b}):this.isImage(b)?s.push({type:"image",text:"["+b+"]"}):s.push({type:"format",text:"["+b+"]"}))}}}return s}static isImage(e){return!!e.match(/img[ ]?:/)}static getTextStyle(e){let t={};if(""==e||"[ ]"==e)return{};const i=e.match(/('[^']*')|("[^"]*")/gi);if(i)for(let a=0;a<i.length;a++)e=e.replace(i[a],i[a].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));let s=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!s)return{};for(let a=0;a<s.length;a++)if(s[a].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=s[a];else if(s[a].match(/^(underline|line-through)$/i))t.textDecoration=s[a];else if("/"!=s[a])if(s[a].match(/:/)){const o=s[a].replace("+"," ").split(/:[ ]*/);t[o[0]]=o[1]}else t.fill=J.fromString(s[a]);return t}}function ts(l,e){if(null!=e){let i,t=(e=gt.escape(e=""+e)).match(/\{([^}]+)\}/g);if(t)for(i=0;i<t.length;i++){let a=Ks(l,t[i].replace(/\{([^}]+)\}/,"$1"),"");null==a&&(a=""),e=e.split(t[i]).join(a)}e=gt.unescape(e)}else e="";return e}function Ks(l,e,t){let i;const s=l.dataItem;let c,a=[],o=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;for(;c=o.exec(e),null!==c;)if(c[3]){a.push({prop:c[3]});const d=l.getDateFormatter().get("dateFields",[]),f=l.getNumberFormatter().get("numericFields",[]),b=l.getDurationFormatter().get("durationFields",[]);-1!==d.indexOf(c[3])?a.push({method:"formatDate",params:[]}):-1!==f.indexOf(c[3])?a.push({method:"formatNumber",params:[]}):-1!==b.indexOf(c[3])&&a.push({method:"formatDuration",params:[]})}else{let d=[];if(""!=Ii(c[2])){let b,f=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;for(;b=f.exec(c[2]),null!==b;)d.push(b[1]||b[2]||b[3])}a.push({method:c[1],params:d})}if(s){i=ht(l,a,s._settings),(null==i||Ds(i))&&(i=ht(l,a,s));let d=s.dataContext;null==i&&d&&(i=ht(l,a,d),null==i&&(i=ht(l,[{prop:e}],d)),null==i&&d.dataContext&&(i=ht(l,a,d.dataContext))),null==i&&s.component&&s.component.dataItem!==s&&(i=Ks(s.component,e,t))}return null==i&&(i=ht(l,a,l)),null==i&&l.parent&&(i=Ks(l.parent,e,t)),i}function Vl(l,e){const t=l.getPrivate("customData");if(Ds(t))return t[e]}function ht(l,e,t,i){let s=t,a=!1;for(let o=0,c=e.length;o<c;o++){let d=e[o];if(d.prop){if(s instanceof Le){let f=s.get(d.prop);null==f&&(f=s.getPrivate(d.prop)),null==f&&(f=Vl(s,d.prop)),null==f&&(f=s[d.prop]),s=f}else if(s.get){let f=s.get(d.prop);null==f&&(f=s[d.prop]),s=f}else s=s[d.prop];if(null==s)return}else switch(d.method){case"formatNumber":let f=dt(s);null!=f&&(s=l.getNumberFormatter().format(f,i||d.params[0]||void 0),a=!0);break;case"formatDate":let b=Ps(s);if(!Ts(b)||_i(b.getTime()))return;null!=b&&(s=l.getDateFormatter().format(b,i||d.params[0]||void 0),a=!0);break;case"formatDuration":let m=dt(s);null!=m&&(s=l.getDurationFormatter().format(m,i||d.params[0]||void 0,d.params[1]||void 0),a=!0);break;case"urlEncode":case"encodeURIComponent":s=encodeURIComponent(s);break;default:s[d.method]&&s[d.method].apply(t,d.params)}}if(!a){let o=[{method:"",params:i}];if(null==i)R(s)?(o[0].method="formatNumber",o[0].params=""):Ts(s)&&(o[0].method="formatDate",o[0].params="");else{let c=function Ua(l){if(typeof l>"u")return"string";let e=(l=(l=(l=l.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return e?e[1]:"number"===l?"number":"date"===l?"date":"duration"===l?"duration":l.match(/[#0]/)?"number":l.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(i);"number"===c?o[0].method="formatNumber":"date"===c?o[0].method="formatDate":"duration"===c&&(o[0].method="formatDuration")}o[0].method&&(s=ht(l,o,s))}return s}Object.defineProperty(gt,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});class ie extends Le{constructor(){super(...arguments),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeContainer()}),Object.defineProperty(this,"children",{enumerable:!0,configurable:!0,writable:!0,value:new Ns(this)}),Object.defineProperty(this,"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this._display.addChild(this._childrenDisplay)}_dispose(){pr(this.allChildren(),e=>{e.dispose()}),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),super._dispose()}_changed(){if(super._changed(),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each(e=>{e.removePrivate("x"),e.removePrivate("y")})),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each(e=>{e.markDirtyPosition()}),this.isDirty("maskContent")){const e=this._childrenDisplay;let t=this._contentMask;this.get("maskContent")?t||(t=yt.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=t,e.addChildAt(t._display,0),e.mask=t._display):t&&(e.removeChild(t._display),e.mask=null,t.dispose(),this._contentMask=void 0)}}_updateSize(){super._updateSize(),I(this._percentageSizeChildren,e=>{e._updateSize()}),I(this._percentagePositionChildren,e=>{e.markDirtyPosition(),e._updateSize()}),this.updateBackground()}updateBackground(){const e=this.get("background");let t=this._localBounds;if(t&&!this.isHidden()){let i=t.left,s=t.top,a=t.right-i,o=t.bottom-s,c=this.get("maxWidth"),d=this.get("maxHeight");d&&o>d&&(o=d),c&&a>c&&(a=c);let f=this.width(),b=this.height();e&&(e.setAll({width:a,height:o,x:i,y:s}),this._display.interactive&&(e._display.interactive=!0));const m=this._contentMask;m&&m.setAll({width:f+1,height:b+1});const _=this.get("verticalScrollbar");if(_){_.set("height",b),_.set("x",f-_.width()-_.get("marginRight",0)),_.set("end",_.get("start",0)+b/this._contentHeight);const g=_.get("background");g&&g.setAll({width:_.width(),height:b});let T=!0;this._contentHeight<=b&&(T=!1),_.setPrivate("visible",T)}}}_applyThemes(e=!1){return!!super._applyThemes(e)&&(this.eachChildren(t=>{t._applyThemes(e)}),!0)}_applyState(e){super._applyState(e),this.get("setStateOnChildren")&&this.eachChildren(t=>{t.states.apply(e)})}_applyStateAnimated(e,t){super._applyStateAnimated(e,t),this.get("setStateOnChildren")&&this.eachChildren(i=>{i.states.applyAnimate(e,t)})}innerWidth(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}innerHeight(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}_getBounds(){let e=this.get("width"),t=this.get("height"),i=this.getPrivate("width"),s=this.getPrivate("height"),a={left:0,top:0,right:this.width(),bottom:this.height()},o=this.get("layout"),c=!1,d=!1;if((o instanceof Pr||o instanceof Xt)&&(c=!0),o instanceof ji&&(d=!0),null==e&&null==i||null==t&&null==s||this.get("verticalScrollbar")){let f=Number.MAX_VALUE,b=f,m=-f,_=f,g=-f;const T=this.get("paddingLeft",0),v=this.get("paddingTop",0),P=this.get("paddingRight",0),C=this.get("paddingBottom",0);this.children.each(S=>{if("absolute"!=S.get("position")&&S.get("isMeasured")){let B=S.adjustedLocalBounds(),z=S.x(),G=S.y(),Z=z+B.left,V=z+B.right,$=G+B.top,ee=G+B.bottom;c&&(Z-=S.get("marginLeft",0),V+=S.get("marginRight",0)),d&&($-=S.get("marginTop",0),ee+=S.get("marginBottom",0)),Z<b&&(b=Z),V>m&&(m=V),$<_&&(_=$),ee>g&&(g=ee)}}),b==f&&(b=0),m==-f&&(m=0),_==f&&(_=0),g==-f&&(g=0),a.left=b-T,a.top=_-v,a.right=m+P,a.bottom=g+C;const E=this.get("minWidth");R(E)&&E>0&&a.right-a.left<E&&(a.right>=E?a.left=a.right-E:a.right=a.left+E);const k=this.get("minHeight");R(k)&&k>0&&a.bottom-a.top<k&&(a.bottom>=k?a.top=a.bottom-k:a.bottom=a.top+k)}this._contentWidth=a.right-a.left,this._contentHeight=a.bottom-a.top,R(e)&&(a.left=0,a.right=e),R(i)&&(a.left=0,a.right=i),R(t)&&(a.top=0,a.bottom=t),R(s)&&(a.top=0,a.bottom=s),this._localBounds=a}_updateBounds(){const e=this.get("layout");e&&e.updateContainer(this),super._updateBounds(),this.updateBackground()}markDirty(){super.markDirty(),this._root._addDirtyParent(this)}_prepareChildren(){const e=this.innerWidth(),t=this.innerHeight();if(e!=this._prevWidth||t!=this._prevHeight){let i=this.get("layout"),s=!1,a=!1;i&&((i instanceof Pr||i instanceof Xt)&&(s=!0),i instanceof ji&&(a=!0)),I(this._percentageSizeChildren,o=>{if(!s){let c=o.get("width");c instanceof le&&o.setPrivate("width",c.value*e)}if(!a){let c=o.get("height");c instanceof le&&o.setPrivate("height",c.value*t)}}),I(this._percentagePositionChildren,o=>{o.markDirtyPosition(),o.markDirtyBounds()}),this._prevWidth=e,this._prevHeight=t,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}_updateChildren(){if(this.isDirty("html")){const e=this.get("html");e&&""!==e?this._root._setHTMLContent(this,ts(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){const e=this.get("verticalScrollbar");if(e){e._setParent(this),e.startGrip.setPrivate("visible",!1),e.endGrip.setPrivate("visible",!1),this.set("maskContent",!0),this.set("paddingRight",e.width()+e.get("marginRight",0)+e.get("marginLeft",0));let t=this.get("background");t||(t=this.set("background",yt.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",i=>{const s=i.originalEvent;if(!bi(s,this))return;s.preventDefault();let a=s.deltaY/5e3;const o=e.get("start",0),c=e.get("end",1);o+a<=0&&(a=-o),c+a>=1&&(a=1-c),o+a>=0&&c+a<=1&&(e.set("start",o+a),e.set("end",c+a))}),this._disposers.push(this._vsbd0),this._vsbd1=e.events.on("rangechanged",()=>{let i=this._contentHeight;const s=this._childrenDisplay,a=this._contentMask;s.y=-e.get("start",0)*i,s.markDirtyLayer(),a&&(a._display.y=-s.y,s.mask=a._display)}),this._disposers.push(this._vsbd1),this._display.addChild(e._display)}else{const t=this._prevSettings.verticalScrollbar;t&&(this._display.removeChild(t._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){const e=this._prevSettings.background;e&&this._display.removeChild(e._display);const t=this.get("background");t instanceof Le&&(t.set("isMeasured",!1),t._setParent(this),this._display.addChildAt(t._display,0))}if(this.isDirty("mask")){const e=this.get("mask"),t=this._prevSettings.mask;if(t&&(this._display.removeChild(t._display),t!=e&&t.dispose()),e){const i=e.parent;i&&i.children.removeValue(e),e._setParent(this),this._display.addChildAt(e._display,0),this._childrenDisplay.mask=e._display}}}_processTemplateField(){super._processTemplateField(),this.children.each(e=>{e._processTemplateField()})}walkChildren(e){this.children.each(t=>{t instanceof ie&&t.walkChildren(e),e(t)})}eachChildren(e){const t=this.get("background");t&&e(t);const i=this.get("verticalScrollbar");i&&e(i);const s=this.get("mask");s&&e(s),this.children.values.forEach(a=>{e(a)})}allChildren(){const e=[];return this.eachChildren(t=>{e.push(t)}),e}_setDataItem(e){const t=e!==this._dataItem;super._setDataItem(e);const i=this.get("html","");i&&""!==i&&t&&this._root._setHTMLContent(this,ts(this,i))}}Object.defineProperty(ie,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(ie,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([ie.className])});class zt extends Le{constructor(){super(...arguments),Object.defineProperty(this,"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeTextStyle()}),Object.defineProperty(this,"_display",{enumerable:!0,configurable:!0,writable:!0,value:this._root._renderer.makeText("",this.textStyle)}),Object.defineProperty(this,"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","maxChars"]}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_updateBounds(){this.get("text")?super._updateBounds():this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}_changed(){super._changed(),this._display.clear();let e=this.textStyle;if(this.isDirty("opacity")){let t=this.get("opacity",1);this._display.alpha=t}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new Oe(()=>{this._root._removeTooltipElement(this)})),this.isDirty("width")&&(e.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(e.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(e.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(e.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(e.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(e.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){let t=this.get("fill");t&&(e.fill=t)}if(this.isDirty("fillOpacity")){let t=this.get("fillOpacity",1);t&&(e.fillOpacity=t)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(e.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(e.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),I(this._textStyles,t=>{this._dirty[t]&&(e[t]=this.get(t),this.markDirtyBounds())}),e.fontSize=this.get("fontSize"),e.fontFamily=this.get("fontFamily"),this._display.style=e,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}_getText(){let e=this.get("text","");return this.get("maxChars")&&(e=function Ol(l,e,t=!1,i="..."){if(l.length>e){let s=e-1;for(;s>=0&&l.charAt(s).match(/\w/);)s--;return s>=0&&0==t?l.substring(0,s+1)+"...":l.substring(0,e)+i}return l}(e,this.get("maxChars",1e8),this.get("breakWords"),this.get("ellipsis"))),this.get("populateText")?ts(this,e):e}markDirtyText(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}_setDataItem(e){super._setDataItem(e),this.get("populateText")&&this.markDirtyText()}getNumberFormatter(){return this.parent?this.parent.getNumberFormatter():super.getNumberFormatter()}getDateFormatter(){return this.parent?this.parent.getDateFormatter():super.getDateFormatter()}getDurationFormatter(){return this.parent?this.parent.getDurationFormatter():super.getDurationFormatter()}}Object.defineProperty(zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Le.classNames.concat([zt.className])});class Mt{constructor(){Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver(e=>{I(e,t=>{I(this._targets,i=>{i.target===t.target&&i.callback()})})})}addTarget(e,t){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:t})}removeTarget(e){this._observer.unobserve(e),Re(this._targets,t=>t.target!==e)}}class $s{constructor(){Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}addTarget(e,t){if(null===this._timer){let s=null;const a=()=>{const o=Date.now();(null===s||o>s+$s.delay)&&(s=o,I(this._targets,c=>{let d=c.target.getBoundingClientRect();(d.width!==c.size.width||d.height!==c.size.height)&&(c.size=d,c.callback())})),this._timer=0===this._targets.length?null:requestAnimationFrame(a)};this._timer=requestAnimationFrame(a)}this._targets.push({target:e,callback:t,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}removeTarget(e){Re(this._targets,t=>t.target!==e),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}Object.defineProperty($s,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});let is=null;class rs{constructor(e,t){Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=function $a(){return null===is&&(is=typeof ResizeObserver<"u"?new Mt:new $s),is}(),this._element=e,this._listener=Rn(t),this._sensor.addTarget(e,t)}isDisposed(){return this._disposed}dispose(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}get sensor(){return this._sensor}}class Wt extends Be{}Object.defineProperty(Wt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(Wt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Be.classNames.concat([Wt.className])});class Ti extends ie{constructor(){super(...arguments),Object.defineProperty(this,"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting","maxChars"]})}get text(){return this._text}_afterNew(){super._afterNew(),this._makeText(),I(this._textKeys,e=>{const t=this.get(e);null!=t&&this._text.set(e,t)}),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",()=>{this._setMaxDimentions()}),this.onPrivate("maxHeight",()=>{this._setMaxDimentions()})}_makeText(){this._text=this.children.push(zt.new(this._root,{}))}_updateChildren(){if(super._updateChildren(),I(this._textKeys,e=>{this._text.set(e,this.get(e))}),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),""!==this.get("html","")?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){const e=this.get("textAlign");let t;null!=this.get("width")?t="right"==e?W:"center"==e?ge:0:"left"==e||"start"==e?t=this.get("paddingLeft"):("right"==e||"end"==e)&&(t=-this.get("paddingRight")),this.text.set("x",t)}}_setMaxDimentions(){const e=this.get("rotation"),t=90==e||270==e||-90==e,i=this.get("maxWidth",this.getPrivate("maxWidth",1/0));R(i)?this.text.set(t?"maxHeight":"maxWidth",i-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(t?"maxHeight":"maxWidth",void 0);const s=this.get("maxHeight",this.getPrivate("maxHeight",1/0));R(s)?this.text.set(t?"maxWidth":"maxHeight",s-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(t?"maxWidth":"maxHeight",void 0)}_setDataItem(e){super._setDataItem(e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}getText(){return this._text._getText()}}Object.defineProperty(Ti,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(Ti,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([Ti.className])});class Tr extends ze{_beforeChanged(){super._beforeChanged(),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){this.markDirtyBounds();let e=this.width(),t=this.height();if(e>0&&t>0){let i=this.get("cornerRadius",8);i=je(i,0,Math.min(e/2,t/2));let s=this.get("pointerX",0),a=this.get("pointerY",0),o=this.get("pointerBaseWidth",15)/2,c=0,d=0,g=0,v=(s-c)*(t-d)-(a-d)*(e-c),P=(s-g)*(0-t)-(a-t)*(e-g);const C=this._display;if(C.moveTo(i,0),v>0&&P>0){let E=Math.round(je(s,i+o,e-o-i));a=je(a,-1/0,0),C.lineTo(E-o,0),C.lineTo(s,a),C.lineTo(E+o,0)}if(C.lineTo(e-i,0),C.arcTo(e,0,e,i,i),v>0&&P<0){let E=Math.round(je(a,i+o,t-o-i));s=je(s,e,1/0),C.lineTo(e,i),C.lineTo(e,Math.max(E-o,i)),C.lineTo(s,a),C.lineTo(e,E+o)}if(C.lineTo(e,t-i),C.arcTo(e,t,e-i,t,i),v<0&&P<0){let E=Math.round(je(s,i+o,e-o-i));a=je(a,t,1/0),C.lineTo(e-i,t),C.lineTo(E+o,t),C.lineTo(s,a),C.lineTo(E-o,t)}if(C.lineTo(i,t),C.arcTo(0,t,0,t-i,i),v<0&&P>0){let E=Math.round(je(a,i+o,t-i-o));s=je(s,-1/0,0),C.lineTo(0,t-i),C.lineTo(0,E+o),C.lineTo(s,a),C.lineTo(0,Math.max(E-o,i))}C.lineTo(0,i),C.arcTo(0,0,i,0,i),C.closePath()}}}}Object.defineProperty(Tr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(Tr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ze.classNames.concat([Tr.className])});class ni extends ie{constructor(e,t,i,s=[]){super(e,t,i,s),Object.defineProperty(this,"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["tooltip"]),super._afterNew(),this.set("background",Tr.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(Ti.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",()=>{this._updateBackground()})),this._disposers.push(this.on("bounds",()=>{this._updateBackground()})),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",e=>{e&&(Ae(e,"pointerover",t=>{this._htmlContentHovered=!0}),Ae(e,"pointerout",t=>{this._htmlContentHovered=!1}))})),this._root._tooltips.push(this)}get label(){return this._label}dispose(){super.dispose(),bt(this._root._tooltips,this)}_updateChildren(){super._updateChildren(),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}_changed(){if(super._changed(),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){const t=this.get("background");this._keepHoverDp=new st([t.events.on("pointerover",i=>{let s=this.get("tooltipTarget");s&&(s.parent&&s.parent.getPrivate("tooltipTarget")==s&&(s=s.parent),s.hover())}),t.events.on("pointerout",i=>{let s=this.get("tooltipTarget");s&&(s.parent&&s.parent.getPrivate("tooltipTarget")==s&&(s=s.parent),this._htmlContentHovered||s.unhover())})]),this.label.onPrivate("htmlElement",i=>{this._keepHoverDp&&i&&this._keepHoverDp.disposers.push(Ae(i,"pointerleave",s=>{const a=this.root._renderer.getEvent(s);t.events.dispatch("pointerout",{type:"pointerout",originalEvent:a.event,point:a.point,simulated:!1,target:t})}))})}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}_onShow(){super._onShow(),this.updateBackgroundColor()}updateBackgroundColor(){let e=this.get("tooltipTarget");const t=this.get("background");let i,s;e&&t&&(i=e.get("fill"),s=e.get("stroke"),null==i&&(i=s),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=i&&t.set("fill",i),this._fillDp=e.on("fill",a=>{null!=a&&(t.set("fill",a),this._updateTextColor(a))}),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=i&&t.set("stroke",i),this._strokeDp=e.on("fill",a=>{null!=a&&t.set("stroke",a)}),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=i&&this.label.set("fill",i),this._labelDp=e.on("fill",a=>{null!=a&&this.label.set("fill",a)}),this._disposers.push(this._labelDp))),this._updateTextColor(i)}_updateTextColor(e){this.get("autoTextColor")&&(null==e&&(e=this.get("background").get("fill")),null==e&&(e=this._root.interfaceColors.get("background")),e instanceof J&&this.label.set("fill",J.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}_setDataItem(e){super._setDataItem(e),this.label._setDataItem(e)}_updateBackground(){super.updateBackground();const e=this._root.container;if(e){let t=.5,i=.5,s=this.get("centerX");s instanceof le&&(t=s.value);let a=this.get("centerY");a instanceof le&&(i=a.value);let o=e.width(),c=e.height(),d=this.parent,f=0,b=0;if(d){f=d.x(),b=d.y();const ee=d.get("layerMargin");ee&&(f+=ee.left||0,b+=ee.top||0,o+=(ee.left||0)+(ee.right||0),c+=(ee.top||0)+(ee.bottom||0))}const m=this.get("bounds",{left:-f,top:-b,right:o-f,bottom:c-b});this._updateBounds();let _=this.width(),g=this.height();0===_&&(_=this._w),0===g&&(g=this._h);let T=this.get("pointTo",{x:o/2,y:c/2}),v=T.x,P=T.y,C=this.get("pointerOrientation"),E=this.get("background"),k=0,S=0,B=0;E instanceof Tr&&(k=E.get("pointerLength",0),S=E.get("strokeWidth",0)/2,B=S,E.set("width",_),E.set("height",g));let z=0,G=0,Z=m.right-m.left,V=m.bottom-m.top;"horizontal"==C||"left"==C||"right"==C?(S=0,"horizontal"==C?v>m.left+Z/2?(v-=_*(1-t)+k,B*=-1):v+=_*t+k:"left"==C?v+=_*(1-t)+k:(v-=_*t+k,B*=-1)):(B=0,"vertical"==C?P>m.top+g/2+k?P-=g*(1-i)+k:(P+=g*i+k,S*=-1):"down"==C?P-=g*(1-i)+k:(P+=g*i+k,S*=-1)),v=je(v,m.left+_*t,m.left+Z-_*(1-t))+B,P=je(P,m.top+g*i,m.top+V-g*(1-i))-S,z=T.x-v+_*t+B,G=T.y-P+g*i-S,this._fx=v,this._fy=P;const $=this.get("animationDuration",0);if($>0&&this.get("visible")&&this.get("opacity")>.1){const ee=this.get("animationEasing");this.animate({key:"x",to:v,duration:$,easing:ee}),this.animate({key:"y",to:P,duration:$,easing:ee})}else this.set("x",v),this.set("y",P);E instanceof Tr&&(E.set("pointerX",z),E.set("pointerY",G)),_>0&&(this._w=_),g>0&&(this._h=g)}}}Object.defineProperty(ni,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(ni,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([ni.className])});class ql extends Be{_setDefaults(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);const e="_big_number_suffix_",t="_small_number_suffix_",i="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(t+"24")},{number:1e-21,suffix:this._t(t+"21")},{number:1e-18,suffix:this._t(t+"18")},{number:1e-15,suffix:this._t(t+"15")},{number:1e-12,suffix:this._t(t+"12")},{number:1e-9,suffix:this._t(t+"9")},{number:1e-6,suffix:this._t(t+"6")},{number:.001,suffix:this._t(t+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(i+"B")},{number:1024,suffix:this._t(i+"KB")},{number:1048576,suffix:this._t(i+"MB")},{number:1073741824,suffix:this._t(i+"GB")},{number:1099511627776,suffix:this._t(i+"TB")},{number:0x4000000000000,suffix:this._t(i+"PB")}]),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,i){(null==t||Gi(t)&&"number"===t.toLowerCase())&&(t=this.get("numberFormat",""));let s,a=Number(e);if(Ds(t))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),t).format(a):new Intl.NumberFormat(void 0,t).format(a)}catch{return"Invalid"}else{t=ut(t);let c,o=this.parseFormat(t,this._root.language);c=a>this.get("negativeBase")?o.positive:a<this.get("negativeBase")?o.negative:o.zero,null!=i&&!c.mod&&(c=F(c),c.decimals.active=0==a?0:i),s=c.template.split(ei).join(this.applyFormat(a,c))}return!0===this.get("forceLTR")&&(s="\u200e"+s),s}parseFormat(e,t){const i=t.translateEmpty("_thousandSeparator"),s=t.translateEmpty("_decimalSeparator");let a={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:i},decimals:{active:-1,passive:-1,separator:s},template:"",source:"",parsed:!1}},o=(e=e.replace("||",Ei)).split("|");return a.positive.source=o[0],typeof o[2]>"u"?a.zero=a.positive:a.zero.source=o[2],typeof o[1]>"u"?a.negative=a.positive:a.negative.source=o[1],X(a,(c,d)=>{if(d.parsed)return;let f=d.source;"number"===f.toLowerCase()&&(f=this.get("numberFormat","#,###.#####"));let b=gt.chunk(f,!0);for(let m=0;m<b.length;m++){let _=b[m];if(_.text=_.text.replace(Ei,"|"),"value"===_.type){let g=_.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(g)if(null===g||""===g[0])d.template+=_.text;else{let T=g[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);T&&(d.mod=T[0].toLowerCase(),d.modSpacing=!!g[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));let v=g[0].split(".");if(""!==v[0]){d.thousands.active=(v[0].match(/0/g)||[]).length,d.thousands.passive=(v[0].match(/\#/g)||[]).length+d.thousands.active;let P=v[0].split(",");1===P.length||(d.thousands.interval=(P.pop()||"").length,0===d.thousands.interval&&(d.thousands.interval=-1))}typeof v[1]>"u"||(d.decimals.active=(v[1].match(/0/g)||[]).length,d.decimals.passive=(v[1].match(/\#/g)||[]).length+d.decimals.active),d.template+=_.text.split(g[0]).join(ei)}}else d.template+=_.text}d.parsed=!0}),a}applyFormat(e,t){let i=e<0;e=Math.abs(e);let s="",a="",o=t.mod?t.mod.split(""):[];if(-1!==o.indexOf("b")){let m=this.applyPrefix(e,this.get("bytePrefixes"),-1!==o.indexOf("!"));e=m[0],s=m[1],a=m[2],t.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("a")){let m=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==o.indexOf("!"));e=m[0],s=m[1],a=m[2],t.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("p")){let m=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(m)),s=this._root.language.translate("_percentPrefix"),a=this._root.language.translate("_percentSuffix"),""==s&&""==a&&(a="%")}else if(-1!==o.indexOf("%")){let m=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(m)),a="%"}else if(-1!==o.indexOf("\u2030")){let m=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(m)),a="\u2030"}if(-1!==o.indexOf("e")){let m;m=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(m[0]),a="e"+m[1],t.modSpacing&&(a=" "+a)}else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){let m=Math.pow(10,t.decimals.passive);e=Math.round(e*m)/m}let c="",d=function Aa(l){if(_i(l))return"NaN";if(l===1/0)return"Infinity";if(l===-1/0)return"-Infinity";if(0===l&&1/l==-1/0)return"-0";let e=l<0;l=Math.abs(l);let a,t=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+l),i=t[1],s=t[2]||"";if(void 0===t[3])a=""===s?i:i+"."+s;else{let o=+t[3];if(l<1)a="0."+Sa("0",o-1)+i+s;else{let c=o-s.length;a=0===c?i+s:c<0?i+s.slice(0,c)+"."+s.slice(c):i+s+Sa("0",c)}}return e?"-"+a:a}(e).split("."),f=d[0];if(f.length<t.thousands.active&&(f=Array(t.thousands.active-f.length+1).join("0")+f),t.thousands.interval>0){let m=[],_=f.split("").reverse().join("");for(let g=0,T=f.length;g<=T;g+=t.thousands.interval){let v=_.substr(g,t.thousands.interval).split("").reverse().join("");""!==v&&m.unshift(v)}f=m.join(t.thousands.separator)}c+=f,1===d.length&&d.push("");let b=d[1];return b.length<t.decimals.active&&(b+=Array(t.decimals.active-b.length+1).join("0")),""!==b&&(c+=t.decimals.separator+b),""===c&&(c="0"),0!==e&&i&&-1===o.indexOf("s")&&(c="-"+c),s&&(c=s+c),a&&(c+=a),c}applyPrefix(e,t,i=!1){let s=e,a="",o="",c=!1,d=1;for(let f=0,b=t.length;f<b;f++)t[f].number<=e&&(0===t[f].number?s=0:(s=e/t[f].number,d=t[f].number),a=t[f].prefix,o=t[f].suffix,c=!0);return!c&&i&&t.length&&0!=e&&(s=e/t[0].number,a=t[0].prefix,o=t[0].suffix,c=!0),c&&(s=parseFloat(s.toPrecision(Math.min(d.toString().length+Math.floor(s).toString().replace(/[^0-9]*/g,"").length,21)))),[s,a,o]}escape(e){return e.replace("||",Ei)}unescape(e){return e.replace(Ei,"|")}}function Kn(l,e){let t=0,i=0,s=1,a=0,o=0,c=0,d=0,f=0;return l.formatToParts(e).forEach(b=>{switch(b.type){case"year":t=+b.value;break;case"month":i=+b.value-1;break;case"day":s=+b.value;break;case"hour":a=+b.value;break;case"minute":o=+b.value;break;case"second":c=+b.value;break;case"fractionalSecond":d=+b.value;break;case"weekday":switch(b.value){case"Sun":f=0;break;case"Mon":f=1;break;case"Tue":f=2;break;case"Wed":f=3;break;case"Thu":f=4;break;case"Fri":f=5;break;case"Sat":f=6}}}),24===a&&(a=0),{year:t,month:i,day:s,hour:a,minute:o,second:c,millisecond:d,weekday:f}}function Je(l,e){const{year:t,month:i,day:s,hour:a,minute:o,second:c,millisecond:d}=Kn(l,e);return Date.UTC(t,i,s,a,o,c,d)}class $n{constructor(e,t){if(Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=e,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}static new(e){return new this(e,!0)}convertLocal(e){const t=this.offsetUTC(e),i=e.getTimezoneOffset(),s=new Date(e);s.setUTCMinutes(s.getUTCMinutes()-(t-i));const a=s.getTimezoneOffset();return i!=a&&s.setUTCMinutes(s.getUTCMinutes()+a-i),s}offsetUTC(e){return(Je(this._utc,e)-Je(this._dtf,e))/6e4}parseDate(e){return Kn(this._dtf,e)}}class Qa extends Be{_setDefaults(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t){(typeof t>"u"||""===t)&&(t=this.get("dateFormat","yyyy-MM-dd"));let i,s=e;if(Ds(t))try{const c=this.get("intlLocales");return c?new Intl.DateTimeFormat(c,t).format(s):new Intl.DateTimeFormat(void 0,t).format(s)}catch{return"Invalid"}let a=this.parseFormat(t);const o=this._root.timezone;return o&&!this._root.utc&&(s=o.convertLocal(s)),R(s.getTime())?(i=this.applyFormat(s,a),this.get("capitalize")&&(i=i.replace(/^.{1}/,i.substr(0,1).toUpperCase())),i):"Invalid date"}applyFormat(e,t){let s,a,o,c,d,f,b,m,i=t.template,_=e.getTime();this._root.utc?(s=e.getUTCFullYear(),a=e.getUTCMonth(),o=e.getUTCDay(),c=e.getUTCDate(),d=e.getUTCHours(),f=e.getUTCMinutes(),b=e.getUTCSeconds(),m=e.getUTCMilliseconds()):(s=e.getFullYear(),a=e.getMonth(),o=e.getDay(),c=e.getDate(),d=e.getHours(),f=e.getMinutes(),b=e.getSeconds(),m=e.getMilliseconds());for(let g=0,T=t.parts.length;g<T;g++){let v="";switch(t.parts[g]){case"G":v=this._t(s<0?"_era_bc":"_era_ad");break;case"yyyy":v=Math.abs(s).toString(),s<0&&(v+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":v=Math.abs(s).toString().substr(-t.parts[g].length),s<0&&(v+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":let P=kl(e,this._root.utc);v="YYYY"==t.parts[g]?Math.abs(P).toString():Math.abs(P).toString().substr(-t.parts[g].length),P<0&&(v+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":v=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":v=this._t(this._getMonth(a)).substr(0,1);break;case"MMMM":v=this._t(this._getMonth(a));break;case"MMM":v=this._t(this._getShortMonth(a));break;case"MM":v=Me(a+1,2,"0");break;case"M":v=(a+1).toString();break;case"ww":v=Me(Es(e,this._root.utc),2,"0");break;case"w":v=Es(e,this._root.utc).toString();break;case"W":v=El(e,this._root.utc).toString();break;case"dd":v=Me(c,2,"0");break;case"d":v=c.toString();break;case"DD":case"DDD":v=Me(Ya(e,this._root.utc).toString(),t.parts[g].length,"0");break;case"D":v=Ya(e,this._root.utc).toString();break;case"t":v=this._root.language.translateFunc("_dateOrd").call(this,c);break;case"E":v=(o||7).toString();break;case"EE":v=Me((o||7).toString(),2,"0");break;case"EEE":case"eee":v=this._t(this._getShortWeekday(o));break;case"EEEE":case"eeee":v=this._t(this._getWeekday(o));break;case"EEEEE":case"eeeee":v=this._t(this._getShortWeekday(o)).substr(0,1);break;case"e":case"ee":v=(o-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==t.parts[g]&&(v=Me(v,2,"0"));break;case"a":v=this._t(d>=12?"PM":"AM");break;case"aa":v=this._t(d>=12?"P.M.":"A.M.");break;case"aaa":v=this._t(d>=12?"P":"A");break;case"h":v=vi(d).toString();break;case"hh":v=Me(vi(d),2,"0");break;case"H":v=d.toString();break;case"HH":v=Me(d,2,"0");break;case"K":v=vi(d,0).toString();break;case"KK":v=Me(vi(d,0),2,"0");break;case"k":v=(d+1).toString();break;case"kk":v=Me(d+1,2,"0");break;case"m":v=f.toString();break;case"mm":v=Me(f,2,"0");break;case"s":v=b.toString();break;case"ss":v=Me(b,2,"0");break;case"S":case"SS":case"SSS":v=Math.round(m/1e3*Math.pow(10,t.parts[g].length)).toString();break;case"x":v=_.toString();break;case"n":case"nn":case"nnn":v=Me(m,t.parts[g].length,"0");break;case"z":v=Ls(e,!1,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zz":v=Ls(e,!0,!1,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"zzz":v=Ls(e,!1,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0).replace(/[+-]+[0-9]+$/,"");break;case"zzzz":v=Ls(e,!0,!0,this._root.utc,this._root.timezone?this._root.timezone.name:void 0);break;case"Z":case"ZZ":let C=this._root.utc?"UTC":this._root.timezone;C instanceof $n&&(C=C.name);const E=C?Il(C):e.getTimezoneOffset();let k=Math.abs(E)/60,S=Math.floor(k),B=60*k-60*S;this._root.utc&&(S=0,B=0),"Z"==t.parts[g]?(v="GMT",v+=E>0?"-":"+",v+=Me(S,2)+":"+Me(B,2)):(v=E>0?"-":"+",v+=Me(S,2)+Me(B,2));break;case"i":v=e.toISOString();break;case"I":v=e.toUTCString()}i=i.replace(ei,v)}return i}parseFormat(e){let t={template:"",parts:[]},i=gt.chunk(e,!0);for(let s=0;s<i.length;s++){let a=i[s];if("value"===a.type){if(a.text.match(/^date$/i)){let c=this.get("dateFormat","yyyy-MM-dd");Gi(c)||(c="yyyy-MM-dd"),a.text=c}let o=a.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(o)for(let c=0;c<o.length;c++)t.parts.push(o[c]),a.text=a.text.replace(o[c],ei)}t.template+=a.text}return t}_months(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}_getMonth(e){return this._months()[e]}_shortMonths(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}_getShortMonth(e){return this._shortMonths()[e]}_weekdays(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}_getWeekday(e){return this._weekdays()[e]}_shortWeekdays(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}_getShortWeekday(e){return this._shortWeekdays()[e]}parse(e,t){if(e instanceof Date)return e;if(R(e))return new Date(e);if("x"==t)return new Date(parseInt(e));Gi(e)||(e=e.toString());let i,s="";t=(t=ut(t)).substr(0,e.length);let a=this.parseFormat(t),o={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},c={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},d=0,f=0;for(let _=0;_<a.parts.length;_++){switch(f=_+d+1,a.parts[_]){case"yyyy":case"YYYY":s+="([0-9]{4})",o.year=f;break;case"yyy":case"YYY":s+="([0-9]{3})",o.year3=f;break;case"yy":case"YY":s+="([0-9]{2})",o.year2=f;break;case"y":case"Y":s+="([0-9]{1})",o.year1=f;break;case"MMMM":s+="("+this.getStringList(this._months()).join("|")+")",o.monthLong=f;break;case"MMM":s+="("+this.getStringList(this._shortMonths()).join("|")+")",o.monthShort=f;break;case"MM":case"M":s+="([0-9]{2}|[0-9]{1})",o.month=f;break;case"ww":case"w":s+="([0-9]{2}|[0-9]{1})",o.week=f;break;case"dd":case"d":s+="([0-9]{2}|[0-9]{1})",o.day=f;break;case"DDD":case"DD":case"D":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.yearDay=f;break;case"dddd":s+="("+this.getStringList(this._weekdays()).join("|")+")",o.weekdayLong=f;break;case"ddd":s+="("+this.getStringList(this._shortWeekdays()).join("|")+")",o.weekdayShort=f;break;case"aaa":case"aa":case"a":s+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",o.am=f;break;case"hh":case"h":s+="([0-9]{2}|[0-9]{1})",o.hour12Base1=f;break;case"HH":case"H":s+="([0-9]{2}|[0-9]{1})",o.hourBase0=f;break;case"KK":case"K":s+="([0-9]{2}|[0-9]{1})",o.hour12Base0=f;break;case"kk":case"k":s+="([0-9]{2}|[0-9]{1})",o.hourBase1=f;break;case"mm":case"m":s+="([0-9]{2}|[0-9]{1})",o.minute=f;break;case"ss":case"s":s+="([0-9]{2}|[0-9]{1})",o.second=f;break;case"SSS":case"SS":case"S":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=f,o.millisecondDigits=a.parts[_].length;break;case"nnn":case"nn":case"n":s+="([0-9]{3}|[0-9]{2}|[0-9]{1})",o.millisecond=f;break;case"x":s+="([0-9]{1,})",o.timestamp=f;break;case"Z":s+="GMT([-+]+[0-9]{2}:[0-9]{2})",o.zone=f;break;case"ZZ":s+="([\\-+]+[0-9]{2}[0-9]{2})",o.zone=f;break;case"i":s+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",o.iso=f,d+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":d--}s+="[^0-9]*"}let b=new RegExp(s),m=e.match(b);if(m){if(o.year>-1&&(c.year=parseInt(m[o.year])),o.year3>-1){let _=parseInt(m[o.year3]);_+=1e3,c.year=_}if(o.year2>-1){let _=parseInt(m[o.year2]);_+=_>50?1e3:2e3,c.year=_}if(o.year1>-1){let _=parseInt(m[o.year1]);_=10*Math.floor((new Date).getFullYear()/10)+_,c.year=_}if(o.monthLong>-1&&(c.month=this.resolveMonth(m[o.monthLong])),o.monthShort>-1&&(c.month=this.resolveShortMonth(m[o.monthShort])),o.month>-1&&(c.month=parseInt(m[o.month])-1),o.week>-1&&-1===o.day&&(c.month=0,c.day=function Ll(l,e,t=1,i=!1){let s=new Date(e,0,4,0,0,0,0);return i&&s.setUTCFullYear(e),7*l+t-((s.getDay()||7)+3)}(parseInt(m[o.week]),c.year,1,this._root.utc)),o.day>-1&&(c.day=parseInt(m[o.day])),o.yearDay>-1&&(c.month=0,c.day=parseInt(m[o.yearDay])),o.hourBase0>-1&&(c.hour=parseInt(m[o.hourBase0])),o.hourBase1>-1&&(c.hour=parseInt(m[o.hourBase1])-1),o.hour12Base0>-1){let _=parseInt(m[o.hour12Base0]);11==_&&(_=0),o.am>-1&&!this.isAm(m[o.am])&&(_+=12),c.hour=_}if(o.hour12Base1>-1){let _=parseInt(m[o.hour12Base1]);12==_&&(_=0),o.am>-1&&!this.isAm(m[o.am])&&(_+=12),c.hour=_}if(o.minute>-1&&(c.minute=parseInt(m[o.minute])),o.second>-1&&(c.second=parseInt(m[o.second])),o.millisecond>-1){let _=parseInt(m[o.millisecond]);2==o.millisecondDigits?_*=10:1==o.millisecondDigits&&(_*=100),c.millisecond=_}if(o.timestamp>-1){c.timestamp=parseInt(m[o.timestamp]);const _=new Date(c.timestamp);c.year=_.getUTCFullYear(),c.month=_.getUTCMonth(),c.day=_.getUTCDate(),c.hour=_.getUTCHours(),c.minute=_.getUTCMinutes(),c.second=_.getUTCSeconds(),c.millisecond=_.getUTCMilliseconds()}o.zone>-1&&(c.offset=this.resolveTimezoneOffset(new Date(c.year,c.month,c.day),m[o.zone])),o.iso>-1&&(c.year=dt(m[o.iso+0]),c.month=dt(m[o.iso+1])-1,c.day=dt(m[o.iso+2]),c.hour=dt(m[o.iso+3]),c.minute=dt(m[o.iso+4]),c.second=dt(m[o.iso+5]),c.millisecond=dt(m[o.iso+6]),"Z"==m[o.iso+7]||"z"==m[o.iso+7]?c.utc=!0:""!=m[o.iso+7]&&(c.offset=this.resolveTimezoneOffset(new Date(c.year,c.month,c.day),m[o.iso+7]))),i=c.utc?new Date(Date.UTC(c.year,c.month,c.day,c.hour,c.minute,c.second,c.millisecond)):new Date(c.year,c.month,c.day,c.hour,c.minute+c.offset,c.second,c.millisecond)}else i=new Date(e);return i}resolveTimezoneOffset(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){let s=t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),a=s[1],c=s[3],d=60*parseInt(s[2])+parseInt(c);return"+"==a&&(d*=-1),d-(e||new Date).getTimezoneOffset()}return 0}resolveMonth(e){let t=this._months().indexOf(e);return t>-1||!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._months()).indexOf(e),t>-1)?t:0}resolveShortMonth(e){let t=this._shortMonths().indexOf(e);return t>-1||(t=this._months().indexOf(e),t>-1)||this._root.language&&!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._shortMonths()).indexOf(e),t>-1)?t:0}isAm(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}getStringList(e){let t=[];for(let i=0;i<e.length;i++)t.push((this._root.language?this._t(e[i]):e[i]).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"));return t}}class ai extends Be{constructor(){super(...arguments),Object.defineProperty(this,"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}})}_setDefaults(){const e="_duration_millisecond",t="_duration_second",i="_duration_minute",s="_duration_hour",a="_duration_day",o="_duration_week",c="_duration_month",b="_minute",m="_hour",_="_day",g="_week",T="_week",v="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+"_second"),minute:this._t(e+b),hour:this._t(e+m),day:this._t(e+_),week:this._t(e+g),month:this._t(e+T),year:this._t(e+v)},second:{second:this._t(t),minute:this._t(t+b),hour:this._t(t+m),day:this._t(t+_),week:this._t(t+g),month:this._t(t+T),year:this._t(t+v)},minute:{minute:this._t(i),hour:this._t(i+m),day:this._t(i+_),week:this._t(i+g),month:this._t(i+T),year:this._t(i+v)},hour:{hour:this._t(s),day:this._t(s+_),week:this._t(s+g),month:this._t(s+T),year:this._t(s+v)},day:{day:this._t(a),week:this._t(a+g),month:this._t(a+T),year:this._t(a+v)},week:{week:this._t(o),month:this._t(o+T),year:this._t(o+v)},month:{month:this._t(c),year:this._t(c+v)},year:{year:this._t("_duration_year")}}),super._setDefaults()}_beforeChanged(){super._beforeChanged()}format(e,t,i){let s=i||this.get("baseUnit");(typeof t>"u"||""===t)&&(t=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat(dt(e),void 0,s)),t=ut(t);let c,a=this.parseFormat(t,s),o=Number(e);c=o>this.get("negativeBase")?a.positive:o<this.get("negativeBase")?a.negative:a.zero;let d=this.applyFormat(o,c);return""!==c.color&&(d="["+c.color+"]"+d+"[/]"),d}parseFormat(e,t){let i=t||this.get("baseUnit"),s={positive:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:i,parsed:!1,absolute:!1}},a=(e=e.replace("||",Ei)).split("|");return s.positive.source=a[0],typeof a[2]>"u"?s.zero=s.positive:s.zero.source=a[2],typeof a[1]>"u"?s.negative=s.positive:s.negative.source=a[1],X(s,(o,c)=>{if(c.parsed)return;let d=c.source,f=[];f=c.source.match(/^\[([^\]]*)\]/),f&&f.length&&""!==f[0]&&(d=c.source.substr(f[0].length),c.color=f[1]);let b=gt.chunk(d,!0);for(let m=0;m<b.length;m++){let _=b[m];if(_.text=_.text.replace(Ei,"|"),"value"===_.type){_.text.match(/[yYMdDwhHKkmsSn]+a/)&&(c.absolute=!0,_.text=_.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));let g=_.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(g)for(let T=0;T<g.length;T++)null==g[T]&&(g[T]=this._unitAliases[g[T]]),c.parts.push(g[T]),_.text=_.text.replace(g[T],ei)}c.template+=_.text}c.parsed=!0}),s}applyFormat(e,t){let i=!t.absolute&&e<this.get("negativeBase");e=Math.abs(e);let s=this.toTimeStamp(e,t.baseUnit),a=t.template;for(let o=0,c=t.parts.length;o<c;o++){let d=t.parts[o],f=this._toTimeUnit(d.substr(0,1)),b=d.length,m=Math.floor(s/this._getUnitValue(f));a=a.replace(ei,Me(m,b,"0")),s-=m*this._getUnitValue(f)}return i&&(a="-"+a),a}toTimeStamp(e,t){return e*this._getUnitValue(t)}_toTimeUnit(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}getFormat(e,t,i){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(i||(i=this.get("baseUnit")),null!=t&&e!=t){e=Math.abs(e),t=Math.abs(t);let s=this.getValueUnit(Math.max(e,t),i);return this.get("durationFormats")[i][s]}{let s=this.getValueUnit(e,i);return this.get("durationFormats")[i][s]}}getValueUnit(e,t){t||(t=this.get("baseUnit"));let i,s=this.getMilliseconds(e,t);return function ne(l,e){for(let t in l)if(He(l,t)&&!e(t,l[t]))break}(this._getUnitValues(),(a,o)=>{if(a==t||i){if(s/o<=1)return i||(i=a),!1;i=a}return!0}),i}getMilliseconds(e,t){return t||(t=this.get("baseUnit")),e*this._getUnitValue(t)}_getUnitValue(e){return this._getUnitValues()[e]}_getUnitValues(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}const Qs={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(l){let e="th";if(l<11||l>13)switch(l%10){case 1:e="st";break;case 2:e="nd";break;case 3:e="rd"}return e},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""};class en extends Be{_setDefaults(){this.setPrivate("defaultLocale",Qs),super._setDefaults()}translate(e,t,...i){t||(t=this._root.locale||this.getPrivate("defaultLocale"));let s=e,a=t[e];if(null===a)s="";else if(null!=a)a&&(s=a);else if(t!==this.getPrivate("defaultLocale"))return this.translate(e,this.getPrivate("defaultLocale"),...i);if(i.length)for(let o=i.length,c=0;c<o;++c)s=s.split("%"+(c+1)).join(i[c]);return s}translateAny(e,t,...i){return this.translate(e,t,...i)}setTranslationAny(e,t,i){(i||this._root.locale)[e]=t}setTranslationsAny(e,t){X(e,(i,s)=>{this.setTranslationAny(i,s,t)})}translateEmpty(e,t,...i){let s=this.translate(e,t,...i);return s==e?"":s}translateFunc(e,t){return this._root.locale[e]?this._root.locale[e]:t!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):()=>""}translateAll(e,t){return this.isDefault()?e:Cs(e,i=>this.translate(i,t))}isDefault(){return this.getPrivate("defaultLocale")===this._root.locale}}class Di{constructor(e,t){if(Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=e,!t)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}static new(e){const t=new this(e,!0);return t.setupDefaultRules(),t}setupDefaultRules(){}_lookupRules(e){return this._rules[e]}ruleRaw(e,t=[]){let i=this._rules[e];i||(i=this._rules[e]=[]),t.sort(ri);const{index:s,found:a}=function La(l,e){let t=0,i=l.length,s=!1;for(;t<i;){const a=t+i>>1,o=e(l[a]);o<0?t=a+1:0===o?(s=!0,t=a+1):i=a}return{found:s,index:s?t-1:t}}(i,o=>{const c=ri(o.tags.length,t.length);return 0===c?Ji(o.tags,t,ri):c});if(a)return i[s].template;{const o=ft.new({});return i.splice(s,0,{tags:t,template:o}),o}}rule(e,t=[]){return this.ruleRaw(e,t)}}function K(l,e,t,i){l.set(e,t.get(i)),t.on(i,s=>{l.set(e,s)})}class ct extends Di{setupDefaultRules(){super.setupDefaultRules();const e=this._root.language,t=this._root.interfaceColors,i=this._root.horizontalLayout,s=this._root.verticalLayout,a=this.rule.bind(this);a("InterfaceColors").setAll({stroke:J.fromHex(15066597),fill:J.fromHex(15987699),primaryButton:J.fromHex(6788316),primaryButtonHover:J.fromHex(6779356),primaryButtonDown:J.fromHex(6872182),primaryButtonActive:J.fromHex(6872182),primaryButtonText:J.fromHex(16777215),primaryButtonStroke:J.fromHex(16777215),secondaryButton:J.fromHex(14277081),secondaryButtonHover:J.fromHex(10724259),secondaryButtonDown:J.fromHex(9276813),secondaryButtonActive:J.fromHex(15132390),secondaryButtonText:J.fromHex(0),secondaryButtonStroke:J.fromHex(16777215),grid:J.fromHex(0),background:J.fromHex(16777215),alternativeBackground:J.fromHex(0),text:J.fromHex(0),alternativeText:J.fromHex(16777215),disabled:J.fromHex(11382189),positive:J.fromHex(5288704),negative:J.fromHex(11730944)});{const o=a("ColorSet");o.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[J.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),o.setPrivate("currentStep",0),o.setPrivate("currentPass",0)}a("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:ii(Fi)}),a("Component").setAll({interpolationDuration:0,interpolationEasing:ii(Fi)}),a("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:ge,tooltipY:ge,tooltipPosition:"fixed",isMeasured:!0}),a("Sprite").states.create("default",{visible:!0,opacity:1}),a("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),a("Graphics").setAll({strokeWidth:1}),a("Chart").setAll({width:W,height:W,interactiveChildren:!1}),a("ZoomableContainer").setAll({width:W,height:W,wheelable:!0,pinchZoom:!0,maxZoomLevel:32,minZoomLevel:1,zoomStep:2,animationEasing:ii(Fi),animationDuration:600}),a("Sprite",["horizontal","center"]).setAll({centerX:ge,x:ge}),a("Sprite",["vertical","center"]).setAll({centerY:ge,y:ge}),a("Container",["horizontal","layout"]).setAll({layout:i}),a("Container",["vertical","layout"]).setAll({layout:s}),a("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),a("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),a("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),a("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),a("GrainPattern").setAll({width:200,height:200,colors:[J.fromHex(0)],size:1,horizontalGap:0,verticalGap:0,density:1,minOpacity:0,maxOpacity:.2}),a("LinearGradient").setAll({rotation:90}),a("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:Xt.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),a("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:i,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});{const o=a("Rectangle",["legend","item","background"]);o.setAll({fillOpacity:0}),K(o,"fill",t,"background")}a("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:ge,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),a("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:W,height:W,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});{const o=a("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});K(o,"fill",t,"disabled"),K(o,"stroke",t,"disabled")}a("Label",["legend","label"]).setAll({centerY:ge,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),K(a("Label",["legend","label"]).states.create("disabled",{}),"fill",t,"disabled"),a("Label",["legend","value","label"]).setAll({centerY:ge,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:W,populateText:!0}),K(a("Label",["legend","value","label"]).states.create("disabled",{}),"fill",t,"disabled"),a("HeatLegend").setAll({stepCount:1}),a("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),a("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:W,width:15}),a("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:W,height:15}),a("HeatLegend",["vertical"]).setAll({height:W}),a("HeatLegend",["horizontal"]).setAll({width:W}),a("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),a("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});{const o=a("Label");o.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),K(o,"fill",t,"text")}a("RadialLabel").setAll({textType:"regular",centerY:ge,centerX:ge,inside:!1,radius:0,baseRadius:W,orientation:"auto",textAlign:"center"}),a("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),a("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),a("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});{const o=a("Tick");o.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),K(o,"stroke",t,"grid")}a("Bullet").setAll({locationX:.5,locationY:.5}),a("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:ge,centerY:ge,animationEasing:ii(Fi),exportable:!1}),a("Polygon").setAll({animationEasing:ii(Fi)}),a("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:J.fromHex(16777215)});{const o=a("Label",["tooltip"]);o.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),K(o,"fill",t,"alternativeText")}a("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:i,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),a("Button").states.create("hover",{}),a("Button").states.create("down",{stateAnimationDuration:0}),a("Button").states.create("active",{});{const o=a("RoundedRectangle",["button","background"]);K(o,"fill",t,"primaryButton"),K(o,"stroke",t,"primaryButtonStroke")}K(a("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),K(a("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown"),K(a("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",t,"primaryButtonActive"),K(a("Graphics",["button","icon"]),"stroke",t,"primaryButtonText"),K(a("Label",["button"]),"fill",t,"primaryButtonText"),a("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:W,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});{const o=a("RoundedRectangle",["background","button","zoom"]);o.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),K(o,"fill",t,"primaryButton")}K(a("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),K(a("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown");{const o=a("Graphics",["icon","button","zoom"]);o.setAll({crisp:!0,strokeOpacity:.7,draw:c=>{c.moveTo(0,0),c.lineTo(12,0)}}),K(o,"stroke",t,"primaryButtonText")}a("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:ge,centerY:ge,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});{const o=a("RoundedRectangle",["background","resize","button"]);o.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),K(o,"fill",t,"secondaryButton"),K(o,"stroke",t,"secondaryButtonStroke")}K(a("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),K(a("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown");{const o=a("Graphics",["resize","button","icon"]);o.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:c=>{c.moveTo(0,.5),c.lineTo(0,12.5),c.moveTo(4,.5),c.lineTo(4,12.5)}}),K(o,"stroke",t,"secondaryButtonText")}a("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),a("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),a("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});{const o=a("RoundedRectangle",["play","background"]);o.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),K(o,"fill",t,"primaryButton")}{const o=a("Graphics",["play","icon"]);o.setAll({stateAnimationDuration:0,dx:1,draw:c=>{c.moveTo(0,-5),c.lineTo(8,0),c.lineTo(0,5),c.lineTo(0,-5)}}),K(o,"fill",t,"primaryButtonText")}a("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),a("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:o=>{o.moveTo(-4,-5),o.lineTo(-1,-5),o.lineTo(-1,5),o.lineTo(-4,5),o.lineTo(-4,-5),o.moveTo(4,-5),o.lineTo(1,-5),o.lineTo(1,5),o.lineTo(4,5),o.lineTo(4,-5)}}),a("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});{const o=a("RoundedRectangle",["switch","background"]);o.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),K(o,"fill",t,"primaryButton")}{const o=a("Circle",["switch","icon"]);o.setAll({radius:8,centerY:0,centerX:0,dx:0}),K(o,"fill",t,"primaryButtonText")}a("Graphics",["switch","icon"]).states.create("active",{dx:16}),a("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:ii(Fi)}),a("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:W}),a("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:W}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});{const o=a("RoundedRectangle",["scrollbar","main","background"]);o.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),K(o,"fill",t,"fill")}{const o=a("RoundedRectangle",["scrollbar","thumb"]);o.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),K(o,"fill",t,"secondaryButton")}K(a("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),K(a("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown"),a("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:ge,width:W,centerX:ge,ariaLabel:e.translate("Use up and down arrows to move selection")}),a("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:ge,centerY:ge,height:W,ariaLabel:e.translate("Use left and right arrows to move selection")});{const o=a("PointedRectangle",["axis","tooltip","background"]);o.setAll({cornerRadius:0}),K(o,"fill",t,"alternativeBackground")}a("Label",["axis","tooltip"]).setAll({role:void 0}),a("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),a("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),a("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),a("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),a("Star").setAll({spikes:5,innerRadius:5,radius:10}),a("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),a("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),a("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),a("SpriteResizer").setAll({rotationStep:10}),a("Container",["resizer","grip"]).states.create("hover",{});{const o=a("RoundedRectangle",["resizer","grip"]);o.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),K(o,"fill",t,"background"),K(o,"stroke",t,"alternativeBackground")}{const o=a("RoundedRectangle",["resizer","grip","outline"]);o.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),o.states.create("hover",{fillOpacity:.3}),K(o,"fill",t,"alternativeBackground")}a("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),a("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});{const o=a("Rectangle",["resizer","rectangle"]);o.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),K(o,"stroke",t,"alternativeBackground")}a("Graphics",["button","plus","icon"]).setAll({x:ge,y:ge,draw:o=>{o.moveTo(-4,0),o.lineTo(4,0),o.moveTo(0,-4),o.lineTo(0,4)}}),a("Graphics",["button","minus","icon"]).setAll({x:ge,y:ge,draw:o=>{o.moveTo(-4,0),o.lineTo(4,0)}}),a("Graphics",["button","home","icon"]).setAll({x:ge,y:ge,svgPath:"M 8 -1 L 6 -1 L 6 7 L 2 7 L 2 1 L -2 1 L -2 7 L -6 7 L -6 -1 L -8 -1 L 0 -9 L 8 -1 Z M 8 -1"}),a("Button",["zoomtools"]).setAll({marginTop:1,marginBottom:2}),a("ZoomTools").setAll({x:W,centerX:W,y:W,centerY:W,paddingRight:10,paddingBottom:10})}}class ss{constructor(e=1,t=0,i=0,s=1,a=0,o=0){Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=e,this.b=t,this.c=i,this.d=s,this.tx=a,this.ty=o}setTransform(e,t,i,s,a,o=1){this.a=Math.cos(a)*o,this.b=Math.sin(a)*o,this.c=-Math.sin(a)*o,this.d=Math.cos(a)*o,this.tx=e-(i*this.a+s*this.c),this.ty=t-(i*this.b+s*this.d)}apply(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}applyInverse(e){const t=1/(this.a*this.d+this.c*-this.b);return{x:this.d*t*e.x+-this.c*t*e.y+(this.ty*this.c-this.tx*this.d)*t,y:this.a*t*e.y+-this.b*t*e.x+(-this.ty*this.a+this.tx*this.b)*t}}append(e){const t=this.a,i=this.b,s=this.c,a=this.d;this.a=e.a*t+e.b*s,this.b=e.a*i+e.b*a,this.c=e.c*t+e.d*s,this.d=e.c*i+e.d*a,this.tx=e.tx*t+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*a+this.ty}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty}copyFrom(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}var Jl=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function l(e,t){var i=[],s=!0,a=!1,o=void 0;try{for(var d,c=e[Symbol.iterator]();!(s=(d=c.next()).done)&&(i.push(d.value),!t||i.length!==t);s=!0);}catch(f){a=!0,o=f}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ns=2*Math.PI,Qn=function(e,t,i,s,a,o,c){var d=e.x,f=e.y;return{x:s*(d*=t)-a*(f*=i)+o,y:a*d+s*f+c}},ea=function(e,t){var i=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:1.3333333333333333*Math.tan(t/4),s=Math.cos(e),a=Math.sin(e),o=Math.cos(e+t),c=Math.sin(e+t);return[{x:s-a*i,y:a+s*i},{x:o+c*i,y:c-o*i},{x:o,y:c}]},eo=function(e,t,i,s){var o=e*i+t*s;return o>1&&(o=1),o<-1&&(o=-1),(e*s-t*i<0?-1:1)*Math.acos(o)};const Kl=function(e){var t=e.px,i=e.py,s=e.cx,a=e.cy,o=e.rx,c=e.ry,d=e.xAxisRotation,f=void 0===d?0:d,b=e.largeArcFlag,m=void 0===b?0:b,_=e.sweepFlag,g=void 0===_?0:_,T=[];if(0===o||0===c)return[];var v=Math.sin(f*ns/360),P=Math.cos(f*ns/360),C=P*(t-s)/2+v*(i-a)/2,E=-v*(t-s)/2+P*(i-a)/2;if(0===C&&0===E)return[];o=Math.abs(o),c=Math.abs(c);var k=Math.pow(C,2)/Math.pow(o,2)+Math.pow(E,2)/Math.pow(c,2);k>1&&(o*=Math.sqrt(k),c*=Math.sqrt(k));var S=function(e,t,i,s,a,o,c,d,f,b,m,_){var g=Math.pow(a,2),T=Math.pow(o,2),v=Math.pow(m,2),P=Math.pow(_,2),C=g*T-g*P-T*v;C<0&&(C=0),C/=g*P+T*v;var E=(C=Math.sqrt(C)*(c===d?-1:1))*a/o*_,k=C*-o/a*m,S=b*E-f*k+(e+i)/2,B=f*E+b*k+(t+s)/2,z=(m-E)/a,G=(_-k)/o,Z=(-m-E)/a,V=(-_-k)/o,$=eo(1,0,z,G),ee=eo(z,G,Z,V);return 0===d&&ee>0&&(ee-=ns),1===d&&ee<0&&(ee+=ns),[S,B,$,ee]}(t,i,s,a,o,c,m,g,v,P,C,E),B=Jl(S,4),z=B[0],G=B[1],Z=B[2],V=B[3],$=Math.abs(V)/(ns/4);Math.abs(1-$)<1e-7&&($=1);var ee=Math.max(Math.ceil($),1);V/=ee;for(var Ce=0;Ce<ee;Ce++)T.push(ea(Z,V)),Z+=V;return T.map(function(Ye){var Et=Qn(Ye[0],o,c,P,v,z,G),Ee=Et.x,ui=Et.y,ae=Qn(Ye[1],o,c,P,v,z,G),ye=ae.x,be=ae.y,Lt=Qn(Ye[2],o,c,P,v,z,G);return{x1:Ee,y1:ui,x2:ye,y2:be,x:Lt.x,y:Lt.y}})};function $l(l,e,t){if(e!==t)throw new Error("Required "+t+" arguments for "+l+" but got "+e)}function Ci(l,e,t){if(e<t)throw new Error("Required at least "+t+" arguments for "+l+" but got "+e)}function xt(l,e,t){if(Ci(l,e,t),e%t!=0)throw new Error("Arguments for "+l+" must be in pairs of "+t)}function Ql(l){for(let e=0;e<l.length;e+=7){let t=e+3,i=l[t];if(i.length>1){const s=/^([01])([01])(.*)$/.exec(i);null!==s&&(l.splice(t,0,s[1]),++t,l.splice(t,0,s[2]),++t,s[3].length>0?l[t]=s[3]:l.splice(t,1))}if(++t,i=l[t],i.length>1){const s=/^([01])(.+)$/.exec(i);null!==s&&(l.splice(t,0,s[1]),++t,l[t]=s[2])}}}function tn(l){if(0===l||1===l)return l;throw new Error("Flag must be 0 or 1")}function rn(l,e){for(;(!l.interactive||e(l))&&l._parent;)l=l._parent}function eu(l,e,t){return Ae(l,Fn(e),i=>{const s=Ms(i);let a=i.touches;a?(0==a.length&&(a=i.changedTouches),t(Ln(a),s)):t([i],s)})}function ro(l){const e=document.createElement("canvas");e.width=1,e.height=1;const t=e.getContext("2d",{willReadFrequently:!0});t.drawImage(l,0,0,1,1);try{return t.getImageData(0,0,1,1),!1}catch{return console.warn('Image "'+l.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function Dr(l){l.width=0,l.height=0,l.style.width="0px",l.style.height="0px"}function sn(l){return Math.floor(l)+.5}class tu{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class Cr extends As{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new tu}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new ss}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new ss}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new ss}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}subStatus(e){return{inactive:null==this.inactive?e.inactive:this.inactive,layer:this._layer||e.layer}}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,t){null==e?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=t,t&&Li(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(e){return!e.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(e){return this._isInteractive(e)}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();const t=this.getLocalMatrix(),i=t.apply({x:e.left,y:e.top}),s=t.apply({x:e.right,y:e.top}),a=t.apply({x:e.right,y:e.bottom}),o=t.apply({x:e.left,y:e.bottom});return{left:Math.min(i.x,s.x,a.x,o.x),top:Math.min(i.y,s.y,a.y,o.y),right:Math.max(i.x,s.x,a.x,o.x),bottom:Math.max(i.y,s.y,a.y,o.y)}}on(e,t,i){return this.interactive?this._renderer._addEvent(this,e,t,i):new Oe(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,t){const i=this._matrix;let s=i.tx*t,a=i.ty*t;this.crisp&&(s=sn(s),a=sn(a)),e.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,s,a)}_transformMargin(e,t,i){const s=this._matrix;e.setTransform(s.a*t,s.b*t,s.c*t,s.d*t,(s.tx+i.left)*t,(s.ty+i.top)*t)}_transformLayer(e,t,i){i.margin?this._transformMargin(e,i.scale||t,i.margin):this._transform(e,i.scale||t)}render(e){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();const t=this.subStatus(e),i=this._renderer.resolution,s=this._renderer.layers,a=this._renderer._ghostLayer,o=a.context,c=this.mask;c&&c._setMatrix(),I(s,d=>{if(d){const f=d.context;f.save(),c&&(c._transformLayer(f,i,d),c._runPath(f),f.clip()),f.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(f,i,d),this.filter&&(f.filter=this.filter)}}),o.save(),c&&this._isInteractiveMask(t)&&(c._transformMargin(o,i,a.margin),c._runPath(o),o.clip()),this._transformMargin(o,i,a.margin),this._render(t),o.restore(),I(s,d=>{d&&d.context.restore()})}}_render(e){!1===this.exportable&&(e.layer.tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){const e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class so extends Cr{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(e){return this.interactiveChildren||super._isInteractiveMask(e)}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,ot(this._children,e)}_render(e){super._render(e);const t=this._renderer;this.interactive&&this.interactiveChildren&&++t._forceInteractive,I(this._children,i=>{i.compoundAlpha=this.compoundAlpha*this.alpha,i.render(e)}),this.interactive&&this.interactiveChildren&&--t._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),Vi(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&I(this._childLayers,t=>t.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&I(this._childLayers,e=>{e.dirty=!0})}}function ke(l,e){l.left=Math.min(l.left,e.x),l.top=Math.min(l.top,e.y),l.right=Math.max(l.right,e.x),l.bottom=Math.max(l.bottom,e.y)}class Ue{colorize(e,t){}colorizeGhost(e,t){this.colorize(e,t)}path(e){}pathGhost(e){this.path(e)}addBounds(e){}}class nn extends Ue{colorize(e,t){e.beginPath()}}class ta extends Ue{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fillStyle=void 0!==t?t:this.color}}class no extends Ue{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class ao extends Ue{colorize(e,t){e.stroke()}}class ia extends Ue{constructor(e,t,i){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i})}colorize(e,t){e.strokeStyle=void 0!==t?t:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class oo extends Ue{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.setLineDash(this.dash)}}class iu extends Ue{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.lineDashOffset=this.dashOffset}}class ra extends Ue{constructor(e,t,i,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){const t=this.x,i=this.y,s=t+this.width,a=i+this.height;ke(e,{x:t,y:i}),ke(e,{x:s,y:i}),ke(e,{x:t,y:a}),ke(e,{x:s,y:a})}}class lo extends Ue{constructor(e,t,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){ke(e,{x:this.x-this.radius,y:this.y-this.radius}),ke(e,{x:this.x+this.radius,y:this.y+this.radius})}}class sa extends Ue{constructor(e,t,i,s){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){ke(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),ke(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class ru extends Ue{constructor(e,t,i,s,a,o){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:o})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let t=function Gl(l,e,t,i,s){let a=Number.MAX_VALUE,o=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=-Number.MAX_VALUE,f=[];f.push(qn(s,t)),f.push(qn(s,i));let b=Math.min(90*Math.floor(t/90),90*Math.floor(i/90)),m=Math.max(90*Math.ceil(t/90),90*Math.ceil(i/90));for(let _=b;_<=m;_+=90)_>=t&&_<=i&&f.push(qn(s,_));for(let _=0;_<f.length;_++){let g=f[_];g.x<a&&(a=g.x),g.y<o&&(o=g.y),g.x>c&&(c=g.x),g.y>d&&(d=g.y)}return{left:l+a,top:e+o,right:l+c,bottom:e+d}}(this.cx,this.cy,this.startAngle*Bi,this.endAngle*Bi,this.radius);ke(e,{x:t.left,y:t.top}),ke(e,{x:t.right,y:t.bottom})}}class na extends Ue{constructor(e,t,i,s,a){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class ue extends Ue{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.lineTo(this.x,this.y)}addBounds(e){ke(e,{x:this.x,y:this.y})}}class su extends Ue{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.moveTo(this.x,this.y)}addBounds(e){ke(e,{x:this.x,y:this.y})}}class nu extends Ue{path(e){e.closePath()}}class os extends Ue{constructor(e,t,i,s,a,o){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:o})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){ke(e,{x:this.cpX,y:this.cpY}),ke(e,{x:this.cpX2,y:this.cpY2}),ke(e,{x:this.toX,y:this.toY})}}class uo extends Ue{constructor(e,t,i,s){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){ke(e,{x:this.cpX,y:this.cpY}),ke(e,{x:this.toX,y:this.toY})}}class au extends Ue{constructor(e,t,i,s,a){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:a})}colorize(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}colorizeGhost(e,t){}}class ou extends Ue{constructor(e,t,i,s,a){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){ke(e,{x:this.x,y:this.y}),ke(e,{x:this.width,y:this.height})}}class kt extends Cr{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:Jn.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,t=1){this._fillAlpha=t,e?e instanceof J?this._pushOp(new ta(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new ta(e))):this._pushOp(new ta("rgba(0, 0, 0, "+t+")"))}endFill(){this._pushOp(new no(this._hasShadows))}endStroke(){this._pushOp(new ao)}beginPath(){this._pushOp(new nn)}lineStyle(e=0,t,i=1,s){this._strokeAlpha=i,this._pushOp(new ia(e,t?t instanceof J?t.toCSS(i):t:"rgba(0, 0, 0, "+i+")",s))}setLineDash(e){this._pushOp(new oo(e||[]))}setLineDashOffset(e=0){this._pushOp(new iu(e))}drawRect(e,t,i,s){this._pushOp(new ra(e,t,i,s))}drawCircle(e,t,i){this._pushOp(new lo(e,t,i))}drawEllipse(e,t,i,s){this._pushOp(new sa(e,t,i,s))}arc(e,t,i,s,a,o=!1){this._pushOp(new ru(e,t,i,s,a,o))}arcTo(e,t,i,s,a){this._pushOp(new na(e,t,i,s,a))}lineTo(e,t){this._pushOp(new ue(e,t))}moveTo(e,t){this._pushOp(new su(e,t))}bezierCurveTo(e,t,i,s,a,o){this._pushOp(new os(e,t,i,s,a,o))}quadraticCurveTo(e,t,i,s){this._pushOp(new uo(e,t,i,s))}closePath(){this._pushOp(new nu)}shadow(e,t=0,i=0,s=0,a){this._hasShadows=!0,this._pushOp(new au(e.toCSS(a||this._fillAlpha||this._strokeAlpha),t,i,s))}image(e,t,i,s,a){this._pushOp(new ou(e,t,i,s,a))}svgPath(e){let t=0,i=0,s=null,a=null,o=null,c=null;const d=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,f=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;let b;for(;null!==(b=d.exec(e));){const m=b[1],_=b[2],g=[];for(;null!==(b=f.exec(_));)g.push(b[1]);switch("S"!==m&&"s"!==m&&"C"!==m&&"c"!==m&&(s=null,a=null),"Q"!==m&&"q"!==m&&"T"!==m&&"t"!==m&&(o=null,c=null),m){case"M":xt(m,g.length,2),t=+g[0],i=+g[1],this.moveTo(t,i);for(let v=2;v<g.length;v+=2)t=+g[v],i=+g[v+1],this.lineTo(t,i);break;case"m":xt(m,g.length,2),t+=+g[0],i+=+g[1],this.moveTo(t,i);for(let v=2;v<g.length;v+=2)t+=+g[v],i+=+g[v+1],this.lineTo(t,i);break;case"L":xt(m,g.length,2);for(let v=0;v<g.length;v+=2)t=+g[v],i=+g[v+1],this.lineTo(t,i);break;case"l":xt(m,g.length,2);for(let v=0;v<g.length;v+=2)t+=+g[v],i+=+g[v+1],this.lineTo(t,i);break;case"H":Ci(m,g.length,1);for(let v=0;v<g.length;++v)t=+g[v],this.lineTo(t,i);break;case"h":Ci(m,g.length,1);for(let v=0;v<g.length;++v)t+=+g[v],this.lineTo(t,i);break;case"V":Ci(m,g.length,1);for(let v=0;v<g.length;++v)i=+g[v],this.lineTo(t,i);break;case"v":Ci(m,g.length,1);for(let v=0;v<g.length;++v)i+=+g[v],this.lineTo(t,i);break;case"C":xt(m,g.length,6);for(let v=0;v<g.length;v+=6)s=+g[v+2],a=+g[v+3],t=+g[v+4],i=+g[v+5],this.bezierCurveTo(+g[v],+g[v+1],s,a,t,i);break;case"c":xt(m,g.length,6);for(let v=0;v<g.length;v+=6){const P=+g[v]+t,C=+g[v+1]+i;s=+g[v+2]+t,a=+g[v+3]+i,t+=+g[v+4],i+=+g[v+5],this.bezierCurveTo(P,C,s,a,t,i)}break;case"S":xt(m,g.length,4),(null===s||null===a)&&(s=t,a=i);for(let v=0;v<g.length;v+=4){const P=2*t-s,C=2*i-a;s=+g[v],a=+g[v+1],t=+g[v+2],i=+g[v+3],this.bezierCurveTo(P,C,s,a,t,i)}break;case"s":xt(m,g.length,4),(null===s||null===a)&&(s=t,a=i);for(let v=0;v<g.length;v+=4){const P=2*t-s,C=2*i-a;s=+g[v]+t,a=+g[v+1]+i,t+=+g[v+2],i+=+g[v+3],this.bezierCurveTo(P,C,s,a,t,i)}break;case"Q":xt(m,g.length,4);for(let v=0;v<g.length;v+=4)o=+g[v],c=+g[v+1],t=+g[v+2],i=+g[v+3],this.quadraticCurveTo(o,c,t,i);break;case"q":xt(m,g.length,4);for(let v=0;v<g.length;v+=4)o=+g[v]+t,c=+g[v+1]+i,t+=+g[v+2],i+=+g[v+3],this.quadraticCurveTo(o,c,t,i);break;case"T":xt(m,g.length,2),(null===o||null===c)&&(o=t,c=i);for(let v=0;v<g.length;v+=2)o=2*t-o,c=2*i-c,t=+g[v],i=+g[v+1],this.quadraticCurveTo(o,c,t,i);break;case"t":xt(m,g.length,2),(null===o||null===c)&&(o=t,c=i);for(let v=0;v<g.length;v+=2)o=2*t-o,c=2*i-c,t+=+g[v],i+=+g[v+1],this.quadraticCurveTo(o,c,t,i);break;case"A":case"a":const T="a"===m;Ql(g),xt(m,g.length,7);for(let v=0;v<g.length;v+=7){let P=+g[v+5],C=+g[v+6];T&&(P+=t,C+=i),I(Kl({px:t,py:i,rx:+g[v],ry:+g[v+1],xAxisRotation:+g[v+2],largeArcFlag:tn(+g[v+3]),sweepFlag:tn(+g[v+4]),cx:P,cy:C}),k=>{this.bezierCurveTo(k.x1,k.y1,k.x2,k.y2,k.x,k.y),t=k.x,i=k.y})}break;case"Z":case"z":$l(m,g.length,0),this.closePath()}}}_runPath(e){e.beginPath(),I(this._operations,t=>{t.path(e)})}_render(e){super._render(e);const t=e.layer.dirty,i=this._isInteractive(e);if(t||i){const s=e.layer.context,a=this._renderer._ghostLayer.context;let o;t&&(s.globalCompositeOperation=this.blendMode,s.beginPath()),i&&(a.beginPath(),o=this._getColorId()),I(this._operations,c=>{t&&(c.path(s),c.colorize(s,void 0)),i&&(c.pathGhost(a),c.colorizeGhost(a,o))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();const t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),I(this._operations,i=>{i.path(e),i.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&I(this._operations,t=>{t.addBounds(e)})}}class ho extends Cr{constructor(e,t,i){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=t,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,t=!1,i=!1){super._render(e);const s=e.layer.context,a=this._renderer._ghostLayer.context,o=this.style;let c=this._getFontStyle(void 0,i);s.font=c,this._isInteractive(e)&&!t&&(a.font=c),o.fill&&(s.fillStyle=o.fill instanceof J?o.fill.toCSS(null!=o.fillOpacity?o.fillOpacity:1):o.fill),o.shadowColor&&(e.layer.context.shadowColor=o.shadowColor.toCSS(o.shadowOpacity||1)),o.shadowBlur&&(e.layer.context.shadowBlur=o.shadowBlur),o.shadowOffsetX&&(e.layer.context.shadowOffsetX=o.shadowOffsetX),o.shadowOffsetY&&(e.layer.context.shadowOffsetY=o.shadowOffsetY),this._shared(s),this._isInteractive(e)&&!t&&(a.fillStyle=this._getColorId(),this._shared(a))}_getFontStyle(e,t=!1){const i=this.style;let s=[];return e&&e.fontVariant?s.push(e.fontVariant):i.fontVariant&&s.push(i.fontVariant),t||(e&&e.fontWeight?s.push(e.fontWeight):i.fontWeight&&s.push(i.fontWeight)),e&&e.fontStyle?s.push(e.fontStyle):i.fontStyle&&s.push(i.fontStyle),e&&e.fontSize?(R(e.fontSize)&&(e.fontSize=e.fontSize+"px"),s.push(e.fontSize)):i.fontSize&&(R(i.fontSize)&&(i.fontSize=i.fontSize+"px"),s.push(i.fontSize)),e&&e.fontFamily?s.push(e.fontFamily):i.fontFamily?s.push(i.fontFamily):s.length&&s.push("Arial"),s.join(" ")}_render(e){if(this._textInfo||this._measure(e),this.textVisible){const t=this._isInteractive(e),i=e.layer.context,s=e.layer.dirty,a=this._renderer._ghostLayer.context;i.save(),a.save(),this._prerender(e),I(this._textInfo,(o,c)=>{I(o.textChunks,(d,f)=>{if(d.style&&(i.save(),a.save(),i.font=d.style,this._isInteractive(e)&&(a.font=d.style)),d.fill&&(i.save(),i.fillStyle=d.fill.toCSS()),s&&i.fillText(d.text,d.offsetX,o.offsetY+d.offsetY),"underline"==d.textDecoration||"line-through"==d.textDecoration){let T,b=1,m=1,_=d.height,g=d.offsetX;switch(this.style.textAlign){case"right":case"end":g-=d.width;break;case"center":g-=d.width/2}if(d.style)switch(gt.getTextStyle(d.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":b=2}_&&(m=_/20),T="line-through"==d.textDecoration?b+o.offsetY+d.offsetY-d.height/2:b+1.5*m+o.offsetY+d.offsetY,i.save(),i.beginPath(),d.fill?i.strokeStyle=d.fill.toCSS():this.style.fill&&this.style.fill instanceof J&&(i.strokeStyle=this.style.fill.toCSS()),i.lineWidth=b*m,i.moveTo(g,T),i.lineTo(g+d.width,T),i.stroke(),i.restore()}t&&this.interactive&&a.fillText(d.text,d.offsetX,o.offsetY+d.offsetY),d.fill&&i.restore(),d.style&&(i.restore(),a.restore())})}),i.restore(),a.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){const t=this._measure({inactive:this.inactive,layer:this.getLayer()});ke(e,{x:t.left,y:t.top}),ke(e,{x:t.right,y:t.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){const t=e.layer.context,i=this._renderer._ghostLayer.context,s="rtl"==this.style.direction;this._textInfo=[];const a=this.style.oversizedBehavior,o=this.style.maxWidth,c=R(o)&&"truncate"==a,d=R(o)&&("wrap"==a||"wrap-no-break"==a);t.save(),i.save(),this._prerender(e,!0,this._ignoreFontWeight());const f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",b=this.text.toString().replace(/\r/g,"").split(/\n/);let v,m=!0,_=0,g=0,T=0;I(b,(C,E)=>{let k;for(k=""==C?[{type:"value",text:""}]:gt.chunk(C,!1,this.style.ignoreFormatting);k.length>0;){let S={offsetY:T,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};const B=this._measureText(f,t);S.height=B.actualBoundingBoxAscent+B.actualBoundingBoxDescent,S.ascent=B.actualBoundingBoxAscent;let G,V,$,Et,Z=this.style.textDecoration,ee=!1,Ce=!0,Ye=[];En(k,(Ee,ui)=>{if("format"==Ee.type)if("[/]"==Ee.text)m||(t.restore(),i.restore(),m=!0),V=void 0,v=void 0,$=void 0,Z=this.style.textDecoration,Et=void 0,G=Ee.text;else{m||(t.restore(),i.restore());let ae=gt.getTextStyle(Ee.text);const ye=this._getFontStyle(ae);t.save(),i.save(),t.font=ye,v=ye,G=Ee.text,ae.textDecoration&&(Z=ae.textDecoration),ae.fill&&(V=ae.fill),ae.width&&($=dt(ae.width)),ae.verticalAlign&&(Et=ae.verticalAlign),m=!1;const be=this._measureText(f,t),Lt=be.actualBoundingBoxAscent+be.actualBoundingBoxDescent;Lt>S.height&&(S.height=Lt),be.actualBoundingBoxAscent>S.ascent&&(S.ascent=be.actualBoundingBoxAscent)}else if("value"==Ee.type&&!ee){const ae=this._measureText(Ee.text,t);let ye=ae.actualBoundingBoxLeft+ae.actualBoundingBoxRight;if(c){let We=Ce||this.style.breakWords||!1;const Tt=this.style.ellipsis||"",xo=this._measureText(Tt,t);S.width+ye>o&&(Ee.text=this._truncateText(t,Ee.text,o-S.width-(xo.actualBoundingBoxLeft+xo.actualBoundingBoxRight),We),Ee.text+=Tt,ee=!0)}else if(d&&S.width+ye>o){const Tt=this._truncateText(t,Ee.text,o-S.width,!1,Ce&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==Tt)return this.textVisible=!0,!1;Ye=k.slice(ui+1),Ii(Tt)!=Ii(Ee.text)&&(Ye.unshift({type:"value",text:Ee.text.substr(Tt.length)}),G&&Ye.unshift({type:"format",text:G})),Ee.text=Ii(Tt),k=[],ee=!0}let be=1,Lt=1;if(v&&$&&$>ye){const We=ye/$;switch(this.style.textAlign){case"right":case"end":be=We;break;case"center":be=We,Lt=We;break;default:Lt=We}ye=$}const Ir=ae.actualBoundingBoxAscent+ae.actualBoundingBoxDescent;Ir>S.height&&(S.height=Ir),ae.actualBoundingBoxAscent>S.ascent&&(S.ascent=ae.actualBoundingBoxAscent),S.width+=ye,S.left+=ae.actualBoundingBoxLeft/be,S.right+=ae.actualBoundingBoxRight/Lt,S.textChunks.push({style:v,fill:V,text:Ee.text,width:ye,height:Ir,left:ae.actualBoundingBoxLeft,right:ae.actualBoundingBoxRight,ascent:ae.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:Z,verticalAlign:Et}),Ce=!1}return!0}),this.style.lineHeight instanceof le?(S.height*=this.style.lineHeight.value,S.ascent*=this.style.lineHeight.value):(S.height*=this.style.lineHeight||1.2,S.ascent*=this.style.lineHeight||1.2),_<S.left&&(_=S.left),g<S.right&&(g=S.right),this._textInfo.push(S),T+=S.height,k=Ye||[]}}),m||(t.restore(),i.restore()),I(this._textInfo,(C,E)=>{let k=0;I(C.textChunks,S=>{if(S.offsetX=k+S.left-C.left,S.offsetY+=C.height-C.height*(this.style.baselineRatio||.19),k+=S.width,S.verticalAlign)switch(S.verticalAlign){case"super":S.offsetY-=C.height/2-S.height/2;break;case"sub":S.offsetY+=S.height/2}})});const P={left:s?-g:-_,top:0,right:s?_:g,bottom:T};if("none"!==a){const C=this._fitRatio(P);if(C<1)if("fit"==a)R(this.style.minScale)&&C<this.style.minScale?(this.textVisible=!1,P.left=0,P.top=0,P.right=0,P.bottom=0):((!this._originalScale||1==this._originalScale)&&(this._originalScale=this.scale),this.scale=C,this.textVisible=!0);else if("hide"==a)this.textVisible=!1,P.left=0,P.top=0,P.right=0,P.bottom=0;else{switch(this.style.textAlign){case"right":case"end":P.left=-o,P.right=0;break;case"center":P.left=-o/2,P.right=o/2;break;default:P.left=0,P.right=o}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return t.restore(),i.restore(),P}_fitRatio(e){const t=this.style.maxWidth,i=this.style.maxHeight;return R(t)||R(i)?Math.min(t/(e.right-e.left)||1,i/(e.bottom-e.top)||1):1}_truncateText(e,t,i,s=!1,a=!0){let o;do{if(s)t=t.slice(0,-1);else{let d=t.replace(/[^,;:!?\\\/\s\u200b]+[,;:!?\\\/\s\u200b]*$/g,"");if(""!=d&&d!==t||!a){if(""==d)return t;t=d}else s=!0}const c=this._measureText(t,e);o=c.actualBoundingBoxLeft+c.actualBoundingBoxRight}while(o>i&&""!=t);return t}_measureText(e,t){let i=t.measureText(e),s={};if(null==i.actualBoundingBoxAscent){const o=document.createElement("div");o.innerText=e,o.style.visibility="hidden",o.style.position="absolute",o.style.top="-1000000px;",o.style.fontFamily=this.style.fontFamily||"",o.style.fontSize=this.style.fontSize+"",document.body.appendChild(o);const c=o.getBoundingClientRect();document.body.removeChild(o);const d=c.height,f=i.width;s={actualBoundingBoxAscent:d,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:f,fontBoundingBoxAscent:d,fontBoundingBoxDescent:0,width:f}}else s={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};const a=i.width;switch(this.style.textAlign){case"right":case"end":s.actualBoundingBoxLeft=a,s.actualBoundingBoxRight=0;break;case"center":s.actualBoundingBoxLeft=a/2,s.actualBoundingBoxRight=a/2;break;default:s.actualBoundingBoxLeft=0,s.actualBoundingBoxRight=a}return s}}class an{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:jt(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class aa extends ho{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){"circular"===this.textType?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){this._prerender(e);const t=this._isInteractive(e),i=e.layer.context,s=e.layer.dirty,a=this._renderer._ghostLayer.context;i.save(),t&&a.save(),this._textInfo||this._measure(e);let o=this.radius||0,c=this.startAngle||0,d=0,f=this.orientation,b="auto"==f?"auto":"inward"==f;const m=this.inside,_=this.style.textAlign||"left",g=this.kerning||0;let T="left"==_?1:-1;const v=!this._textReversed;if("auto"==b){let P=0,C=0;I(this._textInfo,(E,k)=>{const S=c+E.width/(o-E.height)/2*-T;S>P&&(P=S)}),C="left"==_?(P+d/2)*Bi:"right"==_?(P-d/2)*Bi:c*Bi,C=function qs(l){return(l%=360)<0&&(l+=360),l}(C),b=C>=270||C<=90}1==b&&v&&(this._textInfo.reverse(),this._textReversed=!0),I(this._textInfo,(P,C)=>{const E=P.height;m||(o+=E),(-1==T&&b||1==T&&!b)&&v&&P.textChunks.reverse();let k=c;d=0,"center"==_&&(k+=P.width/(o-E)/2*-T,d=k-c),k+=Math.PI*(b?0:1),i.save(),t&&a.save(),i.rotate(k),t&&a.rotate(k);let S=0;I(P.textChunks,(B,z)=>{const G=B.text,Z=B.width;S=Z/2/(o-E)*T,i.rotate(S),t&&a.rotate(S),B.style&&(i.save(),a.save(),i.font=B.style,t&&(a.font=B.style)),B.fill&&(i.save(),i.fillStyle=B.fill.toCSS()),i.textBaseline="middle",i.textAlign="center",t&&(a.textBaseline="middle",a.textAlign="center"),s&&i.fillText(G,0,(b?1:-1)*(0-o+E/2)),t&&a.fillText(G,0,(b?1:-1)*(0-o+E/2)),B.fill&&i.restore(),B.style&&(i.restore(),a.restore()),S=(Z/2+g)/(o-E)*T,i.rotate(S),t&&a.rotate(S)}),i.restore(),t&&a.restore(),m&&(o-=E)}),i.restore(),t&&a.restore()}}_measure(e){return"circular"===this.textType?this._measureCircular(e):super._measure(e)}_measureCircular(e){const t=e.layer.context,i=this._renderer._ghostLayer.context,s="rtl"==this.style.direction,a=this.style.oversizedBehavior,o=this.style.maxWidth,c=R(o)&&"truncate"==a,d=this.style.ellipsis||"";let f;this.textVisible=!0,this._textInfo=[],this._textReversed=!1,t.save(),i.save(),this._prerender(e,!0);const b=this.text.toString().replace(/\r/g,"").split(/\n/);let m=!0,_=0,g=0;return I(b,(T,v)=>{let E,k,S,P=gt.chunk(T,!1,this.style.ignoreFormatting),C={offsetY:g,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};I(P,(B,z)=>{if("format"==B.type){if("[/]"==B.text)m||(t.restore(),i.restore(),m=!0),k=void 0,E=void 0,S=void 0;else{let G=gt.getTextStyle(B.text);const Z=this._getFontStyle(G);t.save(),i.save(),t.font=Z,E=Z,G.fill&&(k=G.fill),G.width&&(S=dt(G.width)),m=!1}c&&(f=this._measureText(d,t))}else if("value"==B.type){const G=B.text.match(/./gu)||[];s&&G.reverse();for(let Z=0;Z<G.length;Z++){const V=G[Z],$=this._measureText(V,t);let ee=$.width;E&&S&&S>ee&&(ee=S);const Ce=$.actualBoundingBoxAscent+$.actualBoundingBoxDescent;if(Ce>C.height&&(C.height=Ce),$.actualBoundingBoxAscent>C.ascent&&(C.ascent=$.actualBoundingBoxAscent),_+=ee,c){f||(f=this._measureText(d,t));const Ye=f.actualBoundingBoxLeft+f.actualBoundingBoxRight;if(_+Ye>o){1==C.textChunks.length?this.textVisible=!1:(C.width+=Ye,C.left+=f.actualBoundingBoxLeft,C.right+=f.actualBoundingBoxRight,C.textChunks.push({style:E,fill:k,text:d,width:Ye,height:Ce+f.actualBoundingBoxDescent,left:f.actualBoundingBoxLeft,right:f.actualBoundingBoxRight,ascent:f.actualBoundingBoxAscent,offsetX:0,offsetY:Ce,textDecoration:void 0}));break}}if(C.width+=ee,C.left+=$.actualBoundingBoxLeft,C.right+=$.actualBoundingBoxRight,C.textChunks.push({style:E,fill:k,text:V,width:ee,height:Ce+$.actualBoundingBoxDescent,left:$.actualBoundingBoxLeft,right:$.actualBoundingBoxRight,ascent:$.actualBoundingBoxAscent,offsetX:0,offsetY:Ce,textDecoration:void 0}),s)break}}}),C.height*=this.style.lineHeight instanceof le?this.style.lineHeight.value:this.style.lineHeight||1.2,this._textInfo.push(C),g+=C.height}),m||(t.restore(),i.restore()),"hide"==a&&_>o&&(this.textVisible=!1),I(this._textInfo,T=>{I(T.textChunks,v=>{v.offsetY+=Math.round((T.height-v.height+(T.ascent-v.ascent))/2)})}),t.restore(),i.restore(),{left:0,top:0,right:0,bottom:0}}}class co extends Cr{constructor(e,t){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=t}_dispose(){super._dispose(),this._imageMask&&Dr(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){if(void 0===this.tainted&&(this.tainted=ro(this.image),e.layer.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(e.layer.dirty&&(this.shadowColor&&(e.layer.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(e.layer.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(e.layer.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(e.layer.context.shadowOffsetY=this.shadowOffsetY),e.layer.context.drawImage(this.image,0,0,this.width||this.image.naturalWidth,this.height||this.image.naturalHeight)),this.interactive&&this._isInteractive(e)){const t=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(t,0,0)}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(void 0===this._imageMask){const t=this.width||e.naturalWidth,i=this.height||e.naturalHeight,s=document.createElement("canvas");s.width=t,s.height=i;const a=s.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle=this._getColorId(),a.fillRect(0,0,t,i),ro(e)||(a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,t,i)),this._imageMask=s}return this._imageMask}}class fo{constructor(e,t,i,s){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.id=ti("touchevents")&&e instanceof Touch?e.identifier:null}}class wt extends Ia{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Ui}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.resolution=null==e?window.devicePixelRatio:e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new Oe(()=>{X(this._events,(t,i)=>{i.disposer.dispose()}),I(this.layers,t=>{Dr(t.view),t.exportableView&&Dr(t.exportableView)}),Dr(this._ghostLayer.view),Dr(this._patternCanvas)})),this._disposers.push(Rn(()=>{null==e&&(this.resolution=window.devicePixelRatio)})),ti("touchevents")){const t=i=>{0!==this._dragging.length&&En(this._dragging,s=>!s.value.shouldCancelTouch()||(i.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(Ae(window,"touchstart",t,{passive:!1})),this._disposers.push(Ae(this.view,"touchstart",t,{passive:!1})),this._disposers.push(Ae(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(Ae(window,"click",i=>{this._touchActive=!1},{passive:!0})),this._disposers.push(Ae(this.view,"click",i=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}ti("wheelevents")&&this._disposers.push(Ae(this.view,"wheel",t=>{let i=!1;this._hovering.forEach(s=>{if(s.wheelable)return i=!0,!1}),i&&t.preventDefault()},{passive:!1}))}resetImageArray(){this._ghostLayer.imageArray=void 0}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,t,i,s){return this.defaultLayer.context.createLinearGradient(e,t,i,s)}createRadialGradient(e,t,i,s,a,o){return this.defaultLayer.context.createRadialGradient(e,t,i,s,a,o)}createPattern(e,t,i,s,a){return this._patternCanvas.width=s,this._patternCanvas.height=a,this._patternContext.clearRect(0,0,s,a),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new so(this)}makeGraphics(){return new kt(this)}makeText(e,t){return new ho(this,e,t)}makeTextStyle(){return new an}makeRadialText(e,t){return new aa(this,e,t)}makePicture(e){return new co(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,t,i,s){this._realWidth=e,this._realHeight=t,this._calculatedWidth=i,this._calculatedHeight=s,I(this.layers,a=>{a&&(a.dirty=!0,this.resizeLayer(a))}),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=s+"px"}createDetachedLayer(e=!1){const t=document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:e}),s=new oa(t,i);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",s}getLayerByOrder(e){const t=this.layers,i=t.length;for(let s=0;s<i;s++){const a=t[s];if(a.order==e)return a}}getLayer(e,t=!0){let i=this.getLayerByOrder(e);if(i)return i;const s=this.createDetachedLayer(99==e);s.order=e,s.visible=t,s.view.className="am5-layer-"+e,s.visible&&this.resizeLayer(s);const a=this.layers;a.push(s),a.sort((f,b)=>f.order>b.order?1:f.order<b.order?-1:0);const o=a.length;let d;for(let f=Ut(a,s)+1;f<o;f++)if(a[f].visible){d=a[f];break}return s.visible&&(void 0===d?this._layerDom.appendChild(s.view):this._layerDom.insertBefore(s.view,d.view)),s}render(e){if(this._dirtyLayers.length=0,I(this.layers,t=>{t&&t.dirty&&t.visible&&(this._dirtyLayers.push(t),t.clear())}),this._ghostLayer.clear(),e.render({inactive:null,layer:this.defaultLayer}),this._ghostLayer.context.restore(),I(this.layers,t=>{if(t){const i=t.context;i.beginPath(),i.moveTo(0,0),i.stroke()}}),I(this._dirtyLayers,t=>{t.context.restore(),t.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){const{events:t,target:i,native:s}=this._lastPointerMoveEvent;I(t,a=>{this._dispatchGlobalMousemove(a,i,s)})}}paintId(e){const t=function io(l){const e=[0,0,0];for(let t=0;t<24;t++)e[t%3]<<=1,e[t%3]|=1&l,l>>=1;return(0|e[0])+(e[1]<<8)+(e[2]<<16)}(++this._colorId),i=J.fromHex(t).toCSS();return this._colorMap[i]=e,i}_removeObject(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){const t=this._ghostLayer.margin;return new DOMRect(-t.left,-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}getEvent(e,t=!0){const i=this.view.getBoundingClientRect(),s=e.clientX||0,a=e.clientY||0;return new fo(e,{x:s-i.left,y:a-i.top},{x:this._calculatedWidth/this._realWidth*(s-(t?i.left:0)),y:this._calculatedHeight/this._realHeight*(a-(t?i.top:0))},this._adjustBoundingBox(i))}_getHitTarget(e,t,i){if(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom||!i||!this._layerDom.contains(i))return;const s=this._ghostLayer.getImageData(e,t);if(0===s.data[0]&&0===s.data[1]&&0===s.data[2])return!1;const a=J.fromRGB(s.data[0],s.data[1],s.data[2]).toCSS();return this._colorMap[a]}getObjectAtPoint(e){const t=this._ghostLayer.getImageArray(e);if(0===t[0]&&0===t[1]&&0===t[2])return;const i=J.fromRGB(t[0],t[1],t[2]).toCSS();return this._colorMap[i]}_withEvents(e,t){const i=this._events[e];if(void 0!==i){i.dispatching=!0;try{t(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,Re(i.callbacks,s=>!s.disposed),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,t){this.interactionsEnabled&&this._withEvents(e,i=>{I(i.callbacks,s=>{s.disposed||s.callback.call(s.context,t)})})}_dispatchEvent(e,t,i){if(!this.interactionsEnabled)return!1;let s=!1;return this._withEvents(e,a=>{I(a.callbacks,o=>{!o.disposed&&o.object===t&&(o.callback.call(o.context,i),s=!0)})}),s}_dispatchMousedown(e,t){const i=e.button;if(0!=i&&2!=i&&1!=i&&void 0!==i)return;const s=this.getEvent(e),a=this._getHitTarget(s.originalPoint,s.bbox,t);if(a){const o=s.id;let c=!1;rn(a,d=>{const f={id:o,value:d};return this._mousedown.push(f),!c&&this._dispatchEvent("pointerdown",d,s)&&(c=!0,this._dragging.some(m=>m.value===d&&m.id===o)||this._dragging.push(f)),!0})}}_dispatchGlobalMousemove(e,t,i){const s=this.getEvent(e),a=this._getHitTarget(s.originalPoint,s.bbox,t);s.native=i,a?(this._hovering.forEach(o=>{o.contains(a)||(this._hovering.delete(o),o.cursorOverStyle&&Nt(document.body,"cursor",o._replacedCursorStyle),this._dispatchEvent("pointerout",o,s))}),s.native&&rn(a,o=>(this._hovering.has(o)||(this._hovering.add(o),o.cursorOverStyle&&(o._replacedCursorStyle=function Os(l,e){return l.style[e]}(document.body,"cursor"),Nt(document.body,"cursor",o.cursorOverStyle)),this._dispatchEvent("pointerover",o,s)),!0))):(this._hovering.forEach(o=>{o.cursorOverStyle&&Nt(document.body,"cursor",o._replacedCursorStyle),this._dispatchEvent("pointerout",o,s)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",s)}removeHovering(e){this._hovering.delete(e),e.cursorOverStyle&&Nt(document.body,"cursor",e._replacedCursorStyle)}_dispatchGlobalMouseup(e,t){const i=this.getEvent(e);i.native=t,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(e){if(0!==this._dragging.length){const t=this.getEvent(e),i=t.id;this._dragging.forEach(s=>{s.id===i&&this._dispatchEvent("pointermove",s.value,t)})}}_dispatchDragEnd(e,t){const i=e.button;let s;if(0==i||void 0===i)s="click";else if(2==i)s="rightclick";else{if(1!=i)return;s="middleclick"}const a=this.getEvent(e),o=a.id;if(0!==this._mousedown.length){const c=this._getHitTarget(a.originalPoint,a.bbox,t);c&&this._mousedown.forEach(d=>{d.id===o&&d.value.contains(c)&&this._dispatchEvent(s,d.value,a)}),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(c=>{c.id===o&&this._dispatchEvent("pointerup",c.value,a)}),this._dragging.length=0)}_dispatchDoubleClick(e,t){const i=this.getEvent(e),s=this._getHitTarget(i.originalPoint,i.bbox,t);s&&rn(s,a=>!this._dispatchEvent("dblclick",a,i))}_dispatchWheel(e,t){const i=this.getEvent(e),s=this._getHitTarget(i.originalPoint,i.bbox,t);s&&rn(s,a=>!this._dispatchEvent("wheel",a,i))}_makeSharedEvent(e,t){if(void 0===this._listeners[e]){const i=t();this._listeners[e]=new In(()=>{delete this._listeners[e],i.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,t){let i=!1,s=null;function a(){s=null,i=!1}return new st([new Oe(()=>{null!==s&&clearTimeout(s),a()}),Ae(this.view,Fn(e),o=>{i=!0,null!==s&&clearTimeout(s),s=window.setTimeout(a,0)}),eu(window,e,(o,c)=>{null!==s&&(clearTimeout(s),s=null),t(o,c,i),i=!1})])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{const t=(i,s,a)=>{this._lastPointerMoveEvent={events:i,target:s,native:a},I(i,o=>{this._dispatchGlobalMousemove(o,s,a)})};return new st([this._onPointerEvent("pointerdown",t),this._onPointerEvent("pointermove",t)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{const t=this._onPointerEvent("pointerup",(s,a,o)=>{I(s,c=>{this._dispatchGlobalMouseup(c,o)}),this._lastPointerMoveEvent={events:s,target:a,native:o}}),i=this._onPointerEvent("pointercancel",(s,a,o)=>{I(s,c=>{this._dispatchGlobalMouseup(c,o)}),this._lastPointerMoveEvent={events:s,target:a,native:o}});return new Oe(()=>{t.dispose(),i.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{const t=this._onPointerEvent("pointerdown",(o,c)=>{I(o,d=>{this._dispatchMousedown(d,c)})}),i=this._onPointerEvent("pointermove",o=>{I(o,c=>{this._dispatchDragMove(c)})}),s=this._onPointerEvent("pointerup",(o,c)=>{I(o,d=>{this._dispatchDragEnd(d,c)})}),a=this._onPointerEvent("pointercancel",(o,c)=>{I(o,d=>{this._dispatchDragEnd(d,c)})});return new Oe(()=>{t.dispose(),i.dispose(),s.dispose(),a.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(t,i)=>{I(t,s=>{this._dispatchDoubleClick(s,i)})}));case"wheel":return this._makeSharedEvent("wheel",()=>Ae(this.view,Fn("wheel"),t=>{this._dispatchWheel(t,Ms(t))},{passive:!1}))}}_addEvent(e,t,i,s){let a=this._events[t];void 0===a&&(a=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});const o={object:e,context:s,callback:i,disposed:!1};return a.callbacks.push(o),new Oe(()=>{o.disposed=!0,a.dispatching?a.cleanup=!0:(ot(a.callbacks,o),0===a.callbacks.length&&(a.disposer.dispose(),delete this._events[t]))})}getCanvas(e,t){this.render(e),t||(t={});let i=this.resolution,s=Math.floor(this._calculatedWidth*this.resolution),a=Math.floor(this._calculatedHeight*this.resolution);if(t.minWidth&&t.minWidth>s){let g=t.minWidth/s;g>i&&(i=g*this.resolution)}if(t.minHeight&&t.minHeight>a){let g=t.minHeight/a;g>i&&(i=g*this.resolution)}if(t.maxWidth&&t.maxWidth<s){let g=t.maxWidth/s;g<i&&(i=g*this.resolution)}if(t.maxHeight&&t.maxHeight>a){let g=t.maxHeight/a;g<i&&(i=g*this.resolution)}t.maintainPixelRatio&&(i/=this.resolution);const o=[];let c=!1;const d=document.createElement("canvas");i!=this.resolution&&(c=!0,s=s*i/this.resolution,a=a*i/this.resolution),d.width=s,d.height=a,d.style.position="fixed",d.style.top="-10000px",this.view.appendChild(d),o.push(d);const f=d.getContext("2d");let b=0,m=0,_=!1;return I(this.layers,g=>{if(g&&g.visible&&(g.tainted||c)){_=!0,g.exportableView=g.view,g.exportableContext=g.context,g.view=document.createElement("canvas"),g.view.style.position="fixed",g.view.style.top="-10000px",this.view.appendChild(g.view),o.push(g.view);let T=0,v=0;g.margin&&(T+=g.margin.left||0+g.margin.right||0,v+=g.margin.top||0+g.margin.bottom||0),g.view.width=s+T,g.view.height=a+v,g.context=g.view.getContext("2d"),g.dirty=!0,g.scale=i}}),_&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),I(this.layers,g=>{if(g&&g.visible){let T=0,v=0;g.margin&&(T=-(g.margin.left||0)*this.resolution,v=-(g.margin.top||0)*this.resolution),f.drawImage(g.view,T,v),g.exportableView&&(g.view=g.exportableView,g.exportableView=void 0),g.exportableContext&&(g.context=g.exportableContext,g.exportableContext=void 0),b<g.view.clientWidth&&(b=g.view.clientWidth),m<g.view.clientHeight&&(m=g.view.clientHeight),g.scale=void 0}}),d.style.width=b+"px",d.style.height=m+"px",I(o,g=>{g.style.position="",g.style.top="",this.view.removeChild(g)}),d}}class Ui{constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"imageArray",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,t,i,s,a){this._resolution=a,e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}getImageData(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}getImageArray(e){this.imageArray||(this.imageArray=this.context.getImageData(0,0,this._width,this._height).data);const t=this.imageArray,i=Math.round(e.x*this._resolution),a=4*(Math.round(e.y*this._resolution)*this._width+i);return[t[a],t[a+1],t[a+2],t[a+3]]}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,I(e,t=>{t.margin&&(this.margin.left=Math.max(this.margin.left,t.margin.left),this.margin.right=Math.max(this.margin.right,t.margin.right),this.margin.top=Math.max(this.margin.top,t.margin.top),this.margin.bottom=Math.max(this.margin.bottom,t.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class oa{constructor(e,t){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=t}resize(e,t,i,s,a){null!=this.width&&(e=this.width,i=this.width),null!=this.height&&(t=this.height,s=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,s+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=s+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}function la(l,e){null==l?requestAnimationFrame(e):setTimeout(()=>{requestAnimationFrame(e)},1e3/l)}class Ar{constructor(e,t={},i){if(Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new mr}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:en.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:Qs}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:ql.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:Qa.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:ai.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:ji.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:Pr.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:Xt.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");let s,a;if(this._settings=t,0==t.accessible&&(this._a11yD=!0),null==t.useSafeResolution&&(t.useSafeResolution=!0),t.useSafeResolution&&(s=function ja(){return function Ba(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document}()?1:void 0}()),this._renderer=new wt(s),a=e instanceof HTMLElement?e:document.getElementById(e),I(et.rootElements,d=>{if(d.dom===a)throw new Error("You cannot have multiple Roots on the same DOM node")}),this.interfaceColors=Wt.new(this,{}),null===a)throw new Error("Could not find HTML element with id `"+e+"`");this.dom=a;let o=document.createElement("div");o.style.position="relative",o.style.width="100%",o.style.height="100%",a.appendChild(o);const c=t.tooltipContainerBounds;c&&(this._tooltipContainerSettings=c),this._inner=o,this._updateComputedStyles(),et.rootElements.push(this)}static new(e,t){const i=new Ar(e,t,!0);return i._init(),i}moveDOM(e){let t;if(t=e instanceof HTMLElement?e:document.getElementById(e),t){for(;this.dom.childNodes.length>0;)t.appendChild(this.dom.childNodes[0]);this.dom=t,this._initResizeSensor(),this.resize()}}_handleLogo(){this._logo&&(this.dom.offsetWidth<=150||this.dom.offsetHeight<=60?this._logo.hide():this._logo.show())}_showBranding(){if(!this._logo){const e=this.tooltipContainer.children.push(ie.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:jt(100),centerY:W,tooltipText:"Created using amCharts 5",tooltipX:W,cursorOverStyle:"pointer",background:yt.new(this,{fill:Jr(4671320),fillOpacity:0,tooltipY:5})})),t=ni.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});t.label.setAll({fontSize:12}),t.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",t),e.events.on("click",()=>{window.open("https://www.amcharts.com/","_blank")}),e.states.create("hover",{}),e.children.push(ze.new(this,{stroke:Jr(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:Jr(3976191)}),e.children.push(ze.new(this,{stroke:Jr(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:Jr(4671320)}),this._logo=e,this._handleLogo()}}_getRealSize(){return this.dom.getBoundingClientRect()}_getCalculatedSize(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}_init(){const e=this._settings;!1!==e.accessible&&(e.focusable&&(this._inner.setAttribute("focusable","true"),this._inner.setAttribute("tabindex",this.tabindex+"")),e.ariaLabel&&this._inner.setAttribute("aria-label",e.ariaLabel),e.role&&this._inner.setAttribute("role",e.role));const t=this._renderer,i=this._getRealSize(),s=this._getCalculatedSize(i),a=Math.floor(s.width),o=Math.floor(s.height),c=Math.floor(i.width),d=Math.floor(i.height),f=ie.new(this,{visible:!0,width:a,height:o});this._rootContainer=f,this._rootContainer._defaultThemes.push(ct.new(this));const b=f.children.push(ie.new(this,{visible:!0,width:W,height:W}));this.container=b,t.resize(c,d,a,o),this._inner.appendChild(t.view),this._initResizeSensor();const m=document.createElement("div");if(this._htmlElementContainer=m,m.className="am5-html-container",m.style.position="absolute",m.style.pointerEvents="none",this._tooltipContainerSettings||(m.style.overflow="hidden"),this._inner.appendChild(m),!0!==this._a11yD){const _=document.createElement("div");_.className="am5-reader-container",_.setAttribute("role","alert"),_.style.position="absolute",_.style.width="1px",_.style.height="1px",_.style.overflow="hidden",_.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=_,this._inner.appendChild(this._readerAlertElement);const g=document.createElement("div");g.className="am5-focus-container",g.style.position="absolute",g.style.pointerEvents="none",g.style.top="0px",g.style.left="0px",g.style.overflow="hidden",g.style.width=a+"px",g.style.height=o+"px",g.setAttribute("role","graphics-document"),Li(g,!1),this._focusElementContainer=g,this._inner.appendChild(this._focusElementContainer);const T=document.createElement("div");this._tooltipElementContainer=T,T.className="am5-tooltip-container",this._inner.appendChild(T),ti("keyboardevents")&&(this._disposers.push(Ae(window,"keydown",v=>{16==v.keyCode?this._isShift=!0:9==v.keyCode&&(this._isShift=v.shiftKey)})),this._disposers.push(Ae(window,"keyup",v=>{16==v.keyCode&&(this._isShift=!1)})),this._disposers.push(Ae(g,"click",()=>{const v=this._focusedSprite;if(v){const P=t.getEvent(new MouseEvent("click"));v.events.dispatch("click",{type:"click",originalEvent:P.event,point:P.point,simulated:!0,target:v})}})),this._disposers.push(Ae(g,"keydown",v=>{const P=this._focusedSprite;if(P){27==v.keyCode&&(function Tl(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{let l=document.createElement("button");l.style.position="fixed",l.style.top="0px",l.style.left="-10000px",document.body.appendChild(l),l.focus(),l.blur(),document.body.removeChild(l)}}(),this._focusedSprite=void 0);let C=0,E=0;switch(v.keyCode){case 13:v.preventDefault();const k=t.getEvent(new MouseEvent("click"));return void P.events.dispatch("click",{type:"click",originalEvent:k.event,point:k.point,simulated:!0,target:P});case 37:C=-6;break;case 39:C=6;break;case 38:E=-6;break;case 40:E=6;break;default:return}if(0!=C||0!=E){if(v.preventDefault(),!P.isDragging()){this._keyboardDragPoint={x:0,y:0};const B=t.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));P.events.isEnabled("pointerdown")&&P.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:B.event,point:B.point,simulated:!0,target:P})}const k=this._keyboardDragPoint;k.x+=C,k.y+=E;const S=t.getEvent(new MouseEvent("mousemove",{clientX:k.x,clientY:k.y}),!1);P.events.isEnabled("globalpointermove")&&P.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:S.event,point:S.point,simulated:!0,target:P})}}})),this._disposers.push(Ae(g,"keyup",v=>{if(this._focusedSprite){const P=this._focusedSprite,C=v.keyCode;switch(C){case 37:case 39:case 38:case 40:if(P.isDragging()){const E=this._keyboardDragPoint,k=t.getEvent(new MouseEvent("mouseup",{clientX:E.x,clientY:E.y}));return P.events.isEnabled("globalpointerup")&&P.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:k.event,point:k.point,simulated:!0,target:P}),void(this._keyboardDragPoint=void 0)}if(P.get("focusableGroup")){const E=P.get("focusableGroup"),k=this._tabindexes.filter(z=>z.get("focusableGroup")==E&&!1!==z.getPrivate("focusable"));let S=k.indexOf(P);const B=k.length-1;S+=39==C||40==C?1:-1,S<0?S=B:S>B&&(S=0),function Ot(l){l&&l.focus()}(k[S].getPrivate("focusElement").dom)}}}})))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}_initResizeSensor(){this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new rs(this.dom,()=>{this.autoResize&&this.resize()}),this._disposers.push(this._resizeSensorDisposer)}resize(){const e=this._getRealSize(),t=this._getCalculatedSize(e),i=Math.floor(t.width),s=Math.floor(t.height);if(i>0&&s>0){const a=Math.floor(e.width),o=Math.floor(e.height),c=this._htmlElementContainer;if(c.style.width=i+"px",c.style.height=s+"px",!0!==this._a11yD){const f=this._focusElementContainer;f.style.width=i+"px",f.style.height=s+"px"}this._renderer.resize(a,o,i,s);const d=this._rootContainer;d.setPrivate("width",i),d.setPrivate("height",s),this._render(),this._handleLogo()}}_render(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}_runTickers(e){I(this._tickers,t=>{t(e)})}_runAnimations(e){let t=0;return Re(this._animations,i=>{const s=i._runAnimation(e);return s!==vt.Stopped&&(s===vt.Playing&&++t,!0)}),0===t}_runDirties(){let e={};for(;this._isDirtyParents;)this._isDirtyParents=!1,M(this._dirtyParents).forEach(o=>{const c=this._dirtyParents[o];delete this._dirtyParents[o],c.isDisposed()||(e[c.uid]=c,c._prepareChildren())});M(e).forEach(o=>{e[o]._updateChildren()});const t=[];M(this._dirty).forEach(o=>{const c=this._dirty[o];c.isDisposed()?delete this._dirty[c.uid]:(t.push(c),c._beforeChanged())}),t.forEach(o=>{o._changed(),delete this._dirty[o.uid],o._clearDirty()}),this._isDirty=!1;const i={},s=[];M(this._dirtyBounds).forEach(o=>{const c=this._dirtyBounds[o];delete this._dirtyBounds[o],c.isDisposed()||(i[c.uid]=c.depth(),s.push(c))}),this._positionHTMLElements(),s.sort((o,c)=>ri(i[c.uid],i[o.uid])),s.forEach(o=>{o._updateBounds()});const a=this._dirtyPositions;M(a).forEach(o=>{const c=a[o];delete a[o],c.isDisposed()||c._updatePosition()}),t.forEach(o=>{o._afterChanged()})}_renderFrame(e){if(this._updateTick){this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e);const t=this._runAnimations(e);return this._runDirties(),this._render(),this._renderer.resetImageArray(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),0===this._tickers.length&&t&&!this._isDirty}return!0}_runTicker(e,t){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||t||la(this.fps,this._ticker))}_runTickerNow(e=1e4){if(!this.isDisposed()){const t=performance.now()+e;for(;;){const i=performance.now();if(i>=t){this.animationTime=null;break}if(this.animationTime=i,this._renderFrame(i)){this.animationTime=null;break}}}}_startTicker(){null===this._ticker&&(this.animationTime=null,this._ticker=e=>{this._runTicker(e)},la(this.fps,this._ticker))}get updateTick(){return this._updateTick}set updateTick(e){this._updateTick=e,e&&this._startTicker()}_addDirtyEntity(e){void 0===this._dirty[e.uid]&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}_addDirtyParent(e){void 0===this._dirtyParents[e.uid]&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}_addDirtyBounds(e){void 0===this._dirtyBounds[e.uid]&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}_addDirtyPosition(e){void 0===this._dirtyPositions[e.uid]&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}_addAnimation(e){-1===this._animations.indexOf(e)&&this._animations.push(e),this._startTicker()}_markDirty(){this._isDirty=!0}_markDirtyRedraw(){this.events.once("frameended",()=>{this._isDirty=!0,this._startTicker()})}eachFrame(e){return this._tickers.push(e),this._startTicker(),new Oe(()=>{ot(this._tickers,e)})}markDirtyGlobal(e){e||(e=this.container),e.walkChildren(t=>{t instanceof ie&&this.markDirtyGlobal(t),t.markDirty(),t.markDirtyBounds()})}width(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}height(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}dispose(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),I(this._disposers,e=>{e.dispose()}),this._inner&&function Ra(l){l.parentNode&&l.parentNode.removeChild(l)}(this._inner),bt(et.rootElements,this))}isDisposed(){return this._isDisposed}readerAlert(e){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=qr(e))}setThemes(e){this._rootContainer.set("themes",e);const t=this.tooltipContainer;t&&t._applyThemes();const i=this.interfaceColors;i&&i._applyThemes()}_addTooltip(){if(!this.tooltipContainer){const e=this._tooltipContainerSettings,t=this._rootContainer.children.push(ie.new(this,{position:"absolute",isMeasured:!1,width:W,height:W,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=t;const i=ni.new(this,{});this.container.set("tooltip",i),i.hide(0),this._tooltip=i}}_registerTabindexOrder(e){1!=this._a11yD&&(e.get("focusable")?Vi(this._tabindexes,e):bt(this._tabindexes,e),this._invalidateTabindexes())}_unregisterTabindexOrder(e){1!=this._a11yD&&(bt(this._tabindexes,e),this._invalidateTabindexes())}_invalidateTabindexes(){if(1==this._a11yD)return;this._tabindexes.sort((t,i)=>{const s=t.get("tabindexOrder",0),a=i.get("tabindexOrder",0);return s==a?0:s>a?1:-1});const e=[];I(this._tabindexes,(t,i)=>{t.getPrivate("focusElement")?this._moveFocusElement(i,t):this._makeFocusElement(i,t);const s=t.get("focusableGroup");s&&!1!==t.getPrivate("focusable")&&(-1!==e.indexOf(s)?t.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):e.push(s))})}_updateCurrentFocus(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}_decorateFocusElement(e,t){if(1==this._a11yD||(t||(t=e.getPrivate("focusElement").dom),!t))return;const i=e.get("role");i?t.setAttribute("role",i):t.removeAttribute("role");const s=e.get("ariaLabel");if(s){const g=ts(e,s);t.setAttribute("aria-label",g)}else t.removeAttribute("aria-label");const a=e.get("ariaLive");a?t.setAttribute("aria-live",a):t.removeAttribute("aria-live");const o=e.get("ariaChecked");null!=o&&i&&-1!==["checkbox","option","radio","menuitemcheckbox","menuitemradio","treeitem"].indexOf(i)?t.setAttribute("aria-checked",o?"true":"false"):t.removeAttribute("aria-checked"),e.get("ariaHidden")?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden");const c=e.get("ariaOrientation");c?t.setAttribute("aria-orientation",c):t.removeAttribute("aria-orientation");const d=e.get("ariaValueNow");d?t.setAttribute("aria-valuenow",d):t.removeAttribute("aria-valuenow");const f=e.get("ariaValueMin");f?t.setAttribute("aria-valuemin",f):t.removeAttribute("aria-valuemin");const b=e.get("ariaValueMax");b?t.setAttribute("aria-valuemax",b):t.removeAttribute("aria-valuemax");const m=e.get("ariaValueText");m?t.setAttribute("aria-valuetext",m):t.removeAttribute("aria-valuetext");const _=e.get("ariaControls");_?t.setAttribute("aria-controls",_):t.removeAttribute("aria-controls"),e.get("visible")&&0!==e.get("opacity")&&"tooltip"!=e.get("role")&&!e.isHidden()&&!1!==e.getPrivate("focusable")?("-1"!=t.getAttribute("tabindex")&&t.setAttribute("tabindex",""+this.tabindex),t.removeAttribute("aria-hidden")):(t.removeAttribute("tabindex"),t.setAttribute("aria-hidden","true"))}_makeFocusElement(e,t){if(t.getPrivate("focusElement")||1==this._a11yD)return;const i=document.createElement("div");"tooltip"!=t.get("role")&&(i.tabIndex=this.tabindex),i.style.position="absolute",Li(i,!1);const s=[];t.setPrivate("focusElement",{dom:i,disposers:s}),this._decorateFocusElement(t),s.push(Ae(i,"focus",a=>{this._handleFocus(a,e)})),s.push(Ae(i,"blur",a=>{this._handleBlur(a,e)})),this._moveFocusElement(e,t)}_removeFocusElement(e){if(1==this._a11yD)return;bt(this._tabindexes,e);const t=e.getPrivate("focusElement");t&&(this._focusElementContainer.removeChild(t.dom),I(t.disposers,s=>{s.dispose()}))}_hideFocusElement(e){1!=this._a11yD&&(e.getPrivate("focusElement").dom.style.display="none")}_moveFocusElement(e,t){if(1==this._a11yD)return;const i=this._focusElementContainer,s=t.getPrivate("focusElement").dom;if(s===this._focusElementContainer.children[e])return;const a=this._focusElementContainer.children[e+1];a?i.insertBefore(s,a):i.append(s)}_positionFocusElement(e){if(1==this._a11yD||null==e)return;const t=e.globalBounds();let i=t.right==t.left?e.width():t.right-t.left,s=t.top==t.bottom?e.height():t.bottom-t.top;const a=void 0!==this._settings.focusPadding?this._settings.focusPadding:2;let o=t.left-a,c=t.top-a;i<0&&(o+=i,i=Math.abs(i)),s<0&&(c+=s,s=Math.abs(s));const d=e.getPrivate("focusElement").dom;d.style.top=c+"px",d.style.left=o+"px",d.style.width=i+2*a+"px",d.style.height=s+2*a+"px"}_handleFocus(e,t){if(1==this._a11yD)return;const i=this._tabindexes[t];i.isVisibleDeep()?(this._positionFocusElement(i),this._focusedSprite=i,i.events.isEnabled("focus")&&i.events.dispatch("focus",{type:"focus",originalEvent:e,target:i})):this._focusNext(e.target,this._isShift?-1:1)}_focusNext(e,t){if(1==this._a11yD)return;const i=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(",")));let s=i.indexOf(e)+t;s<0?s=i.length-1:s>=i.length&&(s=0),i[s].focus()}_handleBlur(e,t){if(1==this._a11yD)return;const i=this._focusedSprite;i&&!i.isDisposed()&&i.events.isEnabled("blur")&&i.events.dispatch("blur",{type:"blur",originalEvent:e,target:i}),this._focusedSprite=void 0}updateTooltip(e){if(1==this._a11yD)return;const t=qr(e._getText());let i=e.getPrivate("tooltipElement");"tooltip"==e.get("role")&&""!=t?(i||(i=this._makeTooltipElement(e)),i.innerHTML!=t&&(i.innerHTML=t)):i&&(i.remove(),e.removePrivate("tooltipElement"))}_makeTooltipElement(e){const t=this._tooltipElementContainer,i=document.createElement("div");return i.style.position="absolute",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",i.style.clip="rect(1px, 1px, 1px, 1px)",Li(i,!1),this._decorateFocusElement(e,i),t.append(i),e.setPrivate("tooltipElement",i),i}_removeTooltipElement(e){if(1==this._a11yD)return;const t=e.getPrivate("tooltipElement");if(t){const i=t.parentElement;i&&i.removeChild(t)}}_invalidateAccessibility(e){if(1==this._a11yD)return;this._focusElementDirty=!0;const t=e.getPrivate("focusElement");e.get("focusable")?t&&(this._decorateFocusElement(e),this._positionFocusElement(e)):t&&this._removeFocusElement(e)}focused(e){return this._focusedSprite===e}documentPointToRoot(e){const t=this._getRealSize(),i=this._getCalculatedSize(t);return{x:i.width/t.width*(e.x-t.left),y:i.height/t.height*(e.y-t.top)}}rootPointToDocument(e){const t=this._getRealSize(),i=this._getCalculatedSize(t);return{x:e.x/(i.width/t.width)+t.left,y:e.y/(i.height/t.height)+t.top}}addDisposer(e){return this._disposers.push(e),e}_updateComputedStyles(){const e=window.getComputedStyle(this.dom);let t="";X(e,(s,a)=>{Gi(s)&&s.match(/^font/)&&(t+=a)});const i=t!=this._fontHash;return i&&(this._fontHash=t),i}_checkComputedStyles(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}_invalidateLabelBounds(e){e instanceof ie?e.children.each(t=>{this._invalidateLabelBounds(t)}):e instanceof zt&&e.markDirtyBounds()}_hasLicense(){for(let e=0;e<et.licenses.length;e++)if(et.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}_licenseApplied(){this._logo&&this._logo.set("forceHidden",!0)}get debugGhostView(){return this._renderer.debugGhostView}set debugGhostView(e){this._renderer.debugGhostView=e}set tapToActivate(e){this._renderer.tapToActivate=e}get tapToActivate(){return this._renderer.tapToActivate}set tapToActivateTimeout(e){this._renderer.tapToActivateTimeout=e}get tapToActivateTimeout(){return this._renderer.tapToActivateTimeout}_makeHTMLElement(e){const t=this._htmlElementContainer,i=document.createElement("div");return e.setPrivate("htmlElement",i),i.style.position="absolute",i.style.overflow="auto",i.style.boxSizing="border-box",Li(i,e.get("interactive",!1)),e.events.isEnabled("click")&&(Li(i,!0),this._disposers.push(Ae(i,"click",s=>{const a=this._renderer.getEvent(s);e.events.dispatch("click",{type:"click",originalEvent:a.event,point:a.point,simulated:!1,target:e})}))),this._positionHTMLElement(e),t.append(i),Vi(this._htmlEnabledContainers,e),i}_positionHTMLElements(){I(this._htmlEnabledContainers,e=>{this._positionHTMLElement(e)})}_positionHTMLElement(e){const t=e.getPrivate("htmlElement");if(t){I(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],m=>{const _=e.get(m);t.style[m]=_?_+"px":""});const s=e.compositeOpacity();setTimeout(()=>{t.style.opacity=s+""},10);const a=e.isVisibleDeep();a&&(t.style.display="block");const o=e.globalBounds();t.style.top=o.top+"px",t.style.left=o.left+"px";const c=e.get("width"),d=e.get("height");let f=0,b=0;if(c&&(f=e.width()),d&&(b=e.height()),c&&d)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{t.style.position="fixed",t.style.width="",t.style.height="";const m=t.getBoundingClientRect();t.style.position="absolute",f=m.width,b=m.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",f),e.setPrivate("minHeight",b)}f>0&&(t.style.minWidth=f+"px"),b>0&&(t.style.minHeight=b+"px"),(!a||0==s)&&(t.style.display="none")}}_setHTMLContent(e,t){let i=e.getPrivate("htmlElement");i||(i=this._makeHTMLElement(e)),i.innerHTML!=t&&(i.innerHTML=t)}_removeHTMLContent(e){let t=e.getPrivate("htmlElement");t&&(this._htmlElementContainer.removeChild(t),e.removePrivate("htmlElement")),bt(this._htmlEnabledContainers,e)}}const ua=class po extends Di{setupDefaultRules(){super.setupDefaultRules(),this.rule("Component").setAll({interpolationDuration:600}),this.rule("Hierarchy").set("animationDuration",600),this.rule("Scrollbar").set("animationDuration",600),this.rule("Tooltip").set("animationDuration",300),this.rule("MapChart").set("animationDuration",1e3),this.rule("MapChart").set("wheelDuration",300),this.rule("Entity").setAll({stateAnimationDuration:600}),this.rule("Sprite").states.create("default",{stateAnimationDuration:600}),this.rule("Tooltip",["axis"]).setAll({animationDuration:200}),this.rule("WordCloud").set("animationDuration",500),this.rule("Polygon").set("animationDuration",600),this.rule("ArcDiagram").set("animationDuration",600)}};class Sr extends Be{_afterNew(){super._afterNewApplyThemes(),this._dirty.colors=!1}_beforeChanged(){this.isDirty("colors")&&this.reset()}generateColors(){this.setPrivate("currentPass",this.getPrivate("currentPass",0)+1);const e=this.getPrivate("currentPass"),t=this.get("colors",[this.get("baseColor",J.fromHex(16711680))]);this.getPrivate("numColors")||this.setPrivate("numColors",t.length);const i=this.getPrivate("numColors"),a=this.get("passOptions"),o=this.get("reuse");for(let c=0;c<i;c++)if(o)t.push(t[c]);else{const d=t[c].toHSL();let f=d.h+(a.hue||0)*e;for(;f>1;)f-=1;let b=d.s+(a.saturation||0)*e;b>1&&(b=1),b<0&&(b=0);let m=d.l+(a.lightness||0)*e;for(;m>1;)m-=1;t.push(J.fromHSL(f,b,m))}}getIndex(e){const t=this.get("colors",[]),i=this.get("saturation");return e>=t.length?(this.generateColors(),this.getIndex(e)):null!=i?J.saturate(t[e],i):t[e]}next(){let e=this.getPrivate("currentStep",this.get("startIndex",0));return this.setPrivate("currentStep",e+this.get("step",1)),this.getIndex(e)}reset(){this.setPrivate("currentStep",this.get("startIndex",0)),this.setPrivate("currentPass",0)}}Object.defineProperty(Sr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColorSet"}),Object.defineProperty(Sr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Be.classNames.concat([Sr.className])});let ls={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2629742400,year:31536e6};function $i(l,e){return null==e&&(e=1),ls[l]*e}function Qi(l,e,t,i,s,a,o){if(!o||s){let c=0;switch(!s&&"millisecond"!=e&&(c=l.getTimezoneOffset(),l.setUTCMinutes(l.getUTCMinutes()-c)),e){case"day":let d=l.getUTCDate();if(t>1){if(a){a=Qi(a,"day",1);let C=l.getTime()-a.getTime(),E=Math.floor(C/$i("day")/t),k=$i("day",E*t);l.setTime(a.getTime()+k-c*$i("minute"))}}else l.setUTCDate(d);l.setUTCHours(0,0,0,0);break;case"second":let f=l.getUTCSeconds();t>1&&(f=Math.floor(f/t)*t),l.setUTCSeconds(f,0);break;case"millisecond":if(1==t)return l;let b=l.getUTCMilliseconds();b=Math.floor(b/t)*t,l.setUTCMilliseconds(b);break;case"hour":let m=l.getUTCHours();t>1&&(m=Math.floor(m/t)*t),l.setUTCHours(m,0,0,0);break;case"minute":let _=l.getUTCMinutes();t>1&&(_=Math.floor(_/t)*t),l.setUTCMinutes(_,0,0);break;case"month":let g=l.getUTCMonth();t>1&&(g=Math.floor(g/t)*t),l.setUTCMonth(g,1),l.setUTCHours(0,0,0,0);break;case"year":let T=l.getUTCFullYear();t>1&&(T=Math.floor(T/t)*t),l.setUTCFullYear(T,0,1),l.setUTCHours(0,0,0,0);break;case"week":let v=l.getUTCDate(),P=l.getUTCDay();R(i)||(i=1),v=P>=i?v-P+i:v-(7+P)+i,l.setUTCDate(v),l.setUTCHours(0,0,0,0)}if(!s&&"millisecond"!=e&&(l.setUTCMinutes(l.getUTCMinutes()+c),"day"==e||"week"==e||"month"==e||"year"==e)){let d=l.getTimezoneOffset();if(d!=c){let f=d-c;l.setUTCMinutes(l.getUTCMinutes()+f)}}return l}{if(isNaN(l.getTime()))return l;let c=o.offsetUTC(l),d=l.getTimezoneOffset(),f=o.parseDate(l),b=f.year,m=f.month,_=f.day,g=f.hour,T=f.minute,v=f.second,P=f.millisecond,C=f.weekday,E=c-d;switch(e){case"day":if(t>1&&a){a=Qi(a,"day",1,i,s,void 0,o);let z=l.getTime()-a.getTime(),G=Math.floor(z/$i("day")/t),Z=$i("day",G*t);l.setTime(a.getTime()+Z),f=o.parseDate(l),b=f.year,m=f.month,_=f.day}g=0,T=E,v=0,P=0;break;case"second":T+=E,t>1&&(v=Math.floor(v/t)*t),P=0;break;case"millisecond":T+=E,t>1&&(P=Math.floor(P/t)*t);break;case"hour":t>1&&(g=Math.floor(g/t)*t),T=E,v=0,P=0;break;case"minute":t>1&&(T=Math.floor(T/t)*t),T+=E,v=0,P=0;break;case"month":t>1&&(m=Math.floor(m/t)*t),_=1,g=0,T=E,v=0,P=0;break;case"year":t>1&&(b=Math.floor(b/t)*t),m=0,_=1,g=0,T=E,v=0,P=0;break;case"week":R(i)||(i=1),_=C>=i?_-C+i:_-(7+C)+i,g=0,T=E,v=0,P=0}let k=(l=new Date(b,m,_,g,T,v,P)).getTimezoneOffset(),B=o.offsetUTC(l)-k;return B!=E&&l.setTime(l.getTime()+6e4*(B-E)),l}}class _o extends Di{setupDefaultRules(){super.setupDefaultRules();const e=this._root.interfaceColors,t=this._root.language,i=this.rule.bind(this);i("XYChart").setAll({colors:Sr.new(this._root,{}),paddingLeft:20,paddingRight:20,paddingTop:16,paddingBottom:16,panX:!1,panY:!1,wheelStep:.25,arrangeTooltips:!0,pinchZoomX:!1,pinchZoomY:!1}),i("XYSeries").setAll({legendLabelText:"{name}"}),i("XYChart",["scrollbar","chart"]).setAll({paddingBottom:0,paddingLeft:0,paddingTop:0,paddingRight:0,colors:Sr.new(this._root,{saturation:0})});{const d=i("Graphics",["scrollbar","overlay"]);d.setAll({fillOpacity:.5}),K(d,"fill",e,"background")}i("RoundedRectangle",["xy","scrollbar","thumb"]).setAll({cornerRadiusTR:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusBL:0,fillOpacity:0,focusable:!0}),i("RoundedRectangle",["xy","scrollbar","thumb"]).states.create("hover",{fillOpacity:.4}),i("RoundedRectangle",["xy","scrollbar","chart","background"]).setAll({cornerRadiusTL:0,cornerRadiusBL:0,cornerRadiusTR:0,cornerRadiusBR:0}),i("RoundedRectangle",["xy","scrollbar","chart","background","resize","button"]).setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),i("AxisRendererX",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0}),i("AxisRendererY",["xy","chart","scrollbar"]).setAll({strokeOpacity:0,inside:!0,minGridDistance:5}),i("AxisLabel",["xy","scrollbar","x"]).setAll({opacity:.5,centerY:W,minPosition:.01,maxPosition:.99,fontSize:"0.8em"}),i("AxisLabel",["category"]).setAll({text:"{category}",populateText:!0}),i("AxisLabel",["x"]).setAll({centerY:0}),i("AxisLabel",["x","inside"]).setAll({centerY:W}),i("AxisLabel",["x","inside","opposite"]).setAll({centerY:0}),i("AxisLabel",["x","opposite"]).setAll({centerY:W}),i("AxisLabel",["y"]).setAll({centerX:W}),i("AxisLabel",["y","inside"]).setAll({centerX:0}),i("AxisLabel",["y","inside","opposite"]).setAll({centerX:W}),i("AxisLabel",["y","opposite"]).setAll({centerX:0}),i("AxisLabel",["minor"]).setAll({fontSize:"0.6em"}),i("AxisLabel",["xy","scrollbar","y"]).setAll({visible:!1}),i("Grid",["xy","scrollbar","y"]).setAll({visible:!1}),i("Grid",["xy","scrollbar","x"]).setAll({opacity:.5}),i("XYCursor").setAll({behavior:"none",layer:30,exportable:!1,snapToSeriesBy:"xy",moveThreshold:1});{const d=i("Grid",["cursor","x"]);d.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:t.translate("Use left and right arrows to move selection")}),K(d,"stroke",e,"alternativeBackground")}{const d=i("Grid",["cursor","y"]);d.setAll({strokeOpacity:.8,strokeDasharray:[2,2],ariaLabel:t.translate("Use up and down arrows to move selection")}),K(d,"stroke",e,"alternativeBackground")}{const d=i("Graphics",["cursor","selection"]);d.setAll({fillOpacity:.15}),K(d,"fill",e,"alternativeBackground")}i("Axis").setAll({start:0,end:1,minZoomCount:1,maxZoomCount:1/0,maxZoomFactor:1e3,maxDeviation:.1,snapTooltip:!0,tooltipLocation:.5,panX:!0,panY:!0,zoomX:!0,zoomY:!0,fixAxisSize:!0}),i("AxisLabel").setAll({location:.5,multiLocation:0,centerX:ge,centerY:ge,paddingTop:3,paddingBottom:3,paddingLeft:5,paddingRight:5}),i("Container",["axis","header"]).setAll({layer:30}),i("Rectangle",["axis","header","background"]).setAll({crisp:!0});{const d=i("AxisRenderer");d.setAll({crisp:!0,strokeOpacity:0}),K(d,"stroke",e,"grid")}i("AxisRendererX").setAll({minGridDistance:120,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,width:W}),i("AxisRendererY").setAll({minGridDistance:40,opposite:!1,inversed:!1,cellStartLocation:0,cellEndLocation:1,height:W});{const d=i("Rectangle",["axis","thumb"]);d.setAll({fillOpacity:0}),K(d,"fill",e,"alternativeBackground"),d.states.create("hover",{fillOpacity:.1})}i("Rectangle",["axis","thumb","x"]).setAll({cursorOverStyle:"ew-resize"}),i("Rectangle",["axis","thumb","y"]).setAll({cursorOverStyle:"ns-resize"});{const d=i("Grid");d.setAll({location:0,strokeOpacity:.15,crisp:!0}),K(d,"stroke",e,"grid")}{const d=i("Grid",["minor"]);d.setAll({location:0,strokeOpacity:.07,crisp:!0}),K(d,"stroke",e,"grid")}i("Grid",["base"]).setAll({strokeOpacity:.3});{const d=i("Graphics",["axis","fill"]);d.setAll({visible:!1,isMeasured:!1,position:"absolute",fillOpacity:.05}),K(d,"fill",e,"alternativeBackground")}i("Graphics",["axis","fill","range"]).setAll({isMeasured:!0}),i("Graphics",["series","fill","range"]).setAll({visible:!1,isMeasured:!0}),i("Grid",["series","range"]).setAll({visible:!1}),i("AxisTick",["series","range"]).setAll({visible:!1}),i("AxisLabel",["series","range"]).setAll({visible:!1});{const d=i("AxisTick");d.setAll({location:.5,multiLocation:0,strokeOpacity:1,isMeasured:!1,position:"absolute",visible:!1}),K(d,"stroke",e,"grid")}i("CategoryAxis").setAll({startLocation:0,endLocation:1,fillRule:(d,f)=>{const b=d.get("axisFill");b&&(R(f)&&f%2!=0?b.setPrivate("visible",!1):b.setPrivate("visible",!0))}});const s=[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:5},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:50},{timeUnit:"millisecond",count:100},{timeUnit:"millisecond",count:500},{timeUnit:"second",count:1},{timeUnit:"second",count:5},{timeUnit:"second",count:10},{timeUnit:"second",count:30},{timeUnit:"minute",count:1},{timeUnit:"minute",count:5},{timeUnit:"minute",count:10},{timeUnit:"minute",count:15},{timeUnit:"minute",count:30},{timeUnit:"hour",count:1},{timeUnit:"hour",count:3},{timeUnit:"hour",count:6},{timeUnit:"hour",count:12},{timeUnit:"day",count:1},{timeUnit:"day",count:2},{timeUnit:"day",count:3},{timeUnit:"day",count:4},{timeUnit:"day",count:5},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"month",count:2},{timeUnit:"month",count:3},{timeUnit:"month",count:6},{timeUnit:"year",count:1},{timeUnit:"year",count:2},{timeUnit:"year",count:5},{timeUnit:"year",count:10},{timeUnit:"year",count:50},{timeUnit:"year",count:100},{timeUnit:"year",count:200},{timeUnit:"year",count:500},{timeUnit:"year",count:1e3},{timeUnit:"year",count:2e3},{timeUnit:"year",count:5e3},{timeUnit:"year",count:1e4},{timeUnit:"year",count:1e5}],a={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_hour"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month"),year:t.translate("_date_year")},o={millisecond:t.translate("_date_millisecond"),second:t.translate("_date_second"),minute:t.translate("_date_minute"),hour:t.translate("_date_day"),day:t.translate("_date_day"),week:t.translate("_date_day"),month:t.translate("_date_month")+" "+t.translate("_date_year"),year:t.translate("_date_year")},c={millisecond:t.translate("_date_millisecond_full"),second:t.translate("_date_second_full"),minute:t.translate("_date_minute_full"),hour:t.translate("_date_hour_full"),day:t.translate("_date_day_full"),week:t.translate("_date_week_full"),month:t.translate("_date_month_full"),year:t.translate("_date_year")};i("CategoryDateAxis").setAll({markUnitChange:!0,gridIntervals:Ln(s),dateFormats:F(a),periodChangeDateFormats:F(o)}),i("DateAxis").setAll({maxZoomFactor:null,strictMinMax:!0,startLocation:0,endLocation:1,markUnitChange:!0,groupData:!1,groupCount:500,gridIntervals:Ln(s),dateFormats:F(a),periodChangeDateFormats:F(o),tooltipDateFormats:c,groupIntervals:[{timeUnit:"millisecond",count:1},{timeUnit:"millisecond",count:10},{timeUnit:"millisecond",count:100},{timeUnit:"second",count:1},{timeUnit:"second",count:10},{timeUnit:"minute",count:1},{timeUnit:"minute",count:10},{timeUnit:"hour",count:1},{timeUnit:"day",count:1},{timeUnit:"week",count:1},{timeUnit:"month",count:1},{timeUnit:"year",count:1}],fillRule:d=>{const f=d.get("axisFill");if(f){const b=d.component,m=d.get("value"),_=d.get("endValue"),g=b.intervalDuration(),T=b.getPrivate("baseInterval"),v=b.getPrivate("gridInterval",T);let P=b.getPrivate("min",0);if(P=Qi(new Date(P),v.timeUnit,v.count,this._root.locale.firstDayOfWeek,this._root.utc,void 0,this._root.timezone).getTime(),null!=m&&null!=_){const C=Math.round(Math.round((m-P)/g))/2;C==Math.round(C)?f.setPrivate("visible",!0):f.setPrivate("visible",!1)}}}}),i("GaplessDateAxis").setAll({fillRule:d=>{const f=d.get("axisFill");if(f){const b=d.get("index");let m=!1;(!R(b)||b%2==0)&&(m=!0),f.setPrivate("visible",m)}}}),i("ValueAxis").setAll({baseValue:0,logarithmic:!1,strictMinMax:!1,autoZoom:!0,fillRule:d=>{const f=d.get("axisFill");if(f){const b=d.component,m=d.get("value"),_=b.getPrivate("step");R(m)&&R(_)&&(tt(m/_/2,5)==Math.round(m/_/2)?f.setPrivate("visible",!1):f.setPrivate("visible",!0))}}}),i("DurationAxis").setAll({baseUnit:"second"}),i("XYSeries").setAll({maskBullets:!0,stackToNegative:!0,locationX:.5,locationY:.5,snapTooltip:!1,openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close",seriesTooltipTarget:"series"}),i("BaseColumnSeries").setAll({adjustBulletPosition:!0}),i("ColumnSeries").setAll({clustered:!0}),i("RoundedRectangle",["series","column"]).setAll({position:"absolute",isMeasured:!1,width:jt(70),height:jt(70),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),i("LineSeries").setAll({connect:!0,autoGapCount:1.1,stackToNegative:!1}),i("Graphics",["series","stroke"]).setAll({position:"absolute",strokeWidth:1,strokeOpacity:1,isMeasured:!1}),i("Graphics",["series","fill"]).setAll({visible:!1,fillOpacity:0,position:"absolute",strokeWidth:0,strokeOpacity:0,isMeasured:!1}),i("Graphics",["line","series","legend","marker","stroke"]).setAll({draw:(d,f)=>{const b=f.parent;if(b){const m=b.height(),_=b.width();d.moveTo(0,m/2),d.lineTo(_,m/2)}}}),K(i("Graphics",["line","series","legend","marker","stroke"]).states.create("disabled",{}),"stroke",e,"disabled"),i("Graphics",["line","series","legend","marker","fill"]).setAll({draw:(d,f)=>{const b=f.parent;if(b){const m=b.height(),_=b.width();d.moveTo(0,0),d.lineTo(_,0),d.lineTo(_,m),d.lineTo(0,m),d.lineTo(0,0)}}}),K(i("Graphics",["line","series","legend","marker","fill"]).states.create("disabled",{}),"stroke",e,"disabled"),i("SmoothedXYLineSeries").setAll({tension:.5}),i("SmoothedXLineSeries").setAll({tension:.5}),i("SmoothedYLineSeries").setAll({tension:.5}),i("Candlestick").setAll({position:"absolute",isMeasured:!1,width:jt(50),height:jt(50),strokeWidth:1,strokeOpacity:1,cornerRadiusBL:0,cornerRadiusTL:0,cornerRadiusBR:0,cornerRadiusTR:0,fillOpacity:1,role:"figure"}),i("OHLC").setAll({width:jt(80),height:jt(80)}),i("CandlestickSeries").setAll({lowValueXGrouped:"low",lowValueYGrouped:"low",highValueXGrouped:"high",highValueYGrouped:"high",openValueXGrouped:"open",openValueYGrouped:"open",valueXGrouped:"close",valueYGrouped:"close"});{const d=i("Rectangle",["column","autocolor"]).states.create("riseFromOpen",{});K(d,"fill",e,"positive"),K(d,"stroke",e,"positive")}{const d=i("Rectangle",["column","autocolor"]).states.create("dropFromOpen",{});K(d,"fill",e,"negative"),K(d,"stroke",e,"negative")}i("Rectangle",["column","autocolor","pro"]).states.create("riseFromOpen",{fillOpacity:0}),i("Rectangle",["column","autocolor","pro"]).states.create("dropFromOpen",{fillOpacity:1});{const d=i("Rectangle",["column","autocolor","pro"]).states.create("riseFromPrevious",{});K(d,"fill",e,"positive"),K(d,"stroke",e,"positive")}{const d=i("Rectangle",["column","autocolor","pro"]).states.create("dropFromPrevious",{});K(d,"fill",e,"negative"),K(d,"stroke",e,"negative")}i("RoundedRectangle",["rangegrip"]).setAll({strokeOpacity:0,fillOpacity:0,strokeWidth:1,width:12,height:12});{const d=i("Graphics",["rangegrip","button","icon"]);d.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:f=>{f.moveTo(0,.5),f.lineTo(0,12.5),f.moveTo(2,.5),f.lineTo(2,12.5),f.moveTo(4,.5),f.lineTo(4,12.5)}}),K(d,"stroke",e,"secondaryButtonText")}i("Button",["rangegrip"]).setAll({draggable:!0,paddingTop:0,paddingBottom:0}),i("Button",["rangegrip","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize",centerX:ge}),i("Button",["rangegrip","horizontal"]).setAll({cursorOverStyle:"ew-resize",centerX:ge}),i("Button",["rangegrip","vertical","left"]).setAll({centerY:W}),i("Button",["rangegrip","vertical","right"]).setAll({centerY:0}),i("Button",["rangegrip","horizontal","top"]).setAll({centerY:0}),i("Button",["rangegrip","horizontal","bottom"]).setAll({centerY:W})}}class Ke extends ie{constructor(){super(...arguments),Object.defineProperty(this,"chartContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{width:W,height:W,interactiveChildren:!1}))}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{interactiveChildren:!1,isMeasured:!1,position:"absolute",width:W,height:W})})}}Object.defineProperty(Ke,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Chart"}),Object.defineProperty(Ke,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([Ke.className])});class mt extends Ke{constructor(){super(...arguments),Object.defineProperty(this,"seriesContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{width:W,height:W,isMeasured:!1})}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:new Ys})}_afterNew(){super._afterNew(),this._disposers.push(this.series);const e=this.seriesContainer.children;this._disposers.push(this.series.events.onAll(t=>{if("clear"===t.type){I(t.oldValues,s=>{this._removeSeries(s)});const i=this.get("colors");i&&i.reset()}else if("push"===t.type)e.moveValue(t.newValue),this._processSeries(t.newValue);else if("setIndex"===t.type)e.setIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("insertIndex"===t.type)e.insertIndex(t.index,t.newValue),this._processSeries(t.newValue);else if("removeIndex"===t.type)this._removeSeries(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IListEvent type");e.moveValue(t.value,t.newIndex),this._processSeries(t.value)}}))}_processSeries(e){e.chart=this,e._placeBulletsContainer(this)}_removeSeries(e){e.isDisposed()||(this.seriesContainer.children.removeValue(e),e._removeBulletsContainer())}}Object.defineProperty(mt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"SerialChart"}),Object.defineProperty(mt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ke.classNames.concat([mt.className])});class Or extends yt{_beforeChanged(){super._beforeChanged(),(this.isDirty("cornerRadiusTL")||this.isDirty("cornerRadiusTR")||this.isDirty("cornerRadiusBR")||this.isDirty("cornerRadiusBL"))&&(this._clear=!0)}_draw(){let e=this.width(),t=this.height(),i=e,s=t,a=i/Math.abs(e),o=s/Math.abs(t);if(R(i)&&R(s)){let c=Math.min(i,s)/2,d=qe(this.get("cornerRadiusTL",8),c),f=qe(this.get("cornerRadiusTR",8),c),b=qe(this.get("cornerRadiusBR",8),c),m=qe(this.get("cornerRadiusBL",8),c),_=Math.min(Math.abs(i/2),Math.abs(s/2));d=je(d,0,_),f=je(f,0,_),b=je(b,0,_),m=je(m,0,_);const g=this._display;g.moveTo(d*a,0),g.lineTo(i-f*a,0),f>0&&g.arcTo(i,0,i,f*o,f),g.lineTo(i,s-b*o),b>0&&g.arcTo(i,s,i-b*a,s,b),g.lineTo(m*a,s),m>0&&g.arcTo(0,s,0,s-m*o,m),g.lineTo(0,d*o),d>0&&g.arcTo(0,0,d*a,0,d),g.closePath()}}}Object.defineProperty(Or,"className",{enumerable:!0,configurable:!0,writable:!0,value:"RoundedRectangle"}),Object.defineProperty(Or,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:yt.classNames.concat([Or.className])});class on extends ie{_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["button"]),super._afterNew(),this._settings.background||this.set("background",Or.new(this._root,{themeTags:Ze(this._settings.themeTags,["background"])})),this.setPrivate("trustBounds",!0)}_prepareChildren(){if(super._prepareChildren(),this.isDirty("icon")){const e=this._prevSettings.icon,t=this.get("icon");t!==e&&(this._disposeProperty("icon"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.icon=t)}if(this.isDirty("label")){const e=this._prevSettings.label,t=this.get("label");t!==e&&(this._disposeProperty("label"),e&&e.dispose(),t&&this.children.push(t),this._prevSettings.label=t)}}}Object.defineProperty(on,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Button"}),Object.defineProperty(on,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([on.className])});class er extends mt{constructor(){super(...arguments),Object.defineProperty(this,"xAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Ys}),Object.defineProperty(this,"yAxes",{enumerable:!0,configurable:!0,writable:!0,value:new Ys}),Object.defineProperty(this,"topAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(ie.new(this._root,{width:W,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"yAxesAndPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(ie.new(this._root,{width:W,height:W,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"bottomAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.chartContainer.children.push(ie.new(this._root,{width:W,layout:this._root.verticalLayout}))}),Object.defineProperty(this,"leftAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(ie.new(this._root,{height:W,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"plotsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(ie.new(this._root,{width:W,height:W,maskContent:!1}))}),Object.defineProperty(this,"plotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(ie.new(this._root,{width:W,height:W}))}),Object.defineProperty(this,"topPlotContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotsContainer.children.push(ie.new(this._root,{width:W,height:W}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(ie.new(this._root,{width:W,height:W,isMeasured:!1}))}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{width:W,height:W,isMeasured:!1})}),Object.defineProperty(this,"rightAxesContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.yAxesAndPlotContainer.children.push(ie.new(this._root,{height:W,layout:this._root.horizontalLayout}))}),Object.defineProperty(this,"axisHeadersContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.plotContainer.children.push(ie.new(this._root,{}))}),Object.defineProperty(this,"zoomOutButton",{enumerable:!0,configurable:!0,writable:!0,value:this.topPlotContainer.children.push(on.new(this._root,{themeTags:["zoom"],icon:ze.new(this._root,{themeTags:["button","icon"]})}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_otherCharts",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downStartX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStartY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEndY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._defaultThemes.push(_o.new(this._root)),super._afterNew(),this._disposers.push(this.xAxes),this._disposers.push(this.yAxes);const e=this._root;let t=this._root.verticalLayout;const i=this.zoomOutButton;i.events.on("click",()=>{this.zoomOut()}),i.hide(0),i.states.lookup("default").set("opacity",1),this.chartContainer.set("layout",t);const s=this.plotContainer;s.children.push(this.seriesContainer),this._disposers.push(this._processAxis(this.xAxes,this.bottomAxesContainer)),this._disposers.push(this._processAxis(this.yAxes,this.leftAxesContainer)),s.children.push(this.topGridContainer),s.children.push(this.bulletsContainer),s.set("interactive",!0),s.set("interactiveChildren",!1),s.set("background",yt.new(e,{themeTags:["xy","background"],fill:J.fromHex(0),fillOpacity:0})),this._disposers.push(s.events.on("pointerdown",a=>{this._handlePlotDown(a)})),this._disposers.push(s.events.on("globalpointerup",a=>{this._handlePlotUp(a)})),this._disposers.push(s.events.on("globalpointermove",a=>{this._handlePlotMove(a)})),this._maskGrid(),this._setUpTouch()}_beforeChanged(){super._beforeChanged(),(this.isDirty("pinchZoomX")||this.isDirty("pinchZoomY")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_setUpTouch(){this.plotContainer._display.cancelTouch||(this.plotContainer._display.cancelTouch=!!(this.get("pinchZoomX")||this.get("pinchZoomY")||this.get("panX")||this.get("panY")))}_maskGrid(){this.gridContainer.set("maskContent",!0),this.topGridContainer.set("maskContent",!0)}_removeSeries(e){e._unstack(),e._posXDp&&e._posXDp.dispose(),e._posYDp&&e._posYDp.dispose(),e.set("baseAxis",void 0);const t=e.get("xAxis");t&&(bt(t.series,e),t.markDirtyExtremes());const i=e.get("yAxis");i&&(bt(i.series,e),i.markDirtyExtremes());const s=this.get("cursor");if(s){const a=s.get("snapToSeries");a&&bt(a,e)}super._removeSeries(e)}handleWheel(e){const t=this.get("wheelX"),i=this.get("wheelY"),s=this.plotContainer,a=e.originalEvent;if(!bi(a,this))return;a.preventDefault();const o=s.toLocal(e.point),c=this.get("wheelStep",.2),d=a.deltaY/100,f=a.deltaX/100,b=this.get("wheelZoomPositionX"),m=this.get("wheelZoomPositionY");("zoomX"===t||"zoomXY"===t)&&0!=f&&this.xAxes.each(_=>{if(_.get("zoomX")){let g=_.get("start"),T=_.get("end"),v=_.fixPosition(o.x/s.width());null!=b&&(v=b);let P=g-c*(T-g)*f*v,C=T+c*(T-g)*f*(1-v);1/(C-P)<_.getPrivate("maxZoomFactor",1/0)/_.get("minZoomCount",1)&&this._handleWheelAnimation(_.zoom(P,C))}}),("zoomX"===i||"zoomXY"===i)&&0!=d&&this.xAxes.each(_=>{if(_.get("zoomX")){let g=_.get("start"),T=_.get("end"),v=_.fixPosition(o.x/s.width());null!=b&&(v=b);let P=g-c*(T-g)*d*v,C=T+c*(T-g)*d*(1-v);1/(C-P)<_.getPrivate("maxZoomFactor",1/0)/_.get("minZoomCount",1)&&this._handleWheelAnimation(_.zoom(P,C))}}),("zoomY"===t||"zoomXY"===t)&&0!=f&&this.yAxes.each(_=>{if(_.get("zoomY")){let g=_.get("start"),T=_.get("end"),v=_.fixPosition(o.y/s.height());null!=m&&(v=m);let P=g-c*(T-g)*f*v,C=T+c*(T-g)*f*(1-v);1/(C-P)<_.getPrivate("maxZoomFactor",1/0)/_.get("minZoomCount",1)&&this._handleWheelAnimation(_.zoom(P,C))}}),("zoomY"===i||"zoomXY"===i)&&0!=d&&this.yAxes.each(_=>{if(_.get("zoomY")){let g=_.get("start"),T=_.get("end"),v=_.fixPosition(o.y/s.height());null!=m&&(v=m);let P=g-c*(T-g)*d*v,C=T+c*(T-g)*d*(1-v);1/(C-P)<_.getPrivate("maxZoomFactor",1/0)/_.get("minZoomCount",1)&&this._handleWheelAnimation(_.zoom(P,C))}}),("panX"===t||"panXY"===t)&&0!=f&&this.xAxes.each(_=>{if(_.get("panX")){let g=_.get("start"),T=_.get("end"),v=this._getWheelSign(_)*c*(T-g)*f,P=g+v,C=T+v,E=this._fixWheel(P,C);P=E[0],C=E[1],this._handleWheelAnimation(_.zoom(P,C))}}),("panX"===i||"panXY"===i)&&0!=d&&this.xAxes.each(_=>{if(_.get("panX")){let g=_.get("start"),T=_.get("end"),v=this._getWheelSign(_)*c*(T-g)*d,P=g+v,C=T+v,E=this._fixWheel(P,C);P=E[0],C=E[1],this._handleWheelAnimation(_.zoom(P,C))}}),("panY"===t||"panXY"===t)&&0!=f&&this.yAxes.each(_=>{if(_.get("panY")){let g=_.get("start"),T=_.get("end"),v=this._getWheelSign(_)*c*(T-g)*f,P=g+v,C=T+v,E=this._fixWheel(P,C);P=E[0],C=E[1],this._handleWheelAnimation(_.zoom(P,C))}}),("panY"===i||"panXY"===i)&&0!=d&&this.yAxes.each(_=>{if(_.get("panY")){let g=_.get("start"),T=_.get("end"),v=this._getWheelSign(_)*c*(T-g)*d,P=g-v,C=T-v,E=this._fixWheel(P,C);P=E[0],C=E[1],this._handleWheelAnimation(_.zoom(P,C))}})}_handleSetWheel(){const e=this.get("wheelX"),t=this.get("wheelY");"none"!==e||"none"!==t?(this._wheelDp=this.plotContainer.events.on("wheel",s=>{const a=s.originalEvent;("none"!==e&&0!=Math.abs(a.deltaX)||"none"!==t&&0!=Math.abs(a.deltaY))&&this.handleWheel(s)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_getWheelSign(e){let t=1;return e.get("renderer").get("inversed")&&(t=-1),t}_fixWheel(e,t){const i=t-e;return e<0&&(t=(e=0)+i),t>1&&(e=(t=1)-i),[e,t]}_handlePlotDown(e){const t=e.originalEvent;if(2==t.button)return;const i=this.plotContainer;let s=i.toLocal(e.point);if((this.get("pinchZoomX")||this.get("pinchZoomY"))&&t.pointerId&&M(i._downPoints).length>0){const o=this.xAxes.getIndex(0),c=this.yAxes.getIndex(0);o&&(this._downStartX=o.get("start",0),this._downEndX=o.get("end",1)),c&&(this._downStartY=c.get("start",0),this._downEndY=c.get("end",1))}if((this.get("panX")||this.get("panY"))&&s.x>=0&&s.y>=0&&s.x<=i.width()&&s.y<=this.height()){this._downPoint={x:t.clientX,y:t.clientY};const a=this.get("panX"),o=this.get("panY");a&&this.xAxes.each(d=>{d._panStart=d.get("start"),d._panEnd=d.get("end")}),o&&this.yAxes.each(d=>{d._panStart=d.get("start"),d._panEnd=d.get("end")});const c="panstarted";this.events.isEnabled(c)&&this.events.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent})}}_handleWheelAnimation(e){e?e.events.on("stopped",()=>{this._dispatchWheelAnimation()}):this._dispatchWheelAnimation()}_dispatchWheelAnimation(){const e="wheelended";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}_handlePlotUp(e){const t=this._downPoint;if(t&&(this.get("panX")||this.get("panY"))){let i=this.plotContainer.toLocal(e.point);if(i.x==t.x&&i.y==t.y){const a="pancancelled";this.events.isEnabled(a)&&this.events.dispatch(a,{type:a,target:this,originalEvent:e.originalEvent})}const s="panended";this.events.isEnabled(s)&&this.events.dispatch(s,{type:s,target:this,originalEvent:e.originalEvent})}this._downPoint=void 0,this.xAxes.each(i=>{i._isPanning=!1}),this.yAxes.each(i=>{i._isPanning=!1})}_handlePlotMove(e){const t=this.plotContainer;if(this.get("pinchZoomX")||this.get("pinchZoomY")){const a=e.originalEvent.pointerId;if(a&&(this._movePoints[a]=e.point,M(t._downPoints).length>1))return void this._handlePinch()}let i=this._downPoint;if(i){i=t.toLocal(this._root.documentPointToRoot(i));let s=t.toLocal(e.point);const a=this.get("panX"),o=this.get("panY");if(a){let c=this.get("scrollbarX");c&&c.events.disableType("rangechanged"),this.xAxes.each(d=>{if(d.get("panX")){d._isPanning=!0;let f=d._panStart,b=d._panEnd,_=(b-f)*(i.x-s.x)/t.width();d.get("renderer").get("inversed")&&(_*=-1);let g=f+_,T=b+_;T-g<1+2*d.get("maxDeviation",1)&&(d.set("start",g),d.set("end",T))}}),c&&c.events.enableType("rangechanged")}if(o){let c=this.get("scrollbarY");c&&c.events.disableType("rangechanged"),this.yAxes.each(d=>{if(d.get("panY")){d._isPanning=!0;let f=d._panStart,b=d._panEnd,_=(b-f)*(i.y-s.y)/t.height();d.get("renderer").get("inversed")&&(_*=-1);let g=f-_,T=b-_;T-g<1+2*d.get("maxDeviation",1)&&(d.set("start",g),d.set("end",T))}}),c&&c.events.enableType("rangechanged")}}}_handlePinch(){const e=this.plotContainer;let t=0,i=[],s=[];if(X(e._downPoints,(a,o)=>{i[t]=o;let c=this._movePoints[a];c&&(s[t]=c),t++}),i.length>1&&s.length>1){const a=e.width(),o=e.height();let c=i[0],d=i[1],f=s[0],b=s[1];if(c&&d&&f&&b){if(f=e.toLocal(f),b=e.toLocal(b),c=e.toLocal(c),d=e.toLocal(d),this.get("pinchZoomX")){const m=this._downStartX,_=this._downEndX;if(null!=m&&null!=_){c.x>d.x&&([c,d]=[d,c],[f,b]=[b,f]);let g=m+c.x/a*(_-m),T=m+d.x/a*(_-m),v=m+f.x/a*(_-m),P=m+b.x/a*(_-m),k=Math.max(.001,T-g)/Math.max(.001,P-v),S=m*k+g-v*k,B=_*k+T-P*k;this.xAxes.each(z=>{let G=z.fixPosition(S),Z=z.fixPosition(B);z.zoom(G,Z,0)})}}if(this.get("pinchZoomY")){const m=this._downStartY,_=this._downEndY;if(null!=m&&null!=_){c.y<d.y&&([c,d]=[d,c],[f,b]=[b,f]);let g=m+(1-c.y/o)*(_-m),T=m+(1-d.y/o)*(_-m),v=m+(1-f.y/o)*(_-m),P=m+(1-b.y/o)*(_-m),k=Math.max(.001,T-g)/Math.max(.001,P-v),S=m*k+g-v*k,B=_*k+T-P*k;this.yAxes.each(z=>{let G=z.fixPosition(S),Z=z.fixPosition(B);z.zoom(G,Z,0)})}}}}}_handleCursorPosition(){const e=this.get("cursor");if(e){const t=e.getPrivate("point");let i=e.get("snapToSeries");if(e._downPoint&&(i=void 0),i&&t){const s=e.get("snapToSeriesBy"),a=[];I(i,d=>{if(!d.isHidden()&&!d.isHiding())if("x!"!=s&&"y!"!=s){const f=d.startIndex(),b=d.endIndex();for(let m=f;m<b;m++){const _=d.dataItems[m];_&&!_.isHidden()&&a.push(_)}}else{const f=d.get("tooltipDataItem");f&&a.push(f)}});let c,o=1/0;if(I(a,d=>{const f=d.get("point");if(f){let b=0;b="x"==s||"x!"==s?Math.abs(t.x-f.x):"y"==s||"y!"==s?Math.abs(t.y-f.y):Math.hypot(t.x-f.x,t.y-f.y),b<o&&(o=b,c=d)}}),I(i,d=>{const f=d.get("tooltip");f&&f._setDataItem(void 0)}),c){let d=c.component;d.showDataItemTooltip(c),d.setRaw("tooltipDataItem",c);const f=c.get("point");f&&e.handleMove(d.toGlobal({x:f.x-d.x(),y:f.y-d.y()}),!0)}}}}_updateCursor(){let e=this.get("cursor");e&&e.updateCursor()}_addCursor(e){this.plotContainer.children.push(e)}_prepareChildren(){if(super._prepareChildren(),this.series.each(e=>{this._colorize(e)}),(this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this.isDirty("cursor")){const e=this._prevSettings.cursor,t=this.get("cursor");t!==e&&(this._disposeProperty("cursor"),e&&e.dispose(),t&&(t._setChart(this),this._addCursor(t),this._pushPropertyDisposer("cursor",t.events.on("selectended",()=>{this._handleCursorSelectEnd()}))),this._prevSettings.cursor=t)}if(this.isDirty("scrollbarX")){const e=this._prevSettings.scrollbarX,t=this.get("scrollbarX");t!==e&&(this._disposeProperty("scrollbarX"),e&&e.dispose(),t&&(t.parent||this.topAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarX",t.events.on("rangechanged",i=>{this._handleScrollbar(this.xAxes,i.start,i.end,i.grip)})),t.setPrivate("positionTextFunction",i=>{const s=this.xAxes.getIndex(0);return s&&s.getTooltipText(i,!1)||""})),this._prevSettings.scrollbarX=t)}if(this.isDirty("scrollbarY")){const e=this._prevSettings.scrollbarY,t=this.get("scrollbarY");t!==e&&(this._disposeProperty("scrollbarY"),e&&e.dispose(),t&&(t.parent||this.rightAxesContainer.children.push(t),this._pushPropertyDisposer("scrollbarY",t.events.on("rangechanged",i=>{this._handleScrollbar(this.yAxes,i.start,i.end,i.grip)})),t.setPrivate("positionTextFunction",i=>{const s=this.yAxes.getIndex(0);return s&&s.getTooltipText(i,!1)||""})),this._prevSettings.scrollbarY=t)}this._handleZoomOut()}_processSeries(e){super._processSeries(e);const t=e.get("xAxis"),i=e.get("yAxis");Ma(t.series,e),Ma(i.series,e),e._posXDp=e.addDisposer(t.events.on("positionchanged",()=>{e._fixPosition()})),e._posXDp=e.addDisposer(i.events.on("positionchanged",()=>{e._fixPosition()})),e.get("baseAxis")||(i.isType("CategoryAxis")||i.isType("DateAxis")?e.set("baseAxis",i):e.set("baseAxis",t)),e.get("stacked")&&(e._markDirtyKey("stacked"),I(e.dataItems,s=>{s.set("stackToItemY",void 0),s.set("stackToItemX",void 0)})),e._markDirtyAxes(),i.markDirtyExtremes(),t.markDirtyExtremes(),t._seriesAdded=!0,i._seriesAdded=!0,this._colorize(e)}_colorize(e){const t=this.get("colors");if(t&&null==e.get("fill")){const i=t.next();e._setSoft("stroke",i),e._setSoft("fill",i)}}_handleCursorSelectEnd(){const e=this.get("cursor"),t=e.get("behavior"),i=e.getPrivate("downPositionX",0),s=e.getPrivate("downPositionY",0),a=Math.min(1,Math.max(0,e.getPrivate("positionX",.5))),o=Math.min(1,Math.max(0,e.getPrivate("positionY",.5)));this.xAxes.each(c=>{if("zoomX"===t||"zoomXY"===t){let d=c.toAxisPosition(i),f=c.toAxisPosition(a);c.zoom(d,f)}c.setPrivate("updateScrollbar",!0)}),this.yAxes.each(c=>{if("zoomY"===t||"zoomXY"===t){let d=c.toAxisPosition(s),f=c.toAxisPosition(o);c.zoom(d,f)}c.setPrivate("updateScrollbar",!0)})}_handleScrollbar(e,t,i,s){e.each(a=>{let o=a.fixPosition(t),c=a.fixPosition(i),d=a.zoom(o,c,void 0,s);const f="updateScrollbar";a.setPrivateRaw(f,!1),d?d.events.on("stopped",()=>{a.setPrivateRaw(f,!0)}):a.setPrivateRaw(f,!0)})}_processAxis(e,t){return e.events.onAll(i=>{if("clear"===i.type)I(i.oldValues,s=>{this._removeAxis(s)});else if("push"===i.type)t.children.push(i.newValue),i.newValue.processChart(this);else if("setIndex"===i.type)t.children.setIndex(i.index,i.newValue),i.newValue.processChart(this);else if("insertIndex"===i.type)t.children.insertIndex(i.index,i.newValue),i.newValue.processChart(this);else if("removeIndex"===i.type)this._removeAxis(i.oldValue);else{if("moveIndex"!==i.type)throw new Error("Unknown IListEvent type");t.children.moveValue(i.value,i.newIndex),i.value.processChart(this)}})}_removeAxis(e){if(!e.isDisposed()){const t=e.parent;t&&t.children.removeValue(e);const i=e.gridContainer,s=i.parent;s&&s.children.removeValue(i);const a=e.topGridContainer,o=a.parent;o&&o.children.removeValue(a)}}_updateChartLayout(){const e=this.leftAxesContainer.width(),t=this.rightAxesContainer.width(),i=this.bottomAxesContainer;i.set("paddingLeft",e),i.set("paddingRight",t);const s=this.topAxesContainer;s.set("paddingLeft",e),s.set("paddingRight",t)}processAxis(e){this.get("cursor")&&(this.addDisposer(e.on("start",()=>{this._updateCursor()})),this.addDisposer(e.on("end",()=>{this._updateCursor()})))}_handleAxisSelection(e,t){let i=e.fixPosition(e.get("start",0)),s=e.fixPosition(e.get("end",1));if(i>s&&([i,s]=[s,i]),-1!=this.xAxes.indexOf(e)){if(t||e.getPrivate("updateScrollbar")){let a=this.get("scrollbarX");a&&(!a.getPrivate("isBusy")||t)&&(a.setRaw("start",i),a.setRaw("end",s),a.updateGrips())}}else if(-1!=this.yAxes.indexOf(e)&&(t||e.getPrivate("updateScrollbar"))){let a=this.get("scrollbarY");a&&(!a.getPrivate("isBusy")||t)&&(a.setRaw("start",i),a.setRaw("end",s),a.updateGrips())}this._handleZoomOut()}_handleZoomOut(){let e=this.zoomOutButton;if(e&&e.parent){let t=!1;this.xAxes.each(i=>{(0!=i.get("start")||1!=i.get("end"))&&(t=!0)}),this.yAxes.each(i=>{(0!=i.get("start")||1!=i.get("end"))&&(t=!0)}),t?e.isHidden()&&e.show():e.hide()}}inPlot(e){const t=this.plotContainer,i=this.getPrivate("otherCharts",this._otherCharts),s=t.toGlobal(e);if(e.x>=-.5&&e.y>=-.5&&e.x<=t.width()+.5&&e.y<=t.height()+.5)return!0;if(i)for(let a=i.length-1;a>=0;a--){const o=i[a];if(o!=this){const c=o.plotContainer,d=this._root.rootPointToDocument(s),f=o._root.documentPointToRoot(d),b=c.toLocal(f);if(b.x>=-.1&&b.y>=-.1&&b.x<=c.width()+.1&&b.y<=c.height()+.1)return!0}}return!1}arrangeTooltips(){const e=this.plotContainer,t=e.width(),i=e.height(),s=this.height();let a=e._display.toGlobal({x:0,y:0}),o=e._display.toGlobal({x:t,y:i});const c=[];let g,T,d=0,f=1/0,b=this._movePoint,m=this.get("maxTooltipDistance"),_=this.get("maxTooltipDistanceBy","xy");R(m)&&this.series.each(P=>{if(!P.isHidden()){const C=P.get("tooltip");if(C){let E=C.get("pointTo");if(E){let k=Math.hypot(b.x-E.x,b.y-E.y);"x"==_?k=Math.abs(b.x-E.x):"y"==_&&(k=Math.abs(b.y-E.y)),k<f&&(f=k,g=P,T=E)}}}});const v=[];if(this.series.each(P=>{const C=P.get("tooltip");if(C&&!C.get("forceHidden")){let E=!1,k=C.get("pointTo");if(k){if(m>=0){let S=C.get("pointTo");if(S&&T&&P!=g){let B=Math.hypot(T.x-S.x,T.y-S.y);"x"==_?B=Math.abs(T.x-S.x):"y"==_&&(B=Math.abs(T.y-S.y)),B>m&&(E=!0)}}else-1==m&&P!=g&&(E=!0);this.inPlot(this._tooltipToLocal(k))&&C.dataItem?E||(d+=k.y):E=!0,E||P.isHidden()||P.isHiding()?C.hide(0):(C.show(),c.push(C),v.push(P))}}}),this.setPrivate("tooltipSeries",v),this.get("arrangeTooltips")){const P=this._root.tooltipContainer;if(d/c.length>i/2+a.y){c.sort((S,B)=>qa(B.get("pointTo").y,S.get("pointTo").y));let k=o.y;if(I(c,S=>{let B=S.height(),z=S.get("centerY");z instanceof le&&(B*=z.value),B+=S.get("marginBottom",0),S.set("bounds",{left:a.x,top:a.y,right:o.x,bottom:k}),S.setPrivate("customData",{left:a.x,top:a.y,right:o.x,bottom:k}),k=Math.min(k-B,S._fy-B),S.parent==P&&P.children.moveValue(S,0)}),k<0){c.reverse();let S=k;I(c,B=>{let z=B.get("bounds");if(z){let G=z.top-k,Z=z.bottom-k;G<S&&(G=S,Z=G+B.height()),B.set("bounds",{left:z.left,top:G,right:z.right,bottom:Z}),S=z.bottom-k+B.get("marginBottom",0)}})}}else{c.reverse(),c.sort((S,B)=>qa(S.get("pointTo").y,B.get("pointTo").y));let k=0;if(I(c,S=>{let B=S.height(),z=S.get("centerY");z instanceof le&&(B*=z.value),B+=S.get("marginBottom",0),S.set("bounds",{left:a.x,top:k,right:o.x,bottom:Math.max(a.y+s,k+B)}),S.parent==P&&P.children.moveValue(S,0),k=Math.max(k+B,S._fy+B)}),k>s){c.reverse();let S=s;I(c,B=>{let z=B.get("bounds");if(z){let G=z.top-(s-k),Z=z.bottom-(s-k);Z>S&&(Z=S,G=Z-B.height()),B.set("bounds",{left:z.left,top:G,right:z.right,bottom:Z}),S=Z-B.height()-B.get("marginBottom",0)}})}}}}_tooltipToLocal(e){return this.plotContainer.toLocal(e)}zoomOut(){this.xAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)}),this.yAxes.each(e=>{e.setPrivate("updateScrollbar",!0),e.zoom(0,1)})}}Object.defineProperty(er,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYChart"}),Object.defineProperty(er,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:mt.classNames.concat([er.className])});class Gt extends ze{_beforeChanged(){super._beforeChanged(),(this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}}Object.defineProperty(Gt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Grid"}),Object.defineProperty(Gt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ze.classNames.concat([Gt.className])});class us extends ie{constructor(){super(...arguments),Object.defineProperty(this,"lineX",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Gt.new(this._root,{themeTags:["x"]}))}),Object.defineProperty(this,"lineY",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(Gt.new(this._root,{themeTags:["y"]}))}),Object.defineProperty(this,"selection",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ze.new(this._root,{themeTags:["selection","cursor"],layer:30}))}),Object.defineProperty(this,"_movePoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lastPoint",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0}}),Object.defineProperty(this,"_tooltipX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_tooltipY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_toY",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["xy","cursor"]),super._afterNew(),this.setAll({width:W,height:W,isMeasured:!0,position:"absolute"}),this.states.create("hidden",{visible:!0,opacity:0}),this._drawLines(),this.setPrivateRaw("visible",!1),this._disposers.push(this.setTimeout(()=>{this.setPrivate("visible",!0)},500)),this._disposers.push(this.lineX.events.on("positionchanged",()=>{this._handleXLine()})),this._disposers.push(this.lineY.events.on("positionchanged",()=>{this._handleYLine()})),this._disposers.push(this.lineX.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineX.events.on("blur",e=>this._handleLineBlur(e.target))),this._disposers.push(this.lineY.events.on("focus",e=>this._handleLineFocus(e.target))),this._disposers.push(this.lineY.events.on("blur",e=>this._handleLineBlur(e.target))),ti("keyboardevents")&&this._disposers.push(Ae(document,"keydown",e=>{this._handleLineMove(e.keyCode)}))}_setUpTouch(){const e=this.chart;e&&(e.plotContainer._display.cancelTouch="none"!=this.get("behavior"))}_handleXLine(){let e=this.lineX.x(),t=!0;(e<0||e>this.width())&&(t=!1),this.lineX.setPrivate("visible",t)}_handleYLine(){let e=this.lineY.y(),t=!0;(e<0||e>this.height())&&(t=!1),this.lineY.setPrivate("visible",t)}_handleLineMove(e){let t="",i=0,s=.1;const a=this.chart;this._root.focused(this.lineX)?(a&&a.xAxes.length&&(s=a.xAxes.getIndex(0).getCellWidthPosition()),i=this.getPrivate("positionX",0),t="positionX",37==e?i-=s:39==e&&(i+=s)):this._root.focused(this.lineY)&&(a&&a.yAxes.length&&(s=a.yAxes.getIndex(0).getCellWidthPosition()),i=this.getPrivate("positionY",0),t="positionY",38==e?i-=s:40==e&&(i+=s)),i<0?i=0:i>1&&(i=1),""!=t&&this.set(t,i)}_handleLineFocus(e){this.setAll({positionX:this.getPrivate("positionX"),positionY:this.getPrivate("positionY"),alwaysShow:!0})}_handleLineBlur(e){this.setAll({positionX:void 0,positionY:void 0,alwaysShow:!1})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("xAxis")){this._tooltipX=!1;const e=this.get("xAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipX=!0,this._disposers.push(t.on("pointTo",()=>{this._updateXLine(t)})))}}if(this.isDirty("yAxis")){this._tooltipY=!1;const e=this.get("yAxis");if(e){const t=e.get("tooltip");t&&(this._tooltipY=!0,this._disposers.push(t.on("pointTo",()=>{this._updateYLine(t)})))}}}_handleSyncWith(){const e=this.chart;if(e){const t=this.get("syncWith"),i=[];t&&I(t,s=>{const a=s.chart;a&&i.push(a)}),e._otherCharts=i}}_updateChildren(){if(super._updateChildren(),this._handleSyncWith(),this.isDirty("positionX")||this.isDirty("positionY")){const e=this.get("positionX"),t=this.get("positionY");null==e&&null==t?this.hide(0):(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0))),this.handleMove())}}_updateXLine(e){let t=tt(this._display.toLocal(e.get("pointTo",{x:0,y:0})).x,2);this._toX!=t&&(this.lineX.animate({key:"x",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toX=t)}_updateYLine(e){let t=tt(this._display.toLocal(e.get("pointTo",{x:0,y:0})).y,2);this._toY!=t&&(this.lineY.animate({key:"y",to:t,duration:e.get("animationDuration",0),easing:e.get("animationEasing")}),this._toY=t)}_drawLines(){this.lineX.set("draw",e=>{e.moveTo(0,0),e.lineTo(0,this.height())}),this.lineY.set("draw",e=>{e.moveTo(0,0),e.lineTo(this.width(),0)})}updateCursor(){this.get("alwaysShow")&&(this._movePoint=this.toGlobal(this._getPoint(this.get("positionX",0),this.get("positionY",0)))),this.handleMove()}_setChart(e){this.chart=e,this._handleSyncWith();const t=e.plotContainer;this.events.on("boundschanged",()=>{this._disposers.push(this.setTimeout(()=>{this.updateCursor()},50))}),ti("touchevents")&&(this._disposers.push(t.events.on("click",s=>{Ss(s.originalEvent)&&this._handleMove(s)})),this._setUpTouch()),this._disposers.push(t.events.on("pointerdown",s=>{this._handleCursorDown(s)})),this._disposers.push(t.events.on("globalpointerup",s=>{this._handleCursorUp(s),!s.native&&!this.isHidden()&&this._handleMove(s)})),this._disposers.push(t.events.on("globalpointermove",s=>{!this.get("syncWith")&&0==M(t._downPoints).length&&!s.native&&this.isHidden()||this._handleMove(s)}));const i=this.parent;i&&i.children.moveValue(this.selection)}_inPlot(e){const t=this.chart;return!!t&&t.inPlot(e)}_handleCursorDown(e){if(2==e.originalEvent.button)return;let i=this._display.toLocal(e.point);const s=this.chart;if(this.selection.set("draw",()=>{}),s&&this._inPlot(i)){if(this._downPoint=i,"none"!=this.get("behavior")){this.selection.show();const c="selectstarted";this.events.isEnabled(c)&&this.events.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent})}let a=this._getPosition(i).x,o=this._getPosition(i).y;this.setPrivate("downPositionX",a),this.setPrivate("downPositionY",o)}}_handleCursorUp(e){if(this._downPoint){const t=this.get("behavior","none");if("none"!=t){"z"===t.charAt(0)&&this.selection.hide();let s=this._display.toLocal(e.point);const a=this._downPoint,o=this.get("moveThreshold",1);if(s&&a){let c=!1;if(("zoomX"===t||"zoomXY"===t||"selectX"===t||"selectXY"===t)&&Math.abs(s.x-a.x)>o&&(c=!0),("zoomY"===t||"zoomXY"===t||"selectY"===t||"selectXY"===t)&&Math.abs(s.y-a.y)>o&&(c=!0),c){const d="selectended";this.events.isEnabled(d)&&this.events.dispatch(d,{type:d,target:this,originalEvent:e.originalEvent})}else{const d="selectcancelled";this.events.isEnabled(d)&&this.events.dispatch(d,{type:d,target:this,originalEvent:e.originalEvent})}}}}this._downPoint=void 0}_handleMove(e){if(this.getPrivate("visible")){const t=this.chart;if(t&&M(t.plotContainer._downPoints).length>1)return void this.set("forceHidden",!0);this.set("forceHidden",!1);const i=e.point,s=this._lastPoint;if(Math.round(s.x)===Math.round(i.x)&&Math.round(s.y)===Math.round(i.y))return;this._lastPoint=i,this.setPrivate("lastPoint",i),this.handleMove({x:i.x,y:i.y},!1,e.originalEvent)}}_getPosition(e){return{x:e.x/this.width(),y:e.y/this.height()}}handleMove(e,t,i){e||(e=this._movePoint);const s=this.get("alwaysShow");if(!e)return void this.hide(0);this._movePoint=e;let a=this._display.toLocal(e),o=this.chart;if(o&&(this._inPlot(a)||this._downPoint)){o._movePoint=e,this.isHidden()&&(this.show(),"z"==this.get("behavior","").charAt(0)&&this.selection.set("draw",()=>{}));let c=a.x,d=a.y,f=this._getPosition(a);this.setPrivate("point",a);let b=this.get("snapToSeries");this._downPoint&&(b=void 0);let m=this.get("positionX"),_=f.x;R(m)&&(_=m);let g=this.get("positionY"),T=f.y;R(g)&&(T=g),this.setPrivate("positionX",_),this.setPrivate("positionY",T);const v=this._getPoint(_,T);if(c=v.x,d=v.y,o.xAxes.each(P=>{P._handleCursorPosition(_,b),s&&P.handleCursorShow()}),o.yAxes.each(P=>{P._handleCursorPosition(T,b),s&&P.handleCursorShow()}),!t){o._handleCursorPosition();const P="cursormoved";this.events.isEnabled(P)&&this.events.dispatch(P,{type:P,target:this,point:e,originalEvent:i})}this._updateLines(c,d),o.arrangeTooltips()}else if(!this._downPoint&&!s){this.hide(0);const c="cursorhidden";this.events.isEnabled(c)&&this.events.dispatch(c,{type:c,target:this})}this._downPoint&&"none"!=this.get("behavior")&&this._updateSelection(a)}_getPoint(e,t){return{x:this.width()*e,y:this.height()*t}}_updateLines(e,t){this._tooltipX||this.lineX.set("x",e),this._tooltipY||this.lineY.set("y",t),this._drawLines()}_updateSelection(e){const t=this.selection,i=this.get("behavior"),s=this.width(),a=this.height();e.x<0&&(e.x=0),e.x>s&&(e.x=s),e.y<0&&(e.y=0),e.y>a&&(e.y=a),t.set("draw",o=>{const c=this._downPoint;c&&("zoomXY"===i||"selectXY"===i?(o.moveTo(c.x,c.y),o.lineTo(c.x,e.y),o.lineTo(e.x,e.y),o.lineTo(e.x,c.y),o.lineTo(c.x,c.y)):"zoomX"===i||"selectX"===i?(o.moveTo(c.x,0),o.lineTo(c.x,a),o.lineTo(e.x,a),o.lineTo(e.x,0),o.lineTo(c.x,0)):("zoomY"===i||"selectY"===i)&&(o.moveTo(0,c.y),o.lineTo(s,c.y),o.lineTo(s,e.y),o.lineTo(0,e.y),o.lineTo(0,c.y)))})}_onHide(){if(this.isHidden()){let e=this.chart;e&&(e.xAxes.each(t=>{t.handleCursorHide()}),e.yAxes.each(t=>{t.handleCursorHide()}),e.series.each(t=>{t.handleCursorHide()}))}super._onHide()}_onShow(){if(!this.isHidden()){let e=this.chart;e&&(e.xAxes.each(t=>{t.handleCursorShow()}),e.yAxes.each(t=>{t.handleCursorShow()}))}super._onShow()}_dispose(){super._dispose(),this.selection.dispose()}}function ca(l,e){for(let t=0,i=e.length;t<i;t++){const s=e[t];if(s.length>0){let a=s[0];if(a.length>0){let o=a[0];l.moveTo(o.x,o.y);for(let c=0,d=s.length;c<d;c++)bo(l,s[c])}}}}function bo(l,e){for(let t=0,i=e.length;t<i;t++){const s=e[t];l.lineTo(s.x,s.y)}}Object.defineProperty(us,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYCursor"}),Object.defineProperty(us,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([us.className])});class Mr extends ze{_beforeChanged(){super._beforeChanged(),(this.isDirty("points")||this.isDirty("segments")||this._sizeDirty||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}_changed(){if(super._changed(),this._clear){const e=this.get("points"),t=this.get("segments");if(e&&e.length>0){let i=e[0];this._display.moveTo(i.x,i.y),ca(this._display,[[e]])}else if(t)ca(this._display,t);else if(!this.get("draw")){let i=this.width(),s=this.height();this._display.moveTo(0,0),this._display.lineTo(i,s)}}}}Object.defineProperty(Mr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Line"}),Object.defineProperty(Mr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ze.classNames.concat([Mr.className])});class kr extends Mr{}Object.defineProperty(kr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tick"}),Object.defineProperty(kr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mr.classNames.concat([kr.className])});class tr extends kr{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(tr,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisTick"}),Object.defineProperty(tr,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kr.classNames.concat([tr.className])});class cs extends Ti{constructor(){super(...arguments),Object.defineProperty(this,"_tickPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]})}}Object.defineProperty(cs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisLabel"}),Object.defineProperty(cs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ti.classNames.concat([cs.className])});class oi extends ze{constructor(){super(...arguments),Object.defineProperty(this,"_axisLength",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"_start",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_end",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_inversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_minSize",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_lc",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_ls",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_thumbDownPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ticks",{enumerable:!0,configurable:!0,writable:!0,value:new br(ft.new({}),()=>tr._new(this._root,{themeTags:Ze(this.ticks.template.get("themeTags",[]),this.get("themeTags",[]))},[this.ticks.template]))}),Object.defineProperty(this,"grid",{enumerable:!0,configurable:!0,writable:!0,value:new br(ft.new({}),()=>Gt._new(this._root,{themeTags:Ze(this.grid.template.get("themeTags",[]),this.get("themeTags",[]))},[this.grid.template]))}),Object.defineProperty(this,"axisFills",{enumerable:!0,configurable:!0,writable:!0,value:new br(ft.new({}),()=>ze._new(this._root,{themeTags:Ze(this.axisFills.template.get("themeTags",["axis","fill"]),this.get("themeTags",[]))},[this.axisFills.template]))}),Object.defineProperty(this,"labels",{enumerable:!0,configurable:!0,writable:!0,value:new br(ft.new({}),()=>cs._new(this._root,{themeTags:Ze(this.labels.template.get("themeTags",[]),this.get("themeTags",[]))},[this.labels.template]))}),Object.defineProperty(this,"axis",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}makeTick(e,t){const i=this.ticks.make();return i._setDataItem(e),e.setRaw("tick",i),i.set("themeTags",Ze(i.get("themeTags"),t)),this.axis.labelsContainer.children.push(i),this.ticks.push(i),i}makeGrid(e,t){const i=this.grid.make();return i._setDataItem(e),e.setRaw("grid",i),i.set("themeTags",Ze(i.get("themeTags"),t)),this.axis.gridContainer.children.push(i),this.grid.push(i),i}makeAxisFill(e,t){const i=this.axisFills.make();return i._setDataItem(e),i.set("themeTags",Ze(i.get("themeTags"),t)),this.axis.gridContainer.children.push(i),e.setRaw("axisFill",i),this.axisFills.push(i),i}makeLabel(e,t){const i=this.labels.make();return i.set("themeTags",Ze(i.get("themeTags"),t)),this.axis.labelsContainer.children.moveValue(i,0),i._setDataItem(e),e.setRaw("label",i),this.labels.push(i),i}axisLength(){return 0}gridCount(){return this.axisLength()/this.get("minGridDistance",50)}_updatePositions(){}_afterNew(){super._afterNew(),this.set("isMeasured",!1);const e=this.thumb;e&&(this._disposers.push(e.events.on("pointerdown",t=>{this._handleThumbDown(t)})),this._disposers.push(e.events.on("globalpointerup",t=>{this._handleThumbUp(t)})),this._disposers.push(e.events.on("globalpointermove",t=>{this._handleThumbMove(t)})))}_beforeChanged(){super._beforeChanged(),this.isDirty("minGridDistance")&&this.root.events.once("frameended",()=>{this.axis.markDirtySize()})}_changed(){if(super._changed(),this.isDirty("pan")){const e=this.thumb;if(e){const t=this.axis.labelsContainer,i=this.get("pan");"zoom"==i?t.children.push(e):"none"==i&&t.children.removeValue(e)}}}_handleThumbDown(e){this._thumbDownPoint=this.toLocal(e.point);const t=this.axis;this._downStart=t.get("start"),this._downEnd=t.get("end")}_handleThumbUp(e){this._thumbDownPoint=void 0}_handleThumbMove(e){const t=this._thumbDownPoint;if(t){const i=this.toLocal(e.point),s=this._downStart,a=this._downEnd,o=this._getPan(i,t)*Math.min(1,a-s)/2;this.axis.zoom(s-o,a+o,0)}}_getPan(e,t){return 0}positionToCoordinate(e){return this._inversed?(this._end-e)*this._axisLength:(e-this._start)*this._axisLength}updateTooltipBounds(e){}_updateSize(){this.markDirty(),this._clear=!0}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e*=i-t,this.get("inversed")?i-e:t+e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e=i-e:e-=t,e/(i-t)}fixPosition(e){return this.get("inversed")?1-e:e}_updateLC(){}toggleVisibility(e,t,i,s){let a=this.axis;const o=a.get("start",0),c=a.get("end",1);e.setPrivate("visible",!(t<o+(c-o)*(i-1e-4)||t>o+(c-o)*(s+1e-4)))}_positionTooltip(e,t){const i=this.chart;i&&(e.set("pointTo",this._display.toGlobal(t)),i.inPlot(t)||e.hide())}processAxis(){}}Object.defineProperty(oi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRenderer"}),Object.defineProperty(oi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ze.classNames.concat([oi.className])});class Er extends oi{constructor(){super(...arguments),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:yt.new(this._root,{width:W,isMeasured:!1,themeTags:["axis","x","thumb"]})})}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["renderer","x"]),super._afterNew(),this.setPrivateRaw("letter","X");const e=this.grid.template;e.set("height",W),e.set("width",0),e.set("draw",(t,i)=>{t.moveTo(0,0),t.lineTo(0,i.height())}),this.set("draw",(t,i)=>{t.moveTo(0,0),t.lineTo(i.width(),0)})}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("x",-1e3);const t="opposite",i="inside";if(this.isDirty(t)||this.isDirty(i)){const s=this.chart,a=e.children;if(this.get(i)?e.addTag(i):e.removeTag(i),s){if(this.get(t)){const o=s.topAxesContainer.children;-1==o.indexOf(e)&&o.insertIndex(0,e),e.addTag(t),a.moveValue(this)}else{const o=s.bottomAxesContainer.children;-1==o.indexOf(e)&&o.moveValue(e),e.removeTag(t),a.moveValue(this,0)}e.ghostLabel._applyThemes(),this.labels.each(o=>{o._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}this.thumb.setPrivate("height",e.labelsContainer.height())}_getPan(e,t){return(t.x-e.x)/this.width()}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e=(e-=this._ls)*(i-t)/this._lc,this.get("inversed")?i-e:t+e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e=i-e:e-=t,(e=e/(i-t)*this._lc)+this._ls}_updateLC(){const e=this.axis,t=e.parent;if(t){const i=t.innerWidth();this._lc=this.axisLength()/i,this._ls=(e.x()-t.get("paddingLeft",0))/i}}_updatePositions(){const e=this.axis,t=e.x()-qe(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0);e.gridContainer.set("x",t),e.topGridContainer.set("x",t),e.bulletsContainer.set("y",this.y());const i=e.chart;if(i){const s=i.plotContainer,a=e.axisHeader;let o=e.get("marginLeft",0),c=e.x()-o;const d=e.parent;d&&(c-=d.get("paddingLeft",0)),a.children.length>0?(o=e.axisHeader.width(),e.set("marginLeft",o+1)):a.set("width",o),a.setAll({x:c,y:-1,height:s.height()+2})}}processAxis(){super.processAxis();const e=this.axis;null==e.get("width")&&e.set("width",W);const t=this._root.verticalLayout;e.set("layout",t),e.labelsContainer.set("width",W),e.axisHeader.setAll({layout:t})}axisLength(){return this.axis.width()}positionToPoint(e){return{x:this.positionToCoordinate(e),y:0}}updateTick(e,t,i,s){if(e){R(t)||(t=0);let a=.5;a=R(s)&&s>1?e.get("multiLocation",a):e.get("location",a),R(i)&&i!=t&&(t+=(i-t)*a),e.set("x",this.positionToCoordinate(t));let o=e.get("length",0);const c=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("y",W),c||(o*=-1)):(e.set("y",0),c&&(o*=-1)),e.set("draw",d=>{d.moveTo(0,0),d.lineTo(0,o)}),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateLabel(e,t,i,s){if(e){let a=.5;a=R(s)&&s>1?e.get("multiLocation",a):e.get("location",a),R(t)||(t=0);const o=e.get("inside",this.get("inside",!1));this.get("opposite")?o?(e.set("position","absolute"),e.set("y",0)):(e.set("position","relative"),e.set("y",W)):o?(e.set("y",0),e.set("position","absolute")):(e.set("y",void 0),e.set("position","relative")),R(i)&&i!=t&&(t+=(i-t)*a),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,i){if(e){R(t)||(t=0);let s=e.get("location",.5);R(i)&&i!=t&&(t+=(i-t)*s),e.set("x",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateBullet(e,t,i){if(e){const s=e.get("sprite");if(s){R(t)||(t=0);let a=e.get("location",.5);R(i)&&i!=t&&(t+=(i-t)*a);let o=this.axis.roundAxisPosition(t,a),c=this.axis._bullets[o],d=-1;if(this.get("opposite")&&(d=1),e.get("stacked"))if(c){let f=c.get("sprite");f&&s.set("y",f.y()+f.height()*d)}else s.set("y",0);this.axis._bullets[o]=e,s.set("x",this.positionToCoordinate(t)),this.toggleVisibility(s,t,0,1)}}}updateFill(e,t,i){if(e){R(t)||(t=0),R(i)||(i=1);let s=this.positionToCoordinate(t),a=this.positionToCoordinate(i);this.fillDrawMethod(e,s,a)}}fillDrawMethod(e,t,i){e.set("draw",s=>{const a=this.axis.gridContainer.height(),o=this.width();i<t&&([i,t]=[t,i]),!(t>o||i<0)&&(s.moveTo(t,0),s.lineTo(i,0),s.lineTo(i,a),s.lineTo(t,a),s.lineTo(t,0))})}positionTooltip(e,t){this._positionTooltip(e,{x:this.positionToCoordinate(t),y:0})}updateTooltipBounds(e){const t=this.get("inside"),i=1e5;let s=this._display.toGlobal({x:0,y:0}),a=s.x,o=0,c=this.axisLength(),d=i,f="up";this.get("opposite")?t?(f="up",o=s.y,d=i):(f="down",o=s.y-i,d=i):t?(f="down",o=s.y-i,d=i):(f="up",o=s.y,d=i);const b={left:a,right:a+c,top:o,bottom:o+d};Za(b,e.get("bounds"))||(e.set("bounds",b),e.set("pointerOrientation",f))}}Object.defineProperty(Er,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererX"}),Object.defineProperty(Er,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oi.classNames.concat([Er.className])});class un extends _r{constructor(){super(...arguments),Object.defineProperty(this,"processor",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}incrementRef(){}decrementRef(){}_onPush(e){this.processor&&this.processor.processRow(e),super._onPush(e)}_onInsertIndex(e,t){this.processor&&this.processor.processRow(t),super._onInsertIndex(e,t)}_onSetIndex(e,t,i){this.processor&&this.processor.processRow(i),super._onSetIndex(e,t,i)}}class Zi extends $r{constructor(e,t,i){super(i),Object.defineProperty(this,"component",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dataContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"open",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"close",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.dataContext=t,this.component=e,this._settings.visible=!0,this._checkDirty()}markDirty(){this.component.markDirtyValues(this)}_startAnimation(){this.component._root._addAnimation(this)}_animationTime(){return this.component._root.animationTime}_dispose(){this.component&&this.component.disposeDataItem(this),super._dispose()}show(e){this.setRaw("visible",!0),this.component&&this.component.showDataItem(this,e)}hide(e){this.setRaw("visible",!1),this.component&&this.component.hideDataItem(this,e)}isHidden(){return!this.get("visible")}}class li extends ie{constructor(){super(...arguments),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:new un}),Object.defineProperty(this,"_dataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mainDataItems",{enumerable:!0,configurable:!0,writable:!0,value:this._dataItems}),Object.defineProperty(this,"valueFields",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"fields",{enumerable:!0,configurable:!0,writable:!0,value:["id"]}),Object.defineProperty(this,"_valueFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueFieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_fieldsF",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataChanged",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataGrouped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inited",{enumerable:!0,configurable:!0,writable:!0,value:!1})}set data(e){e.incrementRef(),this._data.decrementRef(),this._data=e}get data(){return this._data}_dispose(){super._dispose(),this._data.decrementRef()}_onDataClear(){}_afterNew(){super._afterNew(),this._data.incrementRef(),this._updateFields(),this._disposers.push(this.data.events.onAll(e=>{const t=this._mainDataItems;if(this.markDirtyValues(),this._markDirtyGroup(),this._dataChanged=!0,"clear"===e.type)I(t,i=>{i.dispose()}),t.length=0,this._onDataClear();else if("push"===e.type){const i=new Zi(this,e.newValue,this._makeDataItem(e.newValue));t.push(i),this.processDataItem(i)}else if("setIndex"===e.type){const i=t[e.index],s=this._makeDataItem(e.newValue);i.bullets&&0==i.bullets.length&&(i.bullets=void 0),M(s).forEach(a=>{i.animate({key:a,to:s[a],duration:this.get("interpolationDuration",0),easing:this.get("interpolationEasing")})}),i.dataContext=e.newValue}else if("insertIndex"===e.type){const i=new Zi(this,e.newValue,this._makeDataItem(e.newValue));t.splice(e.index,0,i),this.processDataItem(i)}else if("removeIndex"===e.type)t[e.index].dispose(),t.splice(e.index,1);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");{const i=t[e.oldIndex];t.splice(e.oldIndex,1),t.splice(e.newIndex,0,i)}}this._afterDataChange()}))}_updateFields(){this.valueFields&&(this._valueFields=[],this._valueFieldsF={},I(this.valueFields,e=>{this.get(e+"Field")&&(this._valueFields.push(e),this._valueFieldsF[e]={fieldKey:e+"Field",workingKey:e+"Working"})})),this.fields&&(this._fields=[],this._fieldsF={},I(this.fields,e=>{this.get(e+"Field")&&(this._fields.push(e),this._fieldsF[e]=e+"Field")}))}get dataItems(){return this._dataItems}processDataItem(e){}_makeDataItem(e){const t={};return this._valueFields&&I(this._valueFields,i=>{const s=this.get(this._valueFieldsF[i].fieldKey);t[i]=e[s],t[this._valueFieldsF[i].workingKey]=t[i]}),this._fields&&I(this._fields,i=>{const s=this.get(this._fieldsF[i]);t[i]=e[s]}),t}makeDataItem(e){let t=new Zi(this,void 0,e);return this.processDataItem(t),t}pushDataItem(e){const t=this.makeDataItem(e);return this._mainDataItems.push(t),t}disposeDataItem(e){}showDataItem(e,t){return(0,Qe.mG)(this,void 0,void 0,function*(){e.set("visible",!0)})}hideDataItem(e,t){return(0,Qe.mG)(this,void 0,void 0,function*(){e.set("visible",!1)})}_clearDirty(){super._clearDirty(),this._valuesDirty=!1}_afterDataChange(){}_afterChanged(){if(super._afterChanged(),this._dataChanged){const e="datavalidated";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this}),this._dataChanged=!1}this.inited=!0}markDirtyValues(e){this.markDirty(),this._valuesDirty=!0}_markDirtyGroup(){this._dataGrouped=!1}markDirtySize(){this._sizeDirty=!0,this.markDirty()}}Object.defineProperty(li,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Component"}),Object.defineProperty(li,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:ie.classNames.concat([li.className])});class Hi extends li{constructor(){super(...arguments),Object.defineProperty(this,"_series",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_isPanning",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"minorDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"labelsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{}))}),Object.defineProperty(this,"gridContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{width:W,height:W})}),Object.defineProperty(this,"topGridContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{width:W,height:W})}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{isMeasured:!1,width:W,height:W,position:"absolute"}))}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rangesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_panStart",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_panEnd",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_sAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_eAnimation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_skipSync",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new _r}),Object.defineProperty(this,"_seriesAxisRanges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ghostLabel",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_cursorPosition",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"_snapToSeries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_seriesValuesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_seriesAdded",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"axisHeader",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{themeTags:["axis","header"],position:"absolute",background:yt.new(this._root,{themeTags:["header","background"],fill:this._root.interfaceColors.get("background")})}))}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_dispose(){this.gridContainer.dispose(),this.topGridContainer.dispose(),this.bulletsContainer.dispose(),this.labelsContainer.dispose(),this.axisHeader.dispose(),super._dispose()}_afterNew(){super._afterNew(),this.setPrivate("updateScrollbar",!0),this._disposers.push(this.axisRanges.events.onAll(t=>{if("clear"===t.type)I(t.oldValues,i=>{this.disposeDataItem(i)});else if("push"===t.type)this._processAxisRange(t.newValue,["range"]);else if("setIndex"===t.type)this._processAxisRange(t.newValue,["range"]);else if("insertIndex"===t.type)this._processAxisRange(t.newValue,["range"]);else if("removeIndex"===t.type)this.disposeDataItem(t.oldValue);else{if("moveIndex"!==t.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(t.value,["range"])}}));const e=this.get("renderer");e&&(e.axis=this,e.processAxis()),this.children.push(e),this.ghostLabel=e.makeLabel(new Zi(this,void 0,{}),[]),this.ghostLabel.adapters.disable("text"),this.ghostLabel.setAll({opacity:0,tooltipText:void 0,tooltipHTML:void 0,interactive:!1}),this.ghostLabel.events.disable()}_updateFinals(e,t){}zoom(e,t,i,s){if(this.get("zoomable",!0))if(this._updateFinals(e,t),this.get("start")!==e||this.get("end")!=t){let a=this._sAnimation,o=this._eAnimation,c=this.get("maxDeviation",.5)*Math.min(1,t-e);e<-c&&(e=-c),t>1+c&&(t=1+c),e>t&&([e,t]=[t,e]),R(i)||(i=this.get("interpolationDuration",0)),s||(s="end");let d=this.getPrivate("maxZoomFactor",this.get("maxZoomFactor",100)),f=d;1===t&&0!==e&&(s=e<this.get("start",0)?"start":"end"),0===e&&1!==t&&(s=t>this.get("end",1)?"end":"start");let b=this.get("minZoomCount",0),m=this.get("maxZoomCount",1/0);R(b)&&(d=f/b);let _=1;if(R(m)&&(_=f/m),"start"===s?(m>0&&1/(t-e)<_&&(t=e+1/_),1/(t-e)>d&&(t=e+1/d),t>1&&t-e<1/d&&(e=t-1/d)):(m>0&&1/(t-e)<_&&(e=t-1/_),1/(t-e)>d&&(e=t-1/d),e<0&&t-e<1/d&&(t=e+1/d)),1/(t-e)>d&&(t=e+1/d),1/(t-e)>d&&(e=t-1/d),null!=m&&null!=b&&e==this.get("start")&&t==this.get("end")){const g=this.chart;g&&g._handleAxisSelection(this,!0)}if((a&&a.playing&&a.to==e||this.get("start")==e)&&(o&&o.playing&&o.to==t||this.get("end")==t))return;if(i>0){let T,v,g=this.get("interpolationEasing");if(this.get("start")!=e&&(T=this.animate({key:"start",to:e,duration:i,easing:g})),this.get("end")!=t&&(v=this.animate({key:"end",to:t,duration:i,easing:g})),this._sAnimation=T,this._eAnimation=v,T)return T;if(v)return v}else this.set("start",e),this.set("end",t),this._root.events.once("frameended",()=>{this._markDirtyKey("start"),this._root._markDirty()})}else this._sAnimation&&this._sAnimation.stop(),this._eAnimation&&this._eAnimation.stop()}get series(){return this._series}_processAxisRange(e,t){e.setRaw("isRange",!0),this._createAssets(e,t),this._rangesDirty=!0,this._prepareDataItem(e);const i=e.get("above"),s=this.topGridContainer,a=e.get("grid");i&&a&&s.children.moveValue(a);const o=e.get("axisFill");i&&o&&s.children.moveValue(o)}_prepareDataItem(e,t){}markDirtyExtremes(){}markDirtySelectionExtremes(){}_calculateTotals(){}_updateAxisRanges(){this._bullets={},this.axisRanges.each(e=>{this._prepareDataItem(e)}),I(this._seriesAxisRanges,e=>{this._prepareDataItem(e)})}_prepareChildren(){if(super._prepareChildren(),this.get("fixAxisSize")?this.ghostLabel.set("visible",!0):this.ghostLabel.set("visible",!1),this.isDirty("start")||this.isDirty("end")){const t=this.chart;t&&t._updateCursor();let i=this.get("start",0),s=this.get("end",1),a=this.get("maxDeviation",.5)*Math.min(1,s-i);if(i<-a){let o=i+a;i=-a,this.setRaw("start",i),this.isDirty("end")&&this.setRaw("end",s-o)}if(s>1+a){let o=s-1-a;s=1+a,this.setRaw("end",s),this.isDirty("start")&&this.setRaw("start",i-o)}}const e=this.get("renderer");if(e._start=this.get("start"),e._end=this.get("end"),e._inversed=e.get("inversed",!1),e._axisLength=e.axisLength()/(e._end-e._start),e._updateLC(),this.isDirty("tooltip")){const t=this.get("tooltip");if(t){const i=e.get("themeTags");t.addTag("axis"),t.addTag(this.className.toLowerCase()),t._applyThemes(),i&&(t.set("themeTags",Ze(t.get("themeTags"),i)),t.label._applyThemes())}}}_updateTooltipBounds(){const e=this.get("tooltip");e&&this.get("renderer").updateTooltipBounds(e)}_updateBounds(){super._updateBounds(),this._updateTooltipBounds()}processChart(e){this.chart=e,this.get("renderer").chart=e,e.gridContainer.children.push(this.gridContainer),e.topGridContainer.children.push(this.topGridContainer),e.axisHeadersContainer.children.push(this.axisHeader),this.on("start",()=>{e._handleAxisSelection(this)}),this.on("end",()=>{e._handleAxisSelection(this)}),e.plotContainer.onPrivate("width",()=>{this.markDirtySize()}),e.plotContainer.onPrivate("height",()=>{this.markDirtySize()}),e.processAxis(this)}hideDataItem(e){return this._toggleFHDataItem(e,!0),super.hideDataItem(e)}showDataItem(e){return this._toggleFHDataItem(e,!1),super.showDataItem(e)}_toggleFHDataItem(e,t){const i="forceHidden",s=e.get("label");s&&s.set(i,t);const a=e.get("grid");a&&a.set(i,t);const o=e.get("tick");o&&o.set(i,t);const c=e.get("axisFill");c&&c.set(i,t);const d=e.get("bullet");if(d){const f=d.get("sprite");f&&f.set(i,t)}}_toggleDataItem(e,t){const i=e.get("label"),s="visible";i&&i.setPrivate(s,t);const a=e.get("grid");a&&a.setPrivate(s,t);const o=e.get("tick");o&&o.setPrivate(s,t);const c=e.get("axisFill");c&&c.setPrivate(s,t);const d=e.get("bullet");if(d){const f=d.get("sprite");f&&f.setPrivate(s,t)}}_createAssets(e,t,i){var s,a,o;const c=this.get("renderer");let d="minor";const f=e.get("label");if(f){let _=f.get("themeTags"),g=!1;i?-1==_?.indexOf(d)&&(g=!0):-1!=_?.indexOf(d)&&(g=!0),g&&(null===(s=f.parent)||void 0===s||s.children.removeValue(f),c.makeLabel(e,t),f.dispose(),c.labels.removeValue(f))}else c.makeLabel(e,t);const b=e.get("grid");if(b){let _=b.get("themeTags"),g=!1;i?-1==_?.indexOf(d)&&(g=!0):-1!=_?.indexOf(d)&&(g=!0),g&&(null===(a=b.parent)||void 0===a||a.children.removeValue(b),c.makeGrid(e,t),b.dispose(),c.grid.removeValue(b))}else c.makeGrid(e,t);const m=e.get("tick");if(m){let _=!1,g=m.get("themeTags");i?-1==g?.indexOf(d)&&(_=!0):-1!=g?.indexOf(d)&&(_=!0),_&&(null===(o=m.parent)||void 0===o||o.children.removeValue(m),c.makeTick(e,t),m.dispose(),c.ticks.removeValue(m))}else c.makeTick(e,t);!i&&!e.get("axisFill")&&c.makeAxisFill(e,t),this._processBullet(e)}_processBullet(e){let t=e.get("bullet"),i=this.get("bullet");if(!t&&i&&!e.get("isRange")&&(t=i(this._root,this,e)),t){t.axis=this;const s=t.get("sprite");s&&(s._setDataItem(e),e.setRaw("bullet",t),s.parent||this.bulletsContainer.children.push(s))}}_afterChanged(){super._afterChanged();const e=this.chart;e&&(e._updateChartLayout(),e.axisHeadersContainer.markDirtySize()),this.get("renderer")._updatePositions(),this._seriesAdded=!1}disposeDataItem(e){super.disposeDataItem(e);const t=this.get("renderer"),i=e.get("label");i&&(t.labels.removeValue(i),i.dispose());const s=e.get("tick");s&&(t.ticks.removeValue(s),s.dispose());const a=e.get("grid");a&&(t.grid.removeValue(a),a.dispose());const o=e.get("axisFill");o&&(t.axisFills.removeValue(o),o.dispose());const c=e.get("bullet");c&&c.dispose()}_updateGhost(){this.setPrivate("cellWidth",this.getCellWidthPosition()*this.get("renderer").axisLength());const e=this.ghostLabel;if(!e.isHidden()){const s=e.localBounds(),a=Math.ceil(s.right-s.left);let o=e.get("text");I(this.dataItems,c=>{const d=c.get("label");if(d&&!d.isHidden()){const f=d.localBounds();Math.ceil(f.right-f.left)>a&&(o=d.text._getText())}}),e.set("text",o)}let t=this.get("start",0),i=this.get("end",1);this.get("renderer").updateLabel(e,t+.5*(i-t))}_handleCursorPosition(e,t){e=this.get("renderer").toAxisPosition(e),this._cursorPosition=e,this._snapToSeries=t,this.updateTooltip()}updateTooltip(){const e=this._snapToSeries;let t=this._cursorPosition;const i=this.get("tooltip"),s=this.get("renderer");R(t)&&(I(this.series,a=>{if(a.get("baseAxis")===this){const o=this.getSeriesItem(a,t,this.get("tooltipLocation"));a._settings.tooltipDataItem=o,e&&-1!=e.indexOf(a)?(a.updateLegendMarker(o),a.updateLegendValue(o)):a.showDataItemTooltip(o)}}),i&&(s.updateTooltipBounds(i),this.get("snapTooltip")&&(t=this.roundAxisPosition(t,this.get("tooltipLocation",.5))),_i(t)?i.hide(0):(this.setPrivateRaw("tooltipPosition",t),this._updateTooltipText(i,t),s.positionTooltip(i,t),t<this.get("start",0)||t>this.get("end",1)?i.hide(0):i.show(0))))}_updateTooltipText(e,t){e.label.set("text",this.getTooltipText(t))}roundAxisPosition(e,t){return e}handleCursorShow(){let e=this.get("tooltip");e&&e.show()}handleCursorHide(){let e=this.get("tooltip");e&&e.hide()}processSeriesDataItem(e,t){}_clearDirty(){super._clearDirty(),this._sizeDirty=!1,this._rangesDirty=!1}coordinateToPosition(e){const t=this.get("renderer");return t.toAxisPosition(e/t.axisLength())}toAxisPosition(e){return this.get("renderer").toAxisPosition(e)}toGlobalPosition(e){return this.get("renderer").toGlobalPosition(e)}fixPosition(e){return this.get("renderer").fixPosition(e)}shouldGap(e,t,i,s){return!1}createAxisRange(e){return this.axisRanges.push(e)}_groupSeriesData(e){}getCellWidthPosition(){return.05}}Object.defineProperty(Hi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Axis"}),Object.defineProperty(Hi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:li.classNames.concat([Hi.className])});class Ai extends Hi{constructor(){super(...arguments),Object.defineProperty(this,"_frequency",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_itemMap",{enumerable:!0,configurable:!0,writable:!0,value:{}})}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["axis"]),this.fields.push("category"),this.setPrivateRaw("name","category"),this.addTag("category"),super._afterNew()}_prepareChildren(){super._prepareChildren();const e=this.dataItems.length;let t=0;this._valuesDirty&&(this._itemMap={},I(this.dataItems,i=>{i.setRaw("index",t),this._itemMap[i.get("category")]=i,t++}),this.setPrivateRaw("maxZoomFactor",e)),this.setPrivateRaw("startIndex",Math.max(Math.round(this.get("start",0)*e),0)),this.setPrivateRaw("endIndex",Math.min(Math.round(this.get("end",1)*e),e)),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("endIndex")||this.isPrivateDirty("startIndex")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&this.dataItems.length>0&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges())}_handleRangeChange(){I(this.series,e=>{let t=this.dataItems[this.startIndex()].get("category"),i=this.dataItems[this.endIndex()-1].get("category"),s=e.get("baseAxis"),a=e.get("xAxis"),o=e.get("yAxis");if(a instanceof Ai&&o instanceof Ai)e._markDirtyAxes();else if(s===this){let c,d,f=o;if(a===s?(e.get("categoryXField")&&(c="categoryX"),e.get("openCategoryXField")&&(d="openCategoryX")):o===s&&(e.get("categoryYField")&&(c="categoryY"),e.get("openCategoryYField")&&(d="openCategoryY"),f=a),"ValueAxis"==f.className&&(c||d)){let b,m;for(let v=0,P=e.dataItems.length;v<P;v++){let C=e.dataItems[v];if(c&&C.get(c)===t){b=C;break}if(d&&C.get(d)===t){b=C;break}}for(let v=e.dataItems.length-1;v>=0;v--){let P=e.dataItems[v];if(c&&P.get(c)===i){m=P;break}if(d&&P.get(d)===i){m=P;break}}let _=0,g=e.dataItems.length;b&&(_=e.dataItems.indexOf(b)),m&&(g=e.dataItems.indexOf(m)+1),e.setPrivate("startIndex",_),e.setPrivate("endIndex",g);let T=!1;for(let v=_;v<g;v++){const P=e.dataItems[v];if(I(e.__valueXShowFields,C=>{null!=P.get(C)&&(T=!0)}),I(e.__valueYShowFields,C=>{null!=P.get(C)&&(T=!0)}),T)break}e.setPrivate("outOfSelection",!T)}e._markDirtyAxes()}})}_prepareAxisItems(){var e;const t=this.get("renderer"),i=this.dataItems.length;let s=this.startIndex();s>0&&s--;let a=this.endIndex();a<i&&a++;const o=t.get("minorLabelsEnabled"),c=t.get("minorGridEnabled",o);let d=t.axisLength()/Math.max(t.get("minGridDistance"),1),f=Math.max(1,Math.min(i,Math.ceil((a-s)/d)));s=Math.floor(s/f)*f,this._frequency=f;for(let m=0;m<i;m++)this._toggleDataItem(this.dataItems[m],!1);let b=this.dataItems[s].get("index",0);for(let m=s;m<a;m+=f){let _=this.dataItems[m];this._createAssets(_,[]),this._toggleDataItem(_,!0);let g=f;c&&(g=1),this._prepareDataItem(_,b,g),b++}if(t.get("minorGridEnabled"))for(let m=s;m<a;m++){let _=this.dataItems[m];m%f!=0&&(this._createAssets(_,["minor"],!0),this._toggleDataItem(_,!0),this._prepareDataItem(_,0,1),o||null===(e=_.get("label"))||void 0===e||e.setPrivate("visible",!1))}this._updateGhost()}_prepareDataItem(e,t,i){let s=this.get("renderer"),a=e.get("categoryLocation",0),o=e.get("endCategoryLocation",1),c=e.get("index");R(c)||(c=this.categoryToIndex(e.get("category")));let b,d=this.indexToPosition(c,a),f=e.get("endCategory");f?(b=this.categoryToIndex(f),R(b)||(b=c)):b=c;let _,g,m=this.indexToPosition(b,o);_=e.get("isRange")?b:c+this._frequency-1,g=this.indexToPosition(_,o),s.updateLabel(e.get("label"),d,m,i),s.updateGrid(e.get("grid"),d,m),s.updateTick(e.get("tick"),d,m,i),s.updateFill(e.get("axisFill"),d,g),this._processBullet(e),s.updateBullet(e.get("bullet"),d,m);const T=this.get("fillRule");T&&T(e,t)}startIndex(){let e=this.dataItems.length;return Math.min(Math.max(this.getPrivate("startIndex",0),0),e-1)}endIndex(){let e=this.dataItems.length;return Math.max(1,Math.min(this.getPrivate("endIndex",e),e))}baseValue(){}basePosition(){return 0}getX(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}getY(e){let t=this._itemMap[e];return t?this._settings.renderer.positionToCoordinate(this.indexToPosition(t.get("index",0))):NaN}getDataItemPositionX(e,t,i,s){const a=e.get(t),o=this._itemMap[a];return o?this.indexToPosition(o.get("index",0),i):NaN}getDataItemCoordinateX(e,t,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,i,s))}getDataItemPositionY(e,t,i,s){const a=e.get(t),o=this._itemMap[a];return o?this.indexToPosition(o.get("index",0),i):NaN}getDataItemCoordinateY(e,t,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,i,s))}indexToPosition(e,t){R(t)||(t=.5);let i=this.dataItems.length,s=this.get("startLocation",0);i-=s,i-=1-this.get("endLocation",1);let o=(e+t-s)/i,c=this.dataItems[e];return c&&(o+=c.get("deltaPosition",0)),o}categoryToIndex(e){let t=this._itemMap[e];return t?t.get("index"):NaN}dataItemToPosition(e){return this.indexToPosition(e.get("index"))}roundAxisPosition(e,t){return this.indexToPosition(this.axisPositionToIndex(e+=(.5-t)/this.dataItems.length),t)}axisPositionToIndex(e){let t=this.dataItems.length;return je(Math.floor(e*t),0,t-1)}getTooltipText(e,t){const i=this.dataItems[this.axisPositionToIndex(e)];if(i){const s=i.get("label");if(s)return ts(s,this.get("tooltipText",""))}}_updateTooltipText(e,t){e._setDataItem(this.dataItems[this.axisPositionToIndex(t)]),e.label.text.markDirtyText()}getSeriesItem(e,t){if(this.dataItems.length>0){let i=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),s=this.axisPositionToIndex(t),a=e.dataItems[s],o=this.dataItems[s],c=o.get("category");if(a&&o&&a.get(i)===c)return a;for(let d=0,f=e.dataItems.length;d<f;d++){let b=e.dataItems[d];if(b.get(i)===c)return b}}}zoomToIndexes(e,t,i){let s=this.dataItems.length;this.zoom(e/s,t/s,i)}zoomToCategories(e,t,i){this.zoomToIndexes(this.categoryToIndex(e),this.categoryToIndex(t)+1,i)}getCellWidthPosition(){return this._frequency/this.dataItems.length/(this.get("end",1)-this.get("start",0))}}Object.defineProperty(Ai,"className",{enumerable:!0,configurable:!0,writable:!0,value:"CategoryAxis"}),Object.defineProperty(Ai,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Hi.classNames.concat([Ai.className])});class hn extends oi{constructor(){super(...arguments),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"thumb",{enumerable:!0,configurable:!0,writable:!0,value:yt.new(this._root,{height:W,isMeasured:!1,themeTags:["axis","y","thumb"]})})}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["renderer","y"]),this._settings.opposite&&this._settings.themeTags.push("opposite"),super._afterNew(),this.setPrivateRaw("letter","Y");const e=this.grid.template;e.set("width",W),e.set("height",0),e.set("draw",(t,i)=>{t.moveTo(0,0),t.lineTo(i.width(),0)}),this.set("draw",(t,i)=>{t.moveTo(0,0),t.lineTo(0,i.height())})}_getPan(e,t){return(e.y-t.y)/this.height()}_changed(){super._changed();const e=this.axis;e.ghostLabel.setPrivate("visible",!this.get("inside")),e.ghostLabel.set("y",-1e3);const t=this.thumb,i="opposite",s="inside",a=this.chart;if(this.isDirty(i)||this.isDirty(s)){const c=e.children;if(this.get(s)?e.addTag(s):e.removeTag(s),a){if(this.get(i)){const d=a.rightAxesContainer.children;-1==d.indexOf(e)&&d.moveValue(e,0),e.addTag(i),c.moveValue(this,0)}else{const d=a.leftAxesContainer.children;-1==d.indexOf(e)&&d.moveValue(e),e.removeTag(i),c.moveValue(this)}e.ghostLabel._applyThemes(),this.labels.each(d=>{d._applyThemes()}),this.root._markDirtyRedraw()}e.markDirtySize()}const o=e.labelsContainer.width();a&&(this.get(i)?t.set("centerX",0):t.set("centerX",o)),t.setPrivate("width",o)}processAxis(){super.processAxis();const e=this.axis;null==e.get("height")&&e.set("height",W);const t=this._root.horizontalLayout;e.set("layout",t),e.labelsContainer.set("height",W),e.axisHeader.set("layout",t)}_updatePositions(){const e=this.axis,t=e.y()-qe(e.get("centerY",0),e.height());e.gridContainer.set("y",t),e.topGridContainer.set("y",t),e.bulletsContainer.set("x",this.x());const i=e.chart;if(i){const s=i.plotContainer,a=e.axisHeader;let o=e.get("marginTop",0);a.children.length>0?(o=e.axisHeader.height(),e.set("marginTop",o+1)):a.set("height",o),a.setAll({y:e.y()-o,x:-1,width:s.width()+2})}}axisLength(){return this.axis.innerHeight()}positionToPoint(e){return{x:0,y:this.positionToCoordinate(e)}}updateLabel(e,t,i,s){if(e){R(t)||(t=0);let a=.5;a=R(s)&&s>1?e.get("multiLocation",a):e.get("location",a);const o=this.get("opposite"),c=e.get("inside",this.get("inside",!1));o?(e.set("x",0),e.set("position",c?"absolute":"relative")):c?(e.set("x",0),e.set("position","absolute")):(e.set("x",void 0),e.set("position","relative")),R(i)&&i!=t&&(t+=(i-t)*a),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateGrid(e,t,i){if(e){R(t)||(t=0);let s=e.get("location",.5);R(i)&&i!=t&&(t+=(i-t)*s),e.set("y",this.positionToCoordinate(t)),this.toggleVisibility(e,t,0,1)}}updateTick(e,t,i,s){if(e){R(t)||(t=0);let a=.5;a=R(s)&&s>1?e.get("multiLocation",a):e.get("location",a),R(i)&&i!=t&&(t+=(i-t)*a),e.set("y",this.positionToCoordinate(t));let o=e.get("length",0);const c=e.get("inside",this.get("inside",!1));this.get("opposite")?(e.set("x",0),c&&(o*=-1)):c||(o*=-1),e.set("draw",d=>{d.moveTo(0,0),d.lineTo(o,0)}),this.toggleVisibility(e,t,e.get("minPosition",0),e.get("maxPosition",1))}}updateBullet(e,t,i){if(e){const s=e.get("sprite");if(s){R(t)||(t=0);let a=e.get("location",.5);R(i)&&i!=t&&(t+=(i-t)*a);let o=this.axis.roundAxisPosition(t,a),c=this.axis._bullets[o],d=1;if(this.get("opposite")&&(d=-1),e.get("stacked"))if(c){let f=c.get("sprite");f&&s.set("x",f.x()+f.width()*d)}else s.set("x",0);this.axis._bullets[o]=e,s.set("y",this.positionToCoordinate(t)),this.toggleVisibility(s,t,0,1)}}}updateFill(e,t,i){if(e){R(t)||(t=0),R(i)||(i=1);let s=this.positionToCoordinate(t),a=this.positionToCoordinate(i);this.fillDrawMethod(e,s,a)}}fillDrawMethod(e,t,i){e.set("draw",s=>{const a=this.axis.gridContainer.width(),o=this.height();i<t&&([i,t]=[t,i]),!(t>o||i<0)&&(s.moveTo(0,t),s.lineTo(a,t),s.lineTo(a,i),s.lineTo(0,i),s.lineTo(0,t))})}positionToCoordinate(e){return this._inversed?(e-this._start)*this._axisLength:(this._end-e)*this._axisLength}positionTooltip(e,t){this._positionTooltip(e,{x:0,y:this.positionToCoordinate(t)})}updateTooltipBounds(e){const t=this.get("inside"),i=1e5;let s=this._display.toGlobal({x:0,y:0}),a=s.y,o=0,c=this.axisLength(),d=i,f="right";this.get("opposite")?t?(f="right",o=s.x-i,d=i):(f="left",o=s.x,d=i):t?(f="left",o=s.x,d=i):(f="right",o=s.x-i,d=i);const b={left:o,right:o+d,top:a,bottom:a+c};Za(b,e.get("bounds"))||(e.set("bounds",b),e.set("pointerOrientation",f))}_updateLC(){const e=this.axis,t=e.parent;if(t){const i=t.innerHeight();this._lc=this.axisLength()/i,this._ls=e.y()/i}}toAxisPosition(e){const t=this._start||0,i=this._end||1;return e=(e-=this._ls)*(i-t)/this._lc,this.get("inversed")?t+e:i-e}toGlobalPosition(e){const t=this._start||0,i=this._end||1;return this.get("inversed")?e-=t:e=i-e,(e=e/(i-t)*this._lc)+this._ls}fixPosition(e){return this.get("inversed")?e:1-e}}Object.defineProperty(hn,"className",{enumerable:!0,configurable:!0,writable:!0,value:"AxisRendererY"}),Object.defineProperty(hn,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:oi.classNames.concat([hn.className])});class ds extends Hi{constructor(){super(...arguments),Object.defineProperty(this,"_dirtyExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirtySelectionExtremes",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_deltaMinMax",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_minReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_maxReal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_baseValue",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_syncDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_minLogAdjusted",{enumerable:!0,configurable:!0,writable:!0,value:1})}markDirtyExtremes(){this._dirtyExtremes=!0,this.markDirty()}markDirtySelectionExtremes(){this._dirtySelectionExtremes=!0,this.markDirty()}_afterNew(){this._settings.themeTags=Ze(this._settings.themeTags,["axis"]),this.setPrivateRaw("name","value"),this.addTag("value"),super._afterNew()}_prepareChildren(){if(super._prepareChildren(),this.isDirty("syncWithAxis")){this._prevSettings.syncWithAxis&&this._syncDp&&this._syncDp.dispose();let i=this.get("syncWithAxis");i&&(this._syncDp=new st([i.onPrivate("selectionMinFinal",()=>{this._dirtySelectionExtremes=!0}),i.onPrivate("selectionMaxFinal",()=>{this._dirtySelectionExtremes=!0})]))}let e=!1;(this.isDirty("min")||this.isDirty("max")||this.isDirty("maxPrecision")||this.isDirty("numberFormat"))&&(e=!0,this.ghostLabel.set("text","")),(this._sizeDirty||this._dirtyExtremes||this._valuesDirty||e||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("extraMin")||this.isDirty("extraMax")||this.isDirty("logarithmic")||this.isDirty("treatZeroAs")||this.isDirty("baseValue")||this.isDirty("strictMinMax")||this.isDirty("strictMinMaxSelection"))&&(this._getMinMax(),this._dirtyExtremes=!1),this._dirtySelectionExtremes&&!this._isPanning&&this.get("autoZoom",!0)&&(this._getSelectionMinMax(),this._dirtySelectionExtremes=!1),this._groupData(),(this._sizeDirty||this._valuesDirty||this.isDirty("start")||this.isDirty("end")||this.isPrivateDirty("min")||this.isPrivateDirty("selectionMax")||this.isPrivateDirty("selectionMin")||this.isPrivateDirty("max")||this.isPrivateDirty("step")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("logarithmic"))&&(this._handleRangeChange(),this._prepareAxisItems(),this._updateAxisRanges()),this._baseValue=this.baseValue()}_groupData(){}_formatText(e){const t=this.get("numberFormat"),i=this.getNumberFormatter();let s="";return s=t?i.format(e,t):i.format(e,void 0,this.getPrivate("stepDecimalPlaces")),s}_prepareAxisItems(){const e=this.getPrivate("min"),t=this.getPrivate("max");if(R(e)&&R(t)){const i=this.get("logarithmic"),s=this.getPrivate("step"),a=this.getPrivate("selectionMin"),o=this.getPrivate("selectionMax")+s;let c=a-s,d=1,f=e;if(i){if(c=this._minLogAdjusted,c<a)for(;c<a;)c+=s;f=c,f<=0&&(f=1,s<1&&(f=s)),d=Math.log(o-s)*Math.LOG10E-Math.log(f)*Math.LOG10E,d>2&&(c=Math.pow(10,Math.log(f)*Math.LOG10E-5))}const b=this.get("renderer"),m=b.get("minorLabelsEnabled"),_=b.get("minorGridEnabled",m);let g=Math.pow(10,Math.floor(Math.log(Math.abs(s))*Math.LOG10E));const T=Math.round(s/g);let v=2;tt(T/5,10)%1==0&&(v=5),tt(T/10,10)%1==0&&(v=10);let P=s/v,C=0,E=0,k=-1/0;for(;c<o;){let S;this.dataItems.length<C+1?(S=new Zi(this,void 0,{}),this._dataItems.push(S),this.processDataItem(S)):S=this.dataItems[C],this._createAssets(S,[]),this._toggleDataItem(S,!0),S.setRaw("value",c);const B=S.get("label");B&&B.set("text",this._formatText(c)),this._prepareDataItem(S);let z=c;if(i&&d>2?z=Math.pow(10,Math.log(f)*Math.LOG10E+C-5):z+=s,_){let Z=c+P;for(i&&(d>2&&(P=this._adjustMinMax(c,z,10).step),Z=c+P);Z<z-1e-11*s;){let V;this.minorDataItems.length<E+1?(V=new Zi(this,void 0,{}),this.minorDataItems.push(V),this.processDataItem(V)):V=this.minorDataItems[E],this._createAssets(V,["minor"],!0),this._toggleDataItem(V,!0),V.setRaw("value",Z);const $=V.get("label");$&&(m?$.set("text",this._formatText(Z)):$.setPrivate("visible",!1)),this._prepareDataItem(V),Z+=P,E++}}if(c=z,k==c)break;let G=Math.pow(10,Math.floor(Math.log(Math.abs(s))*Math.LOG10E));G<1&&(c=tt(c,Math.round(Math.abs(Math.log(Math.abs(G))*Math.LOG10E))+2)),C++,k=c}for(let S=C;S<this.dataItems.length;S++)this._toggleDataItem(this.dataItems[S],!1);for(let S=E;S<this.minorDataItems.length;S++)this._toggleDataItem(this.minorDataItems[S],!1);I(this.series,S=>{S.inited&&S._markDirtyAxes()}),this._updateGhost()}}_prepareDataItem(e,t){let i=this.get("renderer"),s=e.get("value"),a=e.get("endValue"),o=this.valueToPosition(s),c=o,d=this.valueToPosition(s+this.getPrivate("step"));R(a)&&(c=this.valueToPosition(a),d=c),e.get("isRange")&&null==a&&(d=o);let f=c,b=e.get("labelEndValue");null!=b&&(f=this.valueToPosition(b)),i.updateLabel(e.get("label"),o,f,t);const m=e.get("grid");if(i.updateGrid(m,o,c),m&&(s==this.get("baseValue",0)?(m.addTag("base"),m._applyThemes()):m.hasTag("base")&&(m.removeTag("base"),m._applyThemes())),i.updateTick(e.get("tick"),o,f,t),i.updateFill(e.get("axisFill"),o,d),this._processBullet(e),i.updateBullet(e.get("bullet"),o,c),!e.get("isRange")){const _=this.get("fillRule");_&&_(e)}}_handleRangeChange(){let e=this.positionToValue(this.get("start",0)),t=this.positionToValue(this.get("end",1));const i=this.get("renderer").gridCount();let s=this._adjustMinMax(e,t,i,!0),a=function jn(l){let e=(""+l).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}(s.step);this.setPrivateRaw("stepDecimalPlaces",a),e=tt(e,a),t=tt(t,a),s=this._adjustMinMax(e,t,i,!0);let o=s.step;e=s.min,t=s.max,(this.getPrivate("selectionMin")!==e||this.getPrivate("selectionMax")!==t||this.getPrivate("step")!==o)&&(this.setPrivateRaw("selectionMin",e),this.setPrivateRaw("selectionMax",t),this.setPrivateRaw("step",o))}positionToValue(e){const t=this.getPrivate("min"),i=this.getPrivate("max");return this.get("logarithmic")?Math.pow(Math.E,(e*(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)+Math.log(t)*Math.LOG10E)/Math.LOG10E):e*(i-t)+t}valueToPosition(e){const t=this.getPrivate("min"),i=this.getPrivate("max");if(this.get("logarithmic")){if(e<=0){let s=this.get("treatZeroAs");R(s)&&(e=s)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(i-t)}valueToFinalPosition(e){const t=this.getPrivate("minFinal"),i=this.getPrivate("maxFinal");if(this.get("logarithmic")){if(e<=0){let s=this.get("treatZeroAs");R(s)&&(e=s)}return(Math.log(e)*Math.LOG10E-Math.log(t)*Math.LOG10E)/(Math.log(i)*Math.LOG10E-Math.log(t)*Math.LOG10E)}return(e-t)/(i-t)}getX(e,t,i){const s=this.valueToPosition(e=i+(e-i)*t);return this._settings.renderer.positionToCoordinate(s)}getY(e,t,i){const s=this.valueToPosition(e=i+(e-i)*t);return this._settings.renderer.positionToCoordinate(s)}getDataItemCoordinateX(e,t,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionX(e,t,i,s))}getDataItemPositionX(e,t,i,s){let a=e.get(t);return a=e.get("stackToItemX")?a*s+e.component.getStackedXValueWorking(e,t):this._baseValue+(a-this._baseValue)*s,this.valueToPosition(a)}getDataItemCoordinateY(e,t,i,s){return this._settings.renderer.positionToCoordinate(this.getDataItemPositionY(e,t,i,s))}getDataItemPositionY(e,t,i,s){let a=e.get(t);return a=e.get("stackToItemY")?a*s+e.component.getStackedYValueWorking(e,t):this._baseValue+(a-this._baseValue)*s,this.valueToPosition(a)}basePosition(){return this.valueToPosition(this.baseValue())}baseValue(){const e=Math.min(this.getPrivate("minFinal",-1/0),this.getPrivate("selectionMin",-1/0)),t=Math.max(this.getPrivate("maxFinal",1/0),this.getPrivate("selectionMax",1/0));let i=this.get("baseValue",0);return i<e&&(i=e),i>t&&(i=t),i}cellEndValue(e){return e}fixSmallStep(e){return 1+e===1?this.fixSmallStep(e*=2):e}_fixMin(e){return e}_fixMax(e){return e}_calculateTotals(){if(this.get("calculateTotals")){let e=this.series[0];if(e){let t=e.startIndex();if(e.dataItems.length>0){t>0&&t--;let s,a,i=e.endIndex();i<e.dataItems.length&&i++,e.get("yAxis")==this?(s="valueY",a="vcy"):e.get("xAxis")==this&&(s="valueX",a="vcx");let o=s+"Working";if(s)for(let c=t;c<i;c++){let d=0,f=0;I(this.series,b=>{if(!b.get("excludeFromTotal")){let m=b.dataItems[c];if(m){let _=m.get(o)*b.get(a);_i(_)||(d+=_,f+=Math.abs(_))}}}),I(this.series,b=>{if(!b.get("excludeFromTotal")){let m=b.dataItems[c];if(m){let _=m.get(o)*b.get(a);_i(_)||(m.set(s+"Total",f),m.set(s+"Sum",d),m.set(s+"TotalPercent",_/f*100))}}})}}}}}_getSelectionMinMax(){const e=this.getPrivate("minFinal"),t=this.getPrivate("maxFinal"),i=this.get("min"),s=this.get("max");let a=this.get("extraMin",0),o=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(a=.1),null==this.get("extraMax")&&(o=.2));const c=this.get("renderer").gridCount(),d=this.get("strictMinMaxSelection");let f=this.get("strictMinMax");if(R(e)&&R(t)){let b=t,m=e;if(I(this.series,k=>{if(!k.get("ignoreMinMax")){let S,B;const z=k.getPrivate("outOfSelection");if(k.get("xAxis")===this){if(!z){let G=k.getPrivate("minX"),Z=k.getPrivate("maxX");(0!=k.startIndex()||k.endIndex()!=k.dataItems.length)&&(G=void 0,Z=void 0),S=k.getPrivate("selectionMinX",G),B=k.getPrivate("selectionMaxX",Z)}}else if(k.get("yAxis")===this&&!z){let G=k.getPrivate("minY"),Z=k.getPrivate("maxY");(0!=k.startIndex()||k.endIndex()!=k.dataItems.length)&&(G=void 0,Z=void 0),S=k.getPrivate("selectionMinY",G),B=k.getPrivate("selectionMaxY",Z)}!k.isHidden()&&!k.isShowing()&&(R(S)&&(b=Math.min(b,S)),R(B)&&(m=Math.max(m,B)))}}),this.axisRanges.each(k=>{if(k.get("affectsMinMax")){let S=k.get("value");null!=S&&(b=Math.min(b,S),m=Math.max(m,S)),S=k.get("endValue"),null!=S&&(b=Math.min(b,S),m=Math.max(m,S))}}),b>m&&([b,m]=[m,b]),R(i)?b=f?i:e:f&&R(this._minReal)&&(b=this._minReal),R(s)?m=f?s:t:f&&R(this._maxReal)&&(m=this._maxReal),b===m){let k=b;if(b-=this._deltaMinMax,m+=this._deltaMinMax,b<e){let B=k-e;0==B&&(B=this._deltaMinMax),b=k-B,m=k+B,f=!0}let S=this._adjustMinMax(b,m,c,f);b=S.min,m=S.max}let _=b,g=m;b-=(m-b)*a,m+=(m-b)*o;let T=this._adjustMinMax(b,m,c);b=T.min,m=T.max,b=je(b,e,t),m=je(m,e,t),T=this._adjustMinMax(b,m,c,!0),f||(b=T.min,m=T.max);const v=this.get("syncWithAxis");v&&(T=this._syncAxes(b,m,T.step,v.getPrivate("selectionMinFinal",v.getPrivate("minFinal",0)),v.getPrivate("selectionMaxFinal",v.getPrivate("maxFinal",1)),v.getPrivate("selectionStepFinal",v.getPrivate("step",1))),b=T.min,m=T.max),f&&(R(i)&&(b=Math.max(b,i)),R(s)&&(m=Math.min(m,s))),d&&(b=_-(m-b)*a,m=g+(m-b)*o),this.get("logarithmic")&&(b<=0&&(b=_*(1-Math.min(a,.99))),b<e&&(b=e),m>t&&(m=t));let P=Math.min(20,Math.ceil(Math.log(this.getPrivate("maxZoomFactor",100)+1)/Math.LN10)+2),C=tt(this.valueToFinalPosition(b),P),E=tt(this.valueToFinalPosition(m),P);this.setPrivateRaw("selectionMinFinal",b),this.setPrivateRaw("selectionMaxFinal",m),this.setPrivateRaw("selectionStepFinal",T.step),this.zoom(C,E)}}_getMinMax(){let e=this.get("min"),t=this.get("max"),i=1/0,s=-1/0,a=this.get("extraMin",0),o=this.get("extraMax",0);this.get("logarithmic")&&(null==this.get("extraMin")&&(a=.1),null==this.get("extraMax")&&(o=.2));let c=1/0;if(I(this.series,k=>{if(!k.get("ignoreMinMax")){let S,B;if(k.get("xAxis")===this?(S=k.getPrivate("minX"),B=k.getPrivate("maxX")):k.get("yAxis")===this&&(S=k.getPrivate("minY"),B=k.getPrivate("maxY")),R(S)&&R(B)){i=Math.min(i,S),s=Math.max(s,B);let z=B-S;z<=0&&(z=Math.abs(B/100)),z<c&&(c=z)}}}),this.axisRanges.each(k=>{if(k.get("affectsMinMax")){let S=k.get("value");null!=S&&(i=Math.min(i,S),s=Math.max(s,S)),S=k.get("endValue"),null!=S&&(i=Math.min(i,S),s=Math.max(s,S))}}),this.get("logarithmic")){let k=this.get("treatZeroAs");R(k)&&i<=0&&(i=k),i<=0&&new Error("Logarithmic value axis can not have values <= 0.")}if(0===i&&0===s&&(s=.9,i=-.9),R(e)&&(i=e),R(t)&&(s=t),i===1/0||s===-1/0)return this.setPrivate("minFinal",void 0),void this.setPrivate("maxFinal",void 0);const d=i,f=s;let b=this.adapters.fold("min",i),m=this.adapters.fold("max",s);R(b)&&(i=b),R(m)&&(s=m),i=this._fixMin(i),s=this._fixMax(s),s-i<=1/Math.pow(10,15)&&(s-i!=0?this._deltaMinMax=(s-i)/2:this._getDelta(s),i-=this._deltaMinMax,s+=this._deltaMinMax),i-=(s-i)*a,s+=(s-i)*o,this.get("logarithmic")&&(i<0&&d>=0&&(i=0),s>0&&f<=0&&(s=0)),this._minReal=i,this._maxReal=s;let _=this.get("strictMinMax"),g=this.get("strictMinMaxSelection",!1);g&&(_=g);let T=_;R(t)&&(T=!0);let v=this.get("renderer").gridCount(),P=this._adjustMinMax(i,s,v,T);i=P.min,s=P.max,P=this._adjustMinMax(i,s,v,!0),i=P.min,s=P.max,_&&(i=R(e)?e:this._minReal,s=R(t)?t:this._maxReal,s-i<=1e-8&&(i-=this._deltaMinMax,s+=this._deltaMinMax),i-=(s-i)*a,s+=(s-i)*o),b=this.adapters.fold("min",i),m=this.adapters.fold("max",s),R(b)&&(i=b),R(m)&&(s=m),c==1/0&&(c=s-i);let C=Math.round(Math.abs(Math.log(Math.abs(s-i))*Math.LOG10E))+5;i=tt(i,C),s=tt(s,C);const E=this.get("syncWithAxis");if(E&&(P=this._syncAxes(i,s,P.step,E.getPrivate("minFinal",E.getPrivate("min",0)),E.getPrivate("maxFinal",E.getPrivate("max",1)),E.getPrivate("step",1)),i=P.min,s=P.max),this.setPrivateRaw("maxZoomFactor",Math.max(1,Math.ceil((s-i)/c*this.get("maxZoomFactor",100)))),this._fixZoomFactor(),this.get("logarithmic")&&(this._minLogAdjusted=i,i=this._minReal,s=this._maxReal,i<=0&&(i=d*(1-Math.min(a,.99)))),R(i)&&R(s)&&(this.getPrivate("minFinal")!==i||this.getPrivate("maxFinal")!==s)){this.setPrivate("minFinal",i),this.setPrivate("maxFinal",s),this._saveMinMax(i,s);const k=this.get("interpolationDuration",0),S=this.get("interpolationEasing");this.animatePrivate({key:"min",to:i,duration:k,easing:S}),this.animatePrivate({key:"max",to:s,duration:k,easing:S})}}_fixZoomFactor(){}_getDelta(e){let t=Math.log(Math.abs(e))*Math.LOG10E,i=Math.pow(10,Math.floor(t));i/=10,this._deltaMinMax=i}_saveMinMax(e,t){}_adjustMinMax(e,t,i,s){i<=1&&(i=1),i=Math.round(i);let a=e,o=t,c=t-e;0===c&&(c=Math.abs(t));let d=Math.log(Math.abs(c))*Math.LOG10E,f=Math.pow(10,Math.floor(d));f/=10;let b=f;s&&(b=0),s?(e=Math.floor(e/f)*f,t=Math.ceil(t/f)*f):(e=Math.ceil(e/f)*f-b,t=Math.floor(t/f)*f+b),e<0&&a>=0&&(e=0),t>0&&o<=0&&(t=0),d=Math.log(Math.abs(c))*Math.LOG10E,f=Math.pow(10,Math.floor(d)),f/=100;let m=Math.ceil(c/i/f)*f,_=Math.pow(10,Math.floor(Math.log(Math.abs(m))*Math.LOG10E)),g=Math.ceil(m/_);g>5?g=10:g<=5&&g>2&&(g=5),m=Math.ceil(m/(_*g))*_*g;let T=this.get("maxPrecision");if(R(T)){let E=function Ki(l,e){if(!R(e)||e<=0)return Math.ceil(l);{let t=Math.pow(10,e);return Math.ceil(l*t)/t}}(m,T);T<Number.MAX_VALUE&&m!==E&&(m=E)}let v=0;_<1&&(v=Math.round(Math.abs(Math.log(Math.abs(_))*Math.LOG10E))+1,m=tt(m,v));let C,P=Math.floor(e/m);return e=tt(m*P,v),C=s?Math.floor(t/m):Math.ceil(t/m),C===P&&C++,(t=tt(m*C,v))<o&&(t+=m),e>a&&(e-=m),m=this.fixSmallStep(m),{min:e,max:t,step:m}}getTooltipText(e,t){const i=this.get("tooltipNumberFormat",this.get("numberFormat")),s=this.getNumberFormatter(),a=this.get("extraTooltipPrecision",0),o=this.getPrivate("stepDecimalPlaces",0)+a,c=tt(this.positionToValue(e),o);return i?s.format(c,i):s.format(c,void 0,o)}getSeriesItem(e,t){let a,o,i=this.getPrivate("name")+this.get("renderer").getPrivate("letter"),s=this.positionToValue(t);if(I(e.dataItems,(c,d)=>{const f=Math.abs(c.get(i)-s);(void 0===a||f<o)&&(a=d,o=f)}),null!=a)return e.dataItems[a]}zoomToValues(e,t,i){const s=this.getPrivate("minFinal",0),a=this.getPrivate("maxFinal",0);null!=this.getPrivate("min")&&null!=this.getPrivate("max")&&this.zoom((e-s)/(a-s),(t-s)/(a-s),i)}_syncAxes(e,t,i,s,a,o){if(this.get("syncWithAxis")){let d=Math.round(a-s)/o,f=Math.round((t-e)/i),b=this.get("renderer").gridCount();if(R(d)&&R(f)){let m=!1,_=0,g=.01*(t-e),T=e,v=t,P=i;for(;1!=m;)if(m=this._checkSync(T,v,P,d),_++,_>500&&(m=!0),m)e=T,t=v,i=P;else{_/3==Math.round(_/3)?(T=e-g*_,e>=0&&T<0&&(T=0)):(v=t+g*_,v<=0&&v>0&&(v=0));let C=this._adjustMinMax(T,v,b,!0);T=C.min,v=C.max,P=C.step}}}return{min:e,max:t,step:i}}_checkSync(e,t,i,s){let a=(t-e)/i;for(let o=1;o<s;o++)if(tt(a/o,1)==s||a*o==s)return!0;return!1}getCellWidthPosition(){let e=this.getPrivate("selectionMax",this.getPrivate("max")),t=this.getPrivate("selectionMin",this.getPrivate("min"));return R(e)&&R(t)?this.getPrivate("step",1)/(e-t):.05}}Object.defineProperty(ds,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ValueAxis"}),Object.defineProperty(ds,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Hi.classNames.concat([ds.className])});class Pt extends li{constructor(){super(...arguments),Object.defineProperty(this,"_aggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionAggregatesCalculated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_psi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pei",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"bullets",{enumerable:!0,configurable:!0,writable:!0,value:new _r}),Object.defineProperty(this,"bulletsContainer",{enumerable:!0,configurable:!0,writable:!0,value:ie.new(this._root,{width:W,height:W,position:"absolute"})})}_afterNew(){this.valueFields.push("value","customValue"),super._afterNew(),this.setPrivate("customData",{}),this._disposers.push(this.bullets.events.onAll(e=>{if("clear"===e.type)this._handleBullets(this.dataItems);else if("push"===e.type)this._handleBullets(this.dataItems);else if("setIndex"===e.type)this._handleBullets(this.dataItems);else if("insertIndex"===e.type)this._handleBullets(this.dataItems);else if("removeIndex"===e.type)this._handleBullets(this.dataItems);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");this._handleBullets(this.dataItems)}}))}_dispose(){this.bulletsContainer.dispose(),super._dispose()}startIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("startIndex",0),e)}endIndex(){let e=this.dataItems.length;return Math.min(this.getPrivate("endIndex",e),e)}_handleBullets(e){I(e,t=>{const i=t.bullets;i&&(I(i,s=>{s.dispose()}),t.bullets=void 0)}),this.markDirtyValues()}getDataItemById(e){return Ea(this.dataItems,t=>t.get("id")==e)}_makeBullets(e){this._shouldMakeBullet(e)&&(e.bullets=[],this.bullets.each(t=>{this._makeBullet(e,t)}))}_shouldMakeBullet(e){return!0}_makeBullet(e,t,i){const s=t(this._root,this,e);return s&&(s._index=i,this._makeBulletReal(e,s)),s}_makeBulletReal(e,t){let i=t.get("sprite");i&&(i._setDataItem(e),i.setRaw("position","absolute"),this.bulletsContainer.children.push(i)),t.series=this,e.bullets.push(t)}addBullet(e,t){e.bullets||(e.bullets=[]),t&&this._makeBulletReal(e,t)}_clearDirty(){super._clearDirty(),this._aggregatesCalculated=!1,this._selectionAggregatesCalculated=!1}_prepareChildren(){super._prepareChildren();let e=this.startIndex(),t=this.endIndex();if(this.isDirty("name")&&this.updateLegendValue(),this.isDirty("heatRules")&&(this._valuesDirty=!0),this.isPrivateDirty("baseValueSeries")){const s=this.getPrivate("baseValueSeries");s&&this._disposers.push(s.onPrivate("startIndex",()=>{this.markDirtyValues()}))}if(this.get("calculateAggregates")&&(this._valuesDirty&&!this._dataProcessed&&(this._aggregatesCalculated||(this._calculateAggregates(0,this.dataItems.length),this._aggregatesCalculated=!0,0!=e&&(this._psi=void 0))),(this._psi!=e||this._pei!=t||this.isPrivateDirty("adjustedStartIndex"))&&!this._selectionAggregatesCalculated&&(0===e&&t===this.dataItems.length&&this._aggregatesCalculated||this._calculateAggregates(e,t),this._selectionAggregatesCalculated=!0)),this.isDirty("tooltip")){let s=this.get("tooltip");s&&(s.hide(0),s.set("tooltipTarget",this))}if(this.isDirty("fill")||this.isDirty("stroke")){let s;const a=this.get("legendDataItem");if(a&&(s=a.get("markerRectangle"),s&&this.isVisible())){if(this.isDirty("stroke")){let o=this.get("stroke");s.set("stroke",o)}if(this.isDirty("fill")){let o=this.get("fill");s.set("fill",o)}}this.updateLegendMarker(void 0)}if(this.bullets.length>0){let s=this.startIndex(),a=this.endIndex();a<this.dataItems.length&&a++;for(let o=s;o<a;o++){let c=this.dataItems[o];c.bullets||this._makeBullets(c)}}}_adjustStartIndex(e){return e}_calculateAggregates(e,t){let i=this._valueFields;if(!i)throw new Error("No value fields are set for the series.");const s={},a={},o={},c={},d={},f={},b={},m={},_={};I(i,g=>{s[g]=0,a[g]=0,o[g]=0}),I(i,g=>{let T=g+"Change",v=g+"ChangePercent",P=g+"ChangePrevious",C=g+"ChangePreviousPercent",E=g+"ChangeSelection",k=g+"ChangeSelectionPercent",S="valueY";("valueX"==g||"openValueX"==g||"lowValueX"==g||"highValueX"==g)&&(S="valueX");const B=this.getPrivate("baseValueSeries"),z=this.getPrivate("adjustedStartIndex",e);for(let G=z;G<t;G++){const Z=this.dataItems[G];let V=Z.get(g);null!=V&&(o[g]++,s[g]+=V,a[g]+=Math.abs(V),m[g]=s[g]/o[g],(c[g]>V||null==c[g])&&(c[g]=V),(d[g]<V||null==d[g])&&(d[g]=V),b[g]=V,null==f[g]&&(f[g]=V,_[g]=V,B&&(f[S]=B._getBase(S))),0===e&&(Z.setRaw(T,V-f[S]),Z.setRaw(v,(V-f[S])/f[S]*100)),Z.setRaw(P,V-_[S]),Z.setRaw(C,(V-_[S])/_[S]*100),Z.setRaw(E,V-f[S]),Z.setRaw(k,(V-f[S])/f[S]*100),_[g]=V)}if(t<this.dataItems.length-1){const G=this.dataItems[t];let Z=G.get(g);G.setRaw(P,Z-_[S]),G.setRaw(C,(Z-_[S])/_[S]*100),G.setRaw(E,Z-f[S]),G.setRaw(k,(Z-f[S])/f[S]*100)}e>0&&e--,delete _[g];for(let G=e;G<z;G++){const Z=this.dataItems[G];let V=Z.get(g);null==_[g]&&(_[g]=V),null!=V&&(Z.setRaw(P,V-_[S]),Z.setRaw(C,(V-_[S])/_[S]*100),Z.setRaw(E,V-f[S]),Z.setRaw(k,(V-f[S])/f[S]*100),_[g]=V)}}),I(i,g=>{this.setPrivate(g+"AverageSelection",m[g]),this.setPrivate(g+"CountSelection",o[g]),this.setPrivate(g+"SumSelection",s[g]),this.setPrivate(g+"AbsoluteSumSelection",a[g]),this.setPrivate(g+"LowSelection",c[g]),this.setPrivate(g+"HighSelection",d[g]),this.setPrivate(g+"OpenSelection",f[g]),this.setPrivate(g+"CloseSelection",b[g])}),0===e&&t===this.dataItems.length&&I(i,g=>{this.setPrivate(g+"Average",m[g]),this.setPrivate(g+"Count",o[g]),this.setPrivate(g+"Sum",s[g]),this.setPrivate(g+"AbsoluteSum",a[g]),this.setPrivate(g+"Low",c[g]),this.setPrivate(g+"High",d[g]),this.setPrivate(g+"Open",f[g]),this.setPrivate(g+"Close",b[g])})}_updateChildren(){super._updateChildren(),this._psi=this.startIndex(),this._pei=this.endIndex(),this.isDirty("visible")&&this.bulletsContainer.set("visible",this.get("visible"));const e=this.get("heatRules");if(this._valuesDirty&&e&&e.length>0&&I(e,t=>{const i=t.minValue||this.getPrivate(t.dataField+"Low")||0,s=t.maxValue||this.getPrivate(t.dataField+"High")||0;I(t.target._entities,a=>{const o=a.dataItem.get(t.dataField);if(R(o))if(t.customFunction)t.customFunction.call(this,a,i,s,o);else{let c,d;c=t.logarithmic?(Math.log(o)*Math.LOG10E-Math.log(i)*Math.LOG10E)/(Math.log(s)*Math.LOG10E-Math.log(i)*Math.LOG10E):(o-i)/(s-i),R(o)&&(!R(c)||Math.abs(c)==1/0)&&(c=.5),R(t.min)?d=t.min+(t.max-t.min)*c:t.min instanceof J?d=J.interpolate(c,t.min,t.max):t.min instanceof le&&(d=Xa(c,t.min,t.max)),a.set(t.key,d);const f=a.states;if(f){const b=f.lookup("default");b&&b.set(t.key,d)}}else{t.neutral&&a.set(t.key,t.neutral);const c=a.states;if(c){const d=c.lookup("default");d&&d.set(t.key,t.neutral)}}})}),this.get("visible")){let t=this.dataItems.length,i=this.startIndex(),s=this.endIndex();s<t&&s++,i>0&&i--;for(let a=0;a<i;a++)this._hideBullets(this.dataItems[a]);for(let a=i;a<s;a++)this._positionBullets(this.dataItems[a]);for(let a=s;a<t;a++)this._hideBullets(this.dataItems[a])}}_positionBullets(e){e.bullets&&I(e.bullets,t=>{this._positionBullet(t);const i=t.get("sprite");t.get("dynamic")&&(i&&(i._markDirtyKey("fill"),i.markDirtySize()),i instanceof ie&&i.walkChildren(s=>{s._markDirtyKey("fill"),s.markDirtySize(),s instanceof Ti&&s.text.markDirtyText()})),i instanceof Ti&&i.get("populateText")&&i.text.markDirtyText()})}_hideBullets(e){e.bullets&&I(e.bullets,t=>{let i=t.get("sprite");i&&i.setPrivate("visible",!1)})}_positionBullet(e){}_placeBulletsContainer(e){e.bulletsContainer.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){const e=this.bulletsContainer;e.parent&&e.parent.children.removeValue(e)}disposeDataItem(e){const t=e.bullets;t&&I(t,i=>{i.dispose()})}_getItemReaderLabel(){return""}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,e,t)],a=e.bullets;a&&I(a,o=>{const c=o.get("sprite");c&&s.push(c.show(t))}),yield Promise.all(s)})}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,e,t)],a=e.bullets;a&&I(a,o=>{const c=o.get("sprite");c&&s.push(c.hide(t))}),yield Promise.all(s)})}_sequencedShowHide(e,t){return(0,Qe.mG)(this,void 0,void 0,function*(){if(this.get("sequencedInterpolation"))if(R(t)||(t=this.get("interpolationDuration",0)),t>0){const i=this.startIndex(),s=this.endIndex();yield Promise.all(Cs(this.dataItems,(a,o)=>(0,Qe.mG)(this,void 0,void 0,function*(){let c=t||0;(o<i-10||o>s+10)&&(c=0);let d=this.get("sequencedDelay",0)+c/(s-i);yield function ha(l){return new Promise((e,t)=>{setTimeout(e,l)})}(d*(o-i)),e?yield this.showDataItem(a,c):yield this.hideDataItem(a,c)})))}else yield Promise.all(Cs(this.dataItems,i=>e?this.showDataItem(i,0):this.hideDataItem(i,0)))})}updateLegendValue(e){if(e){const t=e.get("legendDataItem");if(t){const i=t.get("valueLabel");if(i){const a=i.text;let o="";i._setDataItem(e),o=this.get("legendValueText",a.get("text","")),i.set("text",o),a.markDirtyText()}const s=t.get("label");if(s){const a=s.text;let o="";s._setDataItem(e),o=this.get("legendLabelText",a.get("text","")),s.set("text",o),a.markDirtyText()}}}}updateLegendMarker(e){}_onHide(){super._onHide();const e=this.getTooltip();e&&e.hide()}hoverDataItem(e){}unhoverDataItem(e){}_getBase(e){const t=this.dataItems[this.startIndex()];return t?t.get(e):0}}Object.defineProperty(Pt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Series"}),Object.defineProperty(Pt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:li.classNames.concat([Pt.className])});class fs extends Pt{constructor(){super(...arguments),Object.defineProperty(this,"_xField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yOpenField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_xHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yLowField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_yHighField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_axesDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_stackDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_selectionProcessed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dataSets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_mainContainerMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_bullets",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"mainContainer",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(ie.new(this._root,{}))}),Object.defineProperty(this,"axisRanges",{enumerable:!0,configurable:!0,writable:!0,value:new _r}),Object.defineProperty(this,"_skipped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_couldStackTo",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_reallyStackedTo",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_stackedSeries",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_aLocationX0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationX1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_aLocationY0",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_aLocationY1",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_showBullets",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueX","openValueX","lowValueX","highValueX"]}),Object.defineProperty(this,"valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:["valueY","openValueY","lowValueY","highValueY"]}),Object.defineProperty(this,"_valueXFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueXShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__valueYShowFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_emptyDataItem",{enumerable:!0,configurable:!0,writable:!0,value:new Zi(this,void 0,{})}),Object.defineProperty(this,"_dataSetId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipFieldY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posXDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_posYDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("categoryX","categoryY","openCategoryX","openCategoryY"),this.valueFields.push("valueX","valueY","openValueX","openValueY","lowValueX","lowValueY","highValueX","highValueY"),this._setRawDefault("vcx",1),this._setRawDefault("vcy",1),this._setRawDefault("valueXShow","valueXWorking"),this._setRawDefault("valueYShow","valueYWorking"),this._setRawDefault("openValueXShow","openValueXWorking"),this._setRawDefault("openValueYShow","openValueYWorking"),this._setRawDefault("lowValueXShow","lowValueXWorking"),this._setRawDefault("lowValueYShow","lowValueYWorking"),this._setRawDefault("highValueXShow","highValueXWorking"),this._setRawDefault("highValueYShow","highValueYWorking"),this._setRawDefault("lowValueXGrouped","low"),this._setRawDefault("lowValueYGrouped","low"),this._setRawDefault("highValueXGrouped","high"),this._setRawDefault("highValueYGrouped","high"),super._afterNew(),this.set("maskContent",!0),this._disposers.push(this.axisRanges.events.onAll(e=>{if("clear"===e.type)I(e.oldValues,t=>{this._removeAxisRange(t)});else if("push"===e.type)this._processAxisRange(e.newValue);else if("setIndex"===e.type)this._processAxisRange(e.newValue);else if("insertIndex"===e.type)this._processAxisRange(e.newValue);else if("removeIndex"===e.type)this._removeAxisRange(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IStreamEvent type");this._processAxisRange(e.value)}})),this.states.create("hidden",{opacity:1,visible:!1}),this.onPrivate("startIndex",()=>{this.root.events.once("frameended",()=>{this.updateLegendValue()})}),this.onPrivate("endIndex",()=>{this.root.events.once("frameended",()=>{this.updateLegendValue()})}),this._makeFieldNames()}_processAxisRange(e){const t=ie.new(this._root,{});e.container=t,this.children.push(t),e.series=this;const i=e.axisDataItem;i.setRaw("isRange",!0);const s=i.component;if(s){s._processAxisRange(i,["range","series"]);const a=i.get("bullet");if(a){const c=a.get("sprite");c&&c.setPrivate("visible",!1)}const o=i.get("axisFill");o&&t.set("mask",o),s._seriesAxisRanges.push(i)}}_removeAxisRange(e){const t=e.axisDataItem,i=t.component;i.disposeDataItem(t),bt(i._seriesAxisRanges,t);const s=e.container;s&&s.dispose()}_updateFields(){super._updateFields(),this._valueXFields=[],this._valueYFields=[],this._valueXShowFields=[],this._valueYShowFields=[],this.__valueXShowFields=[],this.__valueYShowFields=[],this.valueXFields&&I(this.valueXFields,e=>{if(this.get(e+"Field")){this._valueXFields.push(e);let i=this.get(e+"Show");this.__valueXShowFields.push(i),-1!=i.indexOf("Working")?this._valueXShowFields.push(i.split("Working")[0]):this._valueXShowFields.push(i)}}),this.valueYFields&&I(this.valueYFields,e=>{if(this.get(e+"Field")){this._valueYFields.push(e);let i=this.get(e+"Show");this.__valueYShowFields.push(i),-1!=i.indexOf("Working")?this._valueYShowFields.push(i.split("Working")[0]):this._valueYShowFields.push(i)}})}_dispose(){super._dispose(),this._bullets={};const e=this.chart;e&&e.series.removeValue(this),ot(this.get("xAxis").series,this),ot(this.get("yAxis").series,this)}_min(e,t){let i=function vo(l,e){return null==l?e:null==e?l:e<l?e:l}(this.getPrivate(e),t);this.setPrivate(e,i)}_max(e,t){let i=function yo(l,e){return null==l?e:null==e?l:e>l?e:l}(this.getPrivate(e),t);this.setPrivate(e,i)}_shouldMakeBullet(e){const t=this.get("xAxis"),i=this.get("yAxis"),s=this.get("baseAxis");if(!t.inited||!i.inited)return!1;const a=this.get("minBulletDistance",0);if(a>0){let o=this.startIndex(),d=this.endIndex()-o;if(t==s){if(t.get("renderer").axisLength()/d<a/5)return!1}else if(i==s&&i.get("renderer").axisLength()/d<a/5)return!1}return null!=e.get(this._xField)&&null!=e.get(this._yField)}_makeFieldNames(){const e=this.get("xAxis"),t=this.get("yAxis"),i=e.getPrivate("name"),s=Is(i),a=t.getPrivate("name"),o=Is(a),c=e.get("renderer").getPrivate("letter"),d=t.get("renderer").getPrivate("letter"),f="open",b="low",m="high",_="Show";"ValueAxis"===e.className?(this._xField=this.get(i+c+_),this._xOpenField=this.get(f+s+c+_),this._xLowField=this.get(b+s+c+_),this._xHighField=this.get(m+s+c+_)):(this._xField=i+c,this._xOpenField=f+s+c,this._xLowField=b+s+c,this._xHighField=m+s+c),"ValueAxis"===t.className?(this._yField=this.get(a+d+_),this._yOpenField=this.get(f+o+d+_),this._yLowField=this.get(b+o+d+_),this._yHighField=this.get(m+o+d+_)):(this._yField=a+d,this._yOpenField=f+o+d,this._yLowField=b+o+d,this._yHighField=m+o+d)}_fixVC(){const e=this.get("xAxis"),t=this.get("yAxis"),i=this.get("baseAxis"),s=this.states.lookup("hidden"),a=this.get("sequencedInterpolation");if(s){let o=0;a&&(o=.999999999999),e===i?s.set("vcy",o):(t===i||s.set("vcy",o),s.set("vcx",o))}}_handleMaskBullets(){this.isDirty("maskBullets")&&this.bulletsContainer.set("maskContent",this.get("maskBullets"))}_fixPosition(){const e=this.get("xAxis"),t=this.get("yAxis");this.set("x",e.x()-qe(e.get("centerX",0),e.width())-e.parent.get("paddingLeft",0)),this.set("y",t.y()-qe(t.get("centerY",0),t.height())-t.parent.get("paddingTop",0)),this.bulletsContainer.set("y",this.y()),this.bulletsContainer.set("x",this.x())}_prepareChildren(){super._prepareChildren(),this._bullets={},(this.isDirty("valueYShow")||this.isDirty("valueXShow")||this.isDirty("openValueYShow")||this.isDirty("openValueXShow")||this.isDirty("lowValueYShow")||this.isDirty("lowValueXShow")||this.isDirty("highValueYShow")||this.isDirty("highValueXShow"))&&(this._updateFields(),this._makeFieldNames(),this._valuesDirty=!0),(this.isDirty("xAxis")||this.isDirty("yAxis"))&&(this._valuesDirty=!0),this.set("width",this.get("xAxis").width()),this.set("height",this.get("yAxis").height()),this._handleMaskBullets();const e=this.get("xAxis"),t=this.get("yAxis"),i=this.get("baseAxis");let a,c;switch(this.get("tooltipPositionX")){case"open":a=this._xOpenField;break;case"low":a=this._xLowField;break;case"high":a=this._xHighField;break;default:a=this._xField}switch(this._tooltipFieldX=a,this.get("tooltipPositionY")){case"open":c=this._yOpenField;break;case"low":c=this._yLowField;break;case"high":c=this._yHighField;break;default:c=this._yField}this._tooltipFieldY=c,this.isDirty("baseAxis")&&this._fixVC(),this._fixPosition();const d=this.get("stacked");if(this.isDirty("stacked")&&(d?this._valuesDirty&&!this._dataProcessed||this._stack():this._unstack()),this._valuesDirty&&!this._dataProcessed&&(this._dataProcessed=!0,d&&this._stack(),I(this.dataItems,f=>{I(this._valueXShowFields,b=>{let m=f.get(b);null!=m&&(d&&(m+=this.getStackedXValue(f,b)),this._min("minX",m),this._max("maxX",m))}),I(this._valueYShowFields,b=>{let m=f.get(b);null!=m&&(d&&(m+=this.getStackedYValue(f,b)),this._min("minY",m),this._max("maxY",m))}),e.processSeriesDataItem(f,this._valueXFields),t.processSeriesDataItem(f,this._valueYFields)}),e._seriesValuesDirty=!0,t._seriesValuesDirty=!0,this.get("ignoreMinMax")||((this.isPrivateDirty("minX")||this.isPrivateDirty("maxX"))&&e.markDirtyExtremes(),(this.isPrivateDirty("minY")||this.isPrivateDirty("maxY"))&&t.markDirtyExtremes()),this._markStakedDirtyStack(),this.get("tooltipDataItem")||this.updateLegendValue(void 0)),(this.isDirty("vcx")||this.isDirty("vcy"))&&this._markStakedDirtyStack(),this._dataGrouped||(e._groupSeriesData(this),t._groupSeriesData(this),this._dataGrouped=!0),this._valuesDirty||this.isPrivateDirty("startIndex")||this.isPrivateDirty("adjustedStartIndex")||this.isPrivateDirty("endIndex")||this.isDirty("vcx")||this.isDirty("vcy")||this._stackDirty||this._sizeDirty){let f=this.startIndex(),b=this.endIndex(),m=this.get("minBulletDistance",0);if(m>0&&i&&(this._showBullets=i.get("renderer").axisLength()/(b-f)>m),(this._psi!=f||this._pei!=b||this.isDirty("vcx")||this.isDirty("vcy")||this.isPrivateDirty("adjustedStartIndex")||this._stackDirty||this._valuesDirty)&&!this._selectionProcessed){this._selectionProcessed=!0;const _=this.get("vcx",1),g=this.get("vcy",1),T=this.get("stacked",!1),v=this.getPrivate("outOfSelection");if(i===e||!i)if(t._calculateTotals(),this.setPrivateRaw("selectionMinY",void 0),this.setPrivateRaw("selectionMaxY",void 0),v)t.markDirtySelectionExtremes();else for(let P=f;P<b;P++)this.processYSelectionDataItem(this.dataItems[P],g,T);if(i===t||!i)if(e._calculateTotals(),this.setPrivateRaw("selectionMinX",void 0),this.setPrivateRaw("selectionMaxX",void 0),v)t.markDirtySelectionExtremes();else for(let P=f;P<b;P++)this.processXSelectionDataItem(this.dataItems[P],_,T);if((i===e||!i)&&"valueYWorking"!==this.get("valueYShow")){const P=this.getPrivate("selectionMinY");null!=P&&(this.setPrivateRaw("minY",P),t.markDirtyExtremes());const C=this.getPrivate("selectionMaxY");null!=C&&(this.setPrivateRaw("maxY",C),t.markDirtyExtremes())}if((i===t||!i)&&"valueXWorking"!==this.get("valueXShow")){const P=this.getPrivate("selectionMinX");null!=P&&(this.setPrivateRaw("minX",P),t.markDirtyExtremes());const C=this.getPrivate("selectionMaxX");null!=C&&(this.setPrivateRaw("maxX",C),e.markDirtyExtremes())}(this.isPrivateDirty("selectionMinX")||this.isPrivateDirty("selectionMaxX"))&&e.markDirtySelectionExtremes(),(this.isPrivateDirty("selectionMinY")||this.isPrivateDirty("selectionMaxY"))&&t.markDirtySelectionExtremes()}}}_makeRangeMask(){if(this.axisRanges.length>0){let e=this._mainContainerMask;null==e&&(e=this.children.push(ze.new(this._root,{})),this._mainContainerMask=e,e.set("draw",(t,i)=>{const s=this.parent;if(s){const a=this._root.container.width(),o=this._root.container.height();t.moveTo(-a,-o),t.lineTo(-a,2*o),t.lineTo(2*a,2*o),t.lineTo(2*a,-o),t.lineTo(-a,-o),this.axisRanges.each(c=>{const d=c.axisDataItem.get("axisFill");if(s&&d){let f=d.get("draw");f&&f(t,i)}})}this.mainContainer._display.mask=e._display})),e.markDirty(),e._markDirtyKey("fill")}else this.mainContainer._display.mask=null}_updateChildren(){super._updateChildren(),this._x=this.x(),this._y=this.y(),this._makeRangeMask()}_stack(){const e=this.chart;if(e){const t=e.series.indexOf(this);if(this._couldStackTo=[],t>0){let i;for(let s=t-1;s>=0&&(i=e.series.getIndex(s),i.get("xAxis")!==this.get("xAxis")||i.get("yAxis")!==this.get("yAxis")||i.className!==this.className||(this._couldStackTo.push(i),i.get("stacked")));s--);}this._stackDataItems()}}_unstack(){X(this._reallyStackedTo,(e,t)=>{delete t._stackedSeries[this.uid]}),this._reallyStackedTo={},I(this.dataItems,e=>{e.setRaw("stackToItemY",void 0),e.setRaw("stackToItemX",void 0)})}_stackDataItems(){const e=this.get("baseAxis"),t=this.get("xAxis"),i=this.get("yAxis");let s,a;e===t?(s="valueY",a="stackToItemY"):e===i&&(s="valueX",a="stackToItemX");let o=this._couldStackTo.length,c=0;const d=this.get("stackToNegative");this._reallyStackedTo={},I(this.dataItems,f=>{for(let b=0;b<o;b++){let m=this._couldStackTo[b],_=m.dataItems[c],g=f.get(s);if(_){let T=_.get(s);if(d){if(!R(g))break;if(R(T)){if(g>=0&&T>=0){f.setRaw(a,_),this._reallyStackedTo[m.uid]=m,m._stackedSeries[this.uid]=this;break}if(g<0&&T<0){f.setRaw(a,_),this._reallyStackedTo[m.uid]=m,m._stackedSeries[this.uid]=this;break}}}else if(R(g)&&R(T)){f.setRaw(a,_),this._reallyStackedTo[m.uid]=m,m._stackedSeries[this.uid]=this;break}}}c++})}processXSelectionDataItem(e,t,i){I(this.__valueXShowFields,s=>{let a=e.get(s);null!=a&&(i&&(a+=this.getStackedXValueWorking(e,s)),this._min("selectionMinX",a),this._max("selectionMaxX",a*t))})}processYSelectionDataItem(e,t,i){I(this.__valueYShowFields,s=>{let a=e.get(s);null!=a&&(i&&(a+=this.getStackedYValueWorking(e,s)),this._min("selectionMinY",a),this._max("selectionMaxY",a*t))})}getStackedYValueWorking(e,t){const i=e.get("stackToItemY");if(i){const s=i.component;return i.get(t,0)*s.get("vcy",1)+this.getStackedYValueWorking(i,t)}return 0}getStackedXValueWorking(e,t){const i=e.get("stackToItemX");if(i){const s=i.component;return i.get(t,0)*s.get("vcx",1)+this.getStackedXValueWorking(i,t)}return 0}getStackedYValue(e,t){const i=e.get("stackToItemY");return i?i.get(t,0)+this.getStackedYValue(i,t):0}getStackedXValue(e,t){const i=e.get("stackToItemX");return i?i.get(t,0)+this.getStackedXValue(i,t):0}createLegendMarker(e){this.updateLegendMarker()}_markDirtyAxes(){this._axesDirty=!0,this.markDirty()}_markDataSetDirty(){this._afterDataChange(),this._valuesDirty=!0,this._dataProcessed=!1,this._aggregatesCalculated=!1,this.markDirty()}_clearDirty(){super._clearDirty(),this._axesDirty=!1,this._selectionProcessed=!1,this._stackDirty=!1,this._dataProcessed=!1}_positionBullet(e){let t=e.get("sprite");if(t){let i=t.dataItem,s=e.get("locationX",i.get("locationX",.5)),a=e.get("locationY",i.get("locationY",.5)),o=this.get("xAxis"),c=this.get("yAxis"),d=o.getDataItemPositionX(i,this._xField,s,this.get("vcx",1)),f=c.getDataItemPositionY(i,this._yField,a,this.get("vcy",1)),b=this.getPoint(d,f),m=i.get("left",b.x),_=i.get("right",b.x),g=i.get("top",b.y),T=i.get("bottom",b.y),v=0,P=0,C=_-m,E=T-g;if(this._shouldShowBullet(d,f)){t.setPrivate("visible",!e.getPrivate("hidden"));let k=e.get("field");const S=this.get("baseAxis"),B=this.get("xAxis"),z=this.get("yAxis");if(null!=k){let Z;S==B?("value"==k?Z=this._yField:"open"==k?Z=this._yOpenField:"high"==k?Z=this._yHighField:"low"==k&&(Z=this._yLowField),Z&&(f=z.getDataItemPositionY(i,Z,0,this.get("vcy",1)),b=z.get("renderer").positionToPoint(f),P=b.y,v=m+C*s)):("value"==k?Z=this._xField:"open"==k?Z=this._xOpenField:"high"==k?Z=this._xHighField:"low"==k&&(Z=this._xLowField),Z&&(d=B.getDataItemPositionX(i,Z,0,this.get("vcx",1)),b=B.get("renderer").positionToPoint(d),v=b.x,P=T-E*a))}else v=m+C*s,P=T-E*a;const G=e.get("stacked");if(G){const Z=this.chart;if(S==B){let V=this._bullets[d+"_"+f];if(V){let $=V.bounds(),ee=t.localBounds(),Ce=P;P=$.top,"down"==G?P=$.bottom-ee.top:"auto"==G?Z&&(Ce<Z.plotContainer.height()/2?P=$.bottom-ee.top:P+=ee.bottom):P+=ee.bottom}this._bullets[d+"_"+f]=t}else{let V=this._bullets[d+"_"+f];if(V){let $=V.bounds(),ee=t.localBounds(),Ce=v;v=$.right,"down"==G?v=$.left-ee.right:"auto"==G?Z&&(Ce<Z.plotContainer.width()/2?v=$.left-ee.right:v-=ee.left):v-=ee.left}this._bullets[d+"_"+f]=t}}t.isType("Label")&&(t.setPrivate("maxWidth",Math.abs(C)),t.setPrivate("maxHeight",Math.abs(E))),t.setAll({x:v,y:P})}else t.setPrivate("visible",!1)}}_shouldShowBullet(e,t){return this._showBullets}setDataSet(e){if(this._dataSets[e]){this._handleDataSetChange(),this._dataItems=this._dataSets[e],this._markDataSetDirty(),this._dataSetId=e;const t="datasetchanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,id:e})}}resetGrouping(){X(this._dataSets,(e,t)=>{t!=this._mainDataItems&&I(t,i=>{this.disposeDataItem(i)})}),this._dataSets={},this._dataItems=this.mainDataItems}_handleDataSetChange(){I(this._dataItems,e=>{let t=e.bullets;t&&I(t,i=>{if(i){let s=i.get("sprite");s&&s.setPrivate("visible",!1)}})}),this._selectionProcessed=!1}show(e){const t=Object.create(null,{show:{get:()=>super.show}});return(0,Qe.mG)(this,void 0,void 0,function*(){this._fixVC();let i=[];i.push(t.show.call(this,e).then(()=>{this._isShowing=!1;let s=this.get("xAxis"),a=this.get("yAxis"),o=this.get("baseAxis");a!==o&&a.markDirtySelectionExtremes(),s!==o&&s.markDirtySelectionExtremes()})),i.push(this.bulletsContainer.show(e)),i.push(this._sequencedShowHide(!0,e)),yield Promise.all(i)})}hide(e){const t=Object.create(null,{hide:{get:()=>super.hide}});return(0,Qe.mG)(this,void 0,void 0,function*(){this._fixVC();let i=[];i.push(t.hide.call(this,e).then(()=>{this._isHiding=!1})),i.push(this.bulletsContainer.hide(e)),i.push(this._sequencedShowHide(!1,e)),yield Promise.all(i)})}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,e,t)];R(t)||(t=this.get("stateAnimationDuration",0));const a=this.get("stateAnimationEasing");I(this._valueFields,o=>{s.push(e.animate({key:o+"Working",to:e.get(o),duration:t,easing:a}).waitForStop())}),yield Promise.all(s)})}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,e,t)],a=this.states.create("hidden",{});R(t)||(t=a.get("stateAnimationDuration",this.get("stateAnimationDuration",0)));const o=a.get("stateAnimationEasing",this.get("stateAnimationEasing")),c=this.get("xAxis"),d=this.get("yAxis"),f=this.get("baseAxis"),b=this.get("stacked");if((f===c||!f)&&I(this._valueYFields,m=>{let _=d.getPrivate("min"),g=d.baseValue();R(_)&&_>g&&(g=_),b&&(g=0),null!=e.get(m)&&s.push(e.animate({key:m+"Working",to:g,duration:t,easing:o}).waitForStop())}),f===d||!f){let m=c.getPrivate("min"),_=c.baseValue();R(m)&&m>_&&(_=m),b&&(_=0),I(this._valueXFields,g=>{null!=e.get(g)&&s.push(e.animate({key:g+"Working",to:_,duration:t,easing:o}).waitForStop())})}yield Promise.all(s)})}_markDirtyStack(){this._stackDirty=!0,this.markDirty(),this._markStakedDirtyStack()}_markStakedDirtyStack(){const e=this._stackedSeries;e&&X(e,(t,i)=>{i._stackDirty||i._markDirtyStack()})}_afterChanged(){super._afterChanged(),this._skipped&&(this._markDirtyAxes(),this._skipped=!1)}showDataItemTooltip(e){this.getPrivate("doNotUpdateLegend")||(this.updateLegendMarker(e),this.updateLegendValue(e));const t=this.get("tooltip");if(t)if(this.isHidden())this.hideTooltip();else if(t._setDataItem(e),e){let i=this.get("locationX",0),s=this.get("locationY",1),a=e.get("locationX",i),o=e.get("locationY",s);const c=this.get("xAxis"),d=this.get("yAxis"),f=this.get("vcx",1),b=this.get("vcy",1),m=c.getDataItemPositionX(e,this._tooltipFieldX,this._aLocationX0+(this._aLocationX1-this._aLocationX0)*a,f),_=d.getDataItemPositionY(e,this._tooltipFieldY,this._aLocationY0+(this._aLocationY1-this._aLocationY0)*o,b),g=this.getPoint(m,_);let T=!0;if(I(this._valueFields,v=>{null==e.get(v)&&(T=!1)}),T){const v=this.chart;v&&v.inPlot(g)?(t.label.text.markDirtyText(),t.set("tooltipTarget",this._getTooltipTarget(e)),t.set("pointTo",this._display.toGlobal({x:g.x,y:g.y}))):t._setDataItem(void 0)}else t._setDataItem(void 0)}}hideTooltip(){const e=this.get("tooltip");return e&&e.set("tooltipTarget",this),super.hideTooltip()}_getTooltipTarget(e){if("bullet"==this.get("seriesTooltipTarget")){const t=e.bullets;if(t&&t.length>0){const s=t[0].get("sprite");if(s)return s}}return this}updateLegendValue(e){const t=this.get("legendDataItem");if(t){const i=t.get("label");if(i){let a="";e?(i._setDataItem(e),a=this.get("legendLabelText",i.get("text",this.get("name","")))):(i._setDataItem(this._emptyDataItem),a=this.get("legendRangeLabelText",this.get("legendLabelText",i.get("text",this.get("name",""))))),i.set("text",a)}const s=t.get("valueLabel");if(s){let a="";e?(s._setDataItem(e),a=this.get("legendValueText",s.get("text",""))):(s._setDataItem(this._emptyDataItem),a=this.get("legendRangeValueText",s.get("text",""))),s.set("text",a)}}}_getItemReaderLabel(){let e="X: {"+this._xField;return this.get("xAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}; Y: {"+this._yField,this.get("yAxis").isType("DateAxis")&&(e+=".formatDate()"),e+="}",e}getPoint(e,t){let i=this.get("xAxis").get("renderer").positionToCoordinate(e),s=this.get("yAxis").get("renderer").positionToCoordinate(t),a=999999999;return s<-a&&(s=-a),s>a&&(s=a),i<-a&&(i=-a),i>a&&(i=a),{x:i,y:s}}_shouldInclude(e){return!0}handleCursorHide(){this.hideTooltip(),this.updateLegendValue(void 0),this.updateLegendMarker(void 0)}_afterDataChange(){super._afterDataChange(),this.get("xAxis")._markDirtyKey("start"),this.get("yAxis")._markDirtyKey("start"),this.resetExtremes()}resetExtremes(){this.setPrivate("selectionMinX",void 0),this.setPrivate("selectionMaxX",void 0),this.setPrivate("selectionMinY",void 0),this.setPrivate("selectionMaxY",void 0),this.setPrivate("minX",void 0),this.setPrivate("minY",void 0),this.setPrivate("maxX",void 0),this.setPrivate("maxY",void 0)}createAxisRange(e){return this.axisRanges.push({axisDataItem:e})}get mainDataItems(){return this._mainDataItems}_adjustStartIndex(e){const t=this.get("xAxis");if(this.get("baseAxis")==t&&t.isType("DateAxis")){const s=t.baseDuration(),a=t.getPrivate("selectionMin",t.getPrivate("min",0)),o=s*this.get("locationX",.5);let c=-1/0;for(;c<a;){const d=this.dataItems[e];if(!d)break;{const f=d.open;if(c=f?f.valueX:d.get("valueX",0),c+=o,!(c<a))break;e++}}}return e}}Object.defineProperty(fs,"className",{enumerable:!0,configurable:!0,writable:!0,value:"XYSeries"}),Object.defineProperty(fs,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Pt.classNames.concat([fs.className])});class Xi extends fs{constructor(){super(...arguments),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGraphics(e,t){return this.makeColumn(t,e)}_makeFieldNames(){super._makeFieldNames();const e=this.get("xAxis"),t=this.get("yAxis"),i="CategoryAxis",s="ValueAxis";e.isType(i)&&(this.get("openCategoryXField")||(this._xOpenField=this._xField)),e.isType(s)&&(this.get("openValueXField")||(this._xOpenField=this._xField)),t.isType(i)&&(this.get("openCategoryYField")||(this._yOpenField=this._yField)),t.isType(s)&&(this.get("openValueYField")||(this._yOpenField=this._yField))}_prepareChildren(){super._prepareChildren();const e=this.get("xAxis"),t=this.get("yAxis"),i=this.dataItems.length,s=Math.max(0,this.startIndex()-2),a=Math.min(this.endIndex()+2,i-1);if(e.inited&&t.inited)for(let o=s;o<=a;o++)this._createGraphics(this.dataItems[o])}_updateChildren(){const e=this.chart;e&&(this._ph=e.plotContainer.height(),this._pw=e.plotContainer.width());const t=this.get("xAxis"),i=this.get("yAxis"),s=this.get("baseAxis"),a=this.columns.template;this.isDirty("fill")&&null==a.get("fill")&&a.set("fill",this.get("fill")),this.isDirty("stroke")&&null==a.get("stroke")&&a.set("stroke",this.get("stroke"));let o=0,c=0,d=0;I(s.series,C=>{if(C instanceof Xi){const E=C.get("stacked");E&&0==d&&c++,!E&&C.get("clustered")&&c++}C===this&&(o=c-1),d++}),this.get("clustered")||(o=0,c=1),0===c&&(c=1,o=0);const f=t.get("renderer"),b=i.get("renderer"),m="cellStartLocation",_="cellEndLocation",g=f.get(m,0),T=f.get(_,1),v=b.get(m,0),P=b.get(_,1);if(this._aLocationX0=g+o/c*(T-g),this._aLocationX1=g+(o+1)/c*(T-g),this._aLocationY0=v+o/c*(P-v),this._aLocationY1=v+(o+1)/c*(P-v),t.inited&&i.inited){if(this._axesDirty||this._valuesDirty||this._stackDirty||this.isDirty("vcx")||this.isDirty("vcy")||this._sizeDirty){const C=this.dataItems.length;let E=Math.max(0,this.startIndex()-2),k=Math.min(this.endIndex()+2,C-1);for(let B=0;B<E;B++)this._toggleColumn(this.dataItems[B],!1);let S=this.dataItems[E];for(let B=E;B<=k;B++){let z=this.dataItems[B];if(null!=z.get("valueX")&&null!=z.get("valueY")){if(S=z,B>0&&E>0)for(let G=B-1;G>=0;G--){let Z=this.dataItems[G];if(null!=Z.get("valueX")&&null!=Z.get("valueY")){S=Z;break}}break}this._toggleColumn(z,!1)}for(let B=E;B<=k;B++){let z=this.dataItems[B];this._updateGraphics(z,S),null!=z.get("valueX")&&null!=z.get("valueY")&&(S=z)}for(let B=k+1;B<C;B++)this._toggleColumn(this.dataItems[B],!1)}}else this._skipped=!0;this.updateLegendMarker(this.get("tooltipDataItem")),super._updateChildren()}_createGraphics(e){let t=e.get("graphics");if(!t){t=this._makeGraphics(this.columns,e),e.set("graphics",t),t._setDataItem(e);const i=e.get("legendDataItem");if(i){const a=i.get("markerRectangle");if(a){const o=a.states.lookup("default");I(Ka,c=>{const d=t.get(c,this.get(c));a.set(c,d),o.set(c,d)})}}let s=e.get("rangeGraphics");s&&I(s,a=>{a.dispose()}),s=[],e.setRaw("rangeGraphics",s),this.axisRanges.each(a=>{const o=a.container,c=this._makeGraphics(a.columns,e);s&&s.push(c),c.setPrivate("list",a.columns),o.children.push(c)})}}createAxisRange(e){return I(this.dataItems,t=>{const i=t.get("graphics");i&&(i.dispose(),t.set("graphics",void 0))}),super.createAxisRange(e)}_updateGraphics(e,t){let i=e.get("graphics");const s=this._xField,a=this._yField,o=e.get(s),c=e.get(a);if(null!=o&&null!=c){const d=this._xOpenField,f=this._yOpenField,b=this.get("locationX",e.get("locationX",.5)),m=this.get("locationY",e.get("locationY",.5)),_=this.get("openLocationX",e.get("openLocationX",b)),g=this.get("openLocationY",e.get("openLocationY",m)),T=i.get("width"),v=i.get("height"),P=this.get("stacked"),C=this.get("xAxis"),E=this.get("yAxis"),k=this.get("baseAxis"),S=C.get("start"),B=C.get("end"),z=E.get("start"),G=E.get("end");let Z,V,$,ee,Ce=this.get("vcy",1),Ye=this.get("vcx",1),Et=!1,Ee=!1;if(E.isType("CategoryAxis")&&C.isType("CategoryAxis")){let ae=this._aLocationX0+_-.5,ye=this._aLocationX1+b-.5;if(T instanceof le){let be=(ye-ae)*(1-T.value)/2;ae+=be,ye-=be}if(Z=C.getDataItemPositionX(e,d,ae,Ye),V=C.getDataItemPositionX(e,s,ye,Ye),ae=this._aLocationY0+g-.5,ye=this._aLocationY1+m-.5,v instanceof le){let be=(ye-ae)*(1-v.value)/2;ae+=be,ye-=be}$=E.getDataItemPositionY(e,f,ae,Ce),ee=E.getDataItemPositionY(e,a,ye,Ce),e.setRaw("point",{x:Z+(V-Z)/2,y:$+(ee-$)/2})}else if(C===k){let ae=this._aLocationX0+_-.5,ye=this._aLocationX1+b-.5;if(T instanceof le){let be=(ye-ae)*(1-T.value)/2;ae+=be,ye-=be}if(Z=C.getDataItemPositionX(e,d,ae,Ye),V=C.getDataItemPositionX(e,s,ye,Ye),$=E.getDataItemPositionY(e,a,m,Ce),this._yOpenField!==this._yField)ee=E.getDataItemPositionY(e,f,g,Ce);else if(P){let be=e.get("stackToItemY");ee=be?E.getDataItemPositionY(be,a,g,be.component.get("vcy")):E.basePosition()}else ee=E.basePosition();e.setRaw("point",{x:Z+(V-Z)/2,y:$}),Ee=!0}else if(E===k){let ae=this._aLocationY0+g-.5,ye=this._aLocationY1+m-.5;if(v instanceof le){let be=(ye-ae)*(1-v.value)/2;ae+=be,ye-=be}if($=E.getDataItemPositionY(e,f,ae,Ce),ee=E.getDataItemPositionY(e,a,ye,Ce),V=C.getDataItemPositionX(e,s,b,Ye),this._xOpenField!==this._xField)Z=C.getDataItemPositionX(e,d,_,Ye);else if(P){let be=e.get("stackToItemX");Z=be?C.getDataItemPositionX(be,s,_,be.component.get("vcx")):C.basePosition()}else Z=C.basePosition();Et=!0,e.setRaw("point",{x:V,y:$+(ee-$)/2})}this._updateSeriesGraphics(e,i,Z,V,$,ee,Et,Ee),Z<S&&V<S||Z>B&&V>B||$<z&&ee<=z||$>=G&&ee>G||_i(Z)||_i($)?this._toggleColumn(e,!1):this._toggleColumn(e,!0);let ui=e.get("rangeGraphics");ui&&I(ui,ae=>{this._updateSeriesGraphics(e,ae,Z,V,$,ee,Et,Ee)}),this._applyGraphicsStates(e,t)}}_updateSeriesGraphics(e,t,i,s,a,o,c,d){const f=t.get("width"),b=t.get("height"),m=t.get("maxWidth"),_=t.get("maxHeight"),g=this.getPoint(i,a),T=this.getPoint(s,o),v=e.get("point");if(v){const P=this.getPoint(v.x,v.y);v.x=P.x+this._x,v.y=P.y+this._y}if(i=g.x,s=T.x,a=g.y,o=T.y,R(f)){const P=(s-i-f)/2;i+=P,s-=P}if(R(m)&&m<Math.abs(s-i)){const P=(s-i-m)/2;i+=P,s-=P}if(R(b)){const P=(o-a-b)/2;a+=P,o-=P}if(R(_)&&_<Math.abs(o-a)){const P=(o-a-_)/2;a+=P,o-=P}this.get("adjustBulletPosition")&&(c&&(s=Math.min(Math.max(0,s),this._pw),i=Math.min(Math.max(0,i),this._pw)),d&&(a=Math.min(Math.max(0,a),this._ph),o=Math.min(Math.max(0,o),this._ph))),e.setRaw("left",i),e.setRaw("right",s),e.setRaw("top",a),e.setRaw("bottom",o),t.setPrivate("width",s-i),t.setPrivate("height",o-a),t.set("x",i),t.set("y",o-(o-a))}_handleDataSetChange(){super._handleDataSetChange(),I(this._dataItems,e=>{this._toggleColumn(e,!1)})}_applyGraphicsStates(e,t){const i=e.get("graphics"),s=i.states.lookup("dropFromOpen"),a=i.states.lookup("riseFromOpen"),o=i.states.lookup("dropFromPrevious"),c=i.states.lookup("riseFromPrevious");if(s||o||a||c){const d=this.get("xAxis"),f=this.get("yAxis"),b=this.get("baseAxis");let m,_,g;b===d&&f.isType("ValueAxis")?(m=e.get(this._yOpenField),_=e.get(this._yField),g=t.get(this._yField)):b===f&&d.isType("ValueAxis")&&(m=e.get(this._xOpenField),_=e.get(this._xField),g=t.get(this._xField)),R(m)&&R(_)&&(_<m?s&&s.apply():a&&a.apply(),R(g)&&(_<g?o&&o.apply():c&&c.apply()))}}disposeDataItem(e){super.disposeDataItem(e);const t=e.get("graphics");t&&(this.columns.removeValue(t),t.dispose());const i=e.get("rangeGraphics");i&&I(i,s=>{const a=s.getPrivate("list");a&&a.removeValue(s),s.dispose()})}hideDataItem(e,t){const i=Object.create(null,{hideDataItem:{get:()=>super.hideDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.hideDataItem.call(this,e,t)],a=e.get("graphics");a&&s.push(a.hide(t));const o=e.get("rangeGraphics");o&&I(o,c=>{s.push(c.hide(t))}),yield Promise.all(s)})}_toggleColumn(e,t){const i=e.get("graphics");i&&i.setPrivate("visible",t);const s=e.get("rangeGraphics");s&&I(s,o=>{o.setPrivate("visible",t)});const a=e.bullets;a&&I(a,o=>{o.setPrivate("hidden",!t)})}showDataItem(e,t){const i=Object.create(null,{showDataItem:{get:()=>super.showDataItem}});return(0,Qe.mG)(this,void 0,void 0,function*(){const s=[i.showDataItem.call(this,e,t)],a=e.get("graphics");a&&s.push(a.show(t));const o=e.get("rangeGraphics");o&&I(o,c=>{s.push(c.show(t))}),yield Promise.all(s)})}updateLegendMarker(e){let t=this.get("legendDataItem");if(this.get("useLastColorForLegendMarker")&&!e){const i=this.dataItems[this.endIndex()-1];i&&(e=i)}if(t){let i=this.columns.template;if(e){let a=e.get("graphics");a&&(i=a)}const s=t.get("markerRectangle");if(s&&!t.get("itemContainer").get("disabled")){const a=s.states.lookup("default");I(Ka,o=>{const c=i.get(o,this.get(o));s.set(o,c),a.set(o,c)})}}}_getTooltipTarget(e){return"bullet"==this.get("seriesTooltipTarget")?super._getTooltipTarget(e):e.get("graphics")||this}}Object.defineProperty(Xi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"BaseColumnSeries"}),Object.defineProperty(Xi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:fs.classNames.concat([Xi.className])});class cn extends Xi{constructor(){super(...arguments),Object.defineProperty(this,"columns",{enumerable:!0,configurable:!0,writable:!0,value:new br(ft.new({}),()=>Or._new(this._root,{position:"absolute",themeTags:Ze(this.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template]))})}makeColumn(e,t){const i=this.mainContainer.children.push(t.make());return i._setDataItem(e),t.push(i),i}_processAxisRange(e){super._processAxisRange(e),e.columns=new br(ft.new({}),()=>Or._new(this._root,{position:"absolute",themeTags:Ze(e.columns.template.get("themeTags",[]),["series","column"])},[this.columns.template,e.columns.template]))}}Object.defineProperty(cn,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ColumnSeries"}),Object.defineProperty(cn,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Xi.classNames.concat([cn.className])});let gu=(()=>{class l{constructor(){this.chartInitialized=!1,this.divName="",this.categoryName="",this.data=[]}ngOnChanges(t){t.data.previousValue!=t.data.currentValue&&this.chartInitialized&&(this.series.data.setAll(this.data),this.xAxis.data.setAll(this.data))}initChart(){let t=Ar.new(this.divName);t.setThemes([ua.new(t)]),this.chart=t.container.children.push(er.new(t,{panX:!0,panY:!0,wheelX:"panX",wheelY:"zoomX",pinchZoomX:!0,paddingLeft:0,paddingRight:1})),this.chart.set("cursor",us.new(t,{})).lineY.set("visible",!1);let s=Er.new(t,{minGridDistance:30,minorGridEnabled:!0});s.labels.template.setAll({rotation:-90,centerY:ge,centerX:W,paddingRight:15}),s.grid.template.setAll({location:1}),this.xAxis=this.chart.xAxes.push(Ai.new(t,{maxDeviation:.3,categoryField:this.categoryName,renderer:s,tooltip:ni.new(t,{})}));let a=hn.new(t,{strokeOpacity:.1}),o=this.chart.yAxes.push(ds.new(t,{maxDeviation:.3,renderer:a}));this.series=this.chart.series.push(cn.new(t,{name:"Series 1",xAxis:this.xAxis,yAxis:o,valueYField:"value",sequencedInterpolation:!0,categoryXField:this.categoryName,tooltip:ni.new(t,{labelText:"{valueY}"})})),this.series.columns.template.setAll({cornerRadiusTL:5,cornerRadiusTR:5,strokeOpacity:0}),this.series.columns.template.adapters.add("fill",(c,d)=>this.chart?.get("colors")?.getIndex(this.series.columns.indexOf(d))),this.series.columns.template.adapters.add("stroke",(c,d)=>this.chart?.get("colors")?.getIndex(this.series.columns.indexOf(d))),this.xAxis.data.setAll(this.data),this.series.data.setAll(this.data),this.series.appear(1e3),this.chart.appear(1e3,100),this.chartInitialized=!0}ngAfterViewInit(){this.initChart()}ngOnDestroy(){this.root&&this.root.dispose()}static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-bar-chart"]],inputs:{divName:"divName",categoryName:"categoryName",data:"data"},features:[u.TTD],decls:1,vars:1,consts:[[2,"width","100%","height","500px",3,"id"]],template:function(i,s){1&i&&u._UZ(0,"div",0),2&i&&u.s9C("id",s.divName)}})}return l})();function Si(l,e){if(1&l){const t=u.EpF();u.TgZ(0,"app-dropdown",17),u.NdJ("itemChange",function(s){u.CHM(t);const a=u.oxw();return u.KtG(a.onItemChange(s))}),u.qZA()}if(2&l){const t=u.oxw();u.Q6J("items",t.listeEmployeAsItem)("showSearch",!0)("showStatus",!0)("showError",!1)}}function da(l,e){1&l&&u._UZ(0,"div",28)}function fa(l,e){1&l&&u._UZ(0,"div",28)}function pa(l,e){1&l&&u._UZ(0,"div",28)}let ps=(()=>{class l{constructor(t,i){this.statService=t,this.employeService=i,this.listeEmploye=[],this.listeEmployeAsItem=[],this.choix=[{id:0,name:"Par Mois"},{id:1,name:"Par Jour"}],this.monthsArray=[{id:0,name:"Janvier"},{id:1,name:"Fevrier"},{id:2,name:"Mars"},{id:3,name:"Avril"},{id:4,name:"Mai"},{id:5,name:"Juin"},{id:6,name:"Juillet"},{id:7,name:"Aout"},{id:8,name:"Septembre"},{id:9,name:"Octobre"},{id:10,name:"Novembre"},{id:11,name:"Decembre"}],this.isLoadingTempsMoyen=!0,this.isLoadingNbReservation=!0,this.isLoadingRevenue=!0,this.tempsMoyen=[],this.selectedChoice=this.choix[0],this.nbReservation=[],this.selectedChoiceRevenue=this.choix[0],this.revenue=[],this.benefice=[],this.selectedMonthBenefice=this.monthsArray[0],this.beneficeBackUp=[]}ngOnInit(){var t=this;return(0,fr.Z)(function*(){t.beneficeForm=new j.cw({salary:new j.NI(0,[j.kI.required]),rent:new j.NI(0,[j.kI.required]),pieces:new j.NI(0,[j.kI.required]),other:new j.NI(0,[j.kI.required]),month:new j.NI(null,[j.kI.required])}),yield t.getListeEmploye(),t.getRdvReservation(),t.getChiffreAffaire(),t.getBeneficeParMois()})()}getListeEmploye(){var t=this;return(0,fr.Z)(function*(){t.isLoadingTempsMoyen=!0;const i=yield(0,zr.z)(t.employeService.getListeEmploye());t.listeEmploye=i.data,t.listeEmployeAsItem=t.listeEmploye.map(s=>({id:s._id,name:s.nomEmploye+" "+s.prenomEmploye,data:s})),t.listeEmploye.length>0&&(t.selectedEmpTempsMoyenStat=t.listeEmploye[0],t.getTempsMoyenEmploye()),t.isLoadingTempsMoyen=!1})()}getTempsMoyenEmploye(){this.isLoadingTempsMoyen=!0,this.statService.getTempsMoyenEmploye(this.selectedEmpTempsMoyenStat._id).subscribe({next:t=>{this.tempsMoyen=[{employe:this.selectedEmpTempsMoyenStat.nomEmploye+" "+this.selectedEmpTempsMoyenStat.prenomEmploye,value:t.data?t.data:0}],this.isLoadingTempsMoyen=!1}})}getRdvReservationParMois(){this.isLoadingNbReservation=!0,this.statService.getRdvReservationParMois().subscribe({next:t=>{this.nbReservation=t.data,this.isLoadingNbReservation=!1}})}getChiffreAffaireParMois(){this.isLoadingRevenue=!0,this.statService.getChiffreAffaireParMois().subscribe({next:t=>{this.revenue=t.data,this.isLoadingRevenue=!1}}),this.isLoadingRevenue=!0}getBeneficeParMois(){this.isLoadingRevenue=!0,this.statService.getChiffreAffaireParMois().subscribe({next:t=>{this.benefice=Mn.cloneDeep(t.data),this.beneficeBackUp=Mn.cloneDeep(t.data),this.isLoadingRevenue=!1}}),this.isLoadingRevenue=!0}getChiffreAffaireParJour(){this.isLoadingRevenue=!0,this.statService.getChiffreAffaireParJour().subscribe({next:t=>{this.revenue=t.data,this.isLoadingRevenue=!1}})}getRdvReservation(){0==this.selectedChoice.id?this.getRdvReservationParMois():this.getRdvReservationParJour()}getChiffreAffaire(){0==this.selectedChoiceRevenue.id?this.getChiffreAffaireParMois():this.getChiffreAffaireParJour()}getRdvReservationParJour(){this.isLoadingNbReservation=!0,this.statService.getRdvReservationParJour().subscribe({next:t=>{this.nbReservation=t.data,this.isLoadingNbReservation=!1}})}onItemChange(t){this.selectedEmpTempsMoyenStat=t.data,this.getTempsMoyenEmploye()}OnChoiceItemNbReservationChange(t){this.selectedChoice=t,this.getRdvReservation()}OnChoiceItemRevenueChange(t){this.selectedChoiceRevenue=t,this.getChiffreAffaire()}OnChoiceMonthBenefice(t){this.selectedMonthBenefice=t,console.log(t)}onSubmitBeneficeForm(){const t=this.beneficeForm.value;var i=this.selectedMonthBenefice.id??0;this.benefice[i].value=this.benefice[i].value-(t.salary+t.rent+t.pieces+t.other),this.benefice=[...this.benefice]}resetBenefice(){this.benefice=Mn.cloneDeep(this.beneficeBackUp)}testChange(t){console.log(t)}static#e=this.\u0275fac=function(i){return new(i||l)(u.Y36(Da),u.Y36(Ca.m))};static#t=this.\u0275cmp=u.Xpm({type:l,selectors:[["app-dashboard"]],decls:59,vars:29,consts:[[1,"section-full","content-inner-2","bg-white","hair-services"],[1,"container"],[1,"section-head","text-black","text-center"],[1,"text-primary","m-b10"],[1,"dlab-separator-outer","m-b0"],[1,"dlab-separator","text-primary","style-icon"],[1,"flaticon-spa","text-primary"],[1,"row"],[1,"col-md-4","container"],[1,"card"],[1,"card-body","p-5"],[1,"content"],[1,"card-title","text-center","mb-4"],[3,"items","showSearch","showStatus","showError"],[3,"divName","categoryName","data"],["class","overlay"],[1,"col-md-8","container"],[3,"items","showSearch","showStatus","showError","itemChange"],[1,"row","py-5"],[3,"formGroup","ngSubmit"],[1,"input-group"],[1,"input-group-prepend"],["type","number","step","0.1","placeholder","Salaire","title","Salaire","formControlName","salary",1,"form-control"],["type","number","step","0.1","placeholder","Loyer","title","Loyer","formControlName","rent",1,"form-control"],["type","number","step","0.1","placeholder","Pieces","title","Pieces","formControlName","pieces",1,"form-control"],["type","number","step","0.1","placeholder","Autres","title","Autres","formControlName","other",1,"form-control"],["type","submit",1,"btn","btn-primary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"overlay"]],template:function(i,s){1&i&&(u.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),u._uU(4,"Tableau de bord"),u.qZA(),u.TgZ(5,"div",4)(6,"div",5),u._UZ(7,"i",6),u.qZA()()(),u.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"h5",12),u._uU(14," Temps moyen de travail "),u.qZA(),u.YNc(15,Si,1,4,"app-dropdown",13),u._UZ(16,"app-bar-chart",14),u.qZA()()(),u.YNc(17,da,1,0,"div",15),u.qZA(),u.TgZ(18,"div",16)(19,"div",9)(20,"div",10)(21,"div",11)(22,"h5",12),u._uU(23," Nombre de r\xe9servations "),u.qZA(),u.TgZ(24,"app-dropdown",17),u.NdJ("itemChange",function(o){return s.OnChoiceItemNbReservationChange(o)}),u.qZA(),u._UZ(25,"app-bar-chart",14),u.qZA()()(),u.YNc(26,fa,1,0,"div",15),u.qZA()(),u.TgZ(27,"div",18)(28,"div",16)(29,"div",9)(30,"div",10)(31,"div",11)(32,"h5",12),u._uU(33," Chiffre d'affaire "),u.qZA(),u.TgZ(34,"app-dropdown",17),u.NdJ("itemChange",function(o){return s.OnChoiceItemRevenueChange(o)}),u.qZA(),u._UZ(35,"app-bar-chart",14),u.qZA()()(),u.YNc(36,pa,1,0,"div",15),u.qZA()()(),u.TgZ(37,"div",7)(38,"div",16)(39,"div",9)(40,"div",10)(41,"div",11)(42,"h5",12),u._uU(43," Simulation B\xe9n\xe9fice "),u.qZA(),u.TgZ(44,"form",19),u.NdJ("ngSubmit",function(){return s.onSubmitBeneficeForm()}),u.TgZ(45,"div",20)(46,"div",21)(47,"app-dropdown",17),u.NdJ("itemChange",function(o){return s.OnChoiceMonthBenefice(o)}),u.qZA()(),u._UZ(48,"input",22)(49,"input",23)(50,"input",24)(51,"input",25),u.TgZ(52,"div",21)(53,"button",26),u._uU(54,"Valider"),u.qZA()(),u.TgZ(55,"div",21)(56,"button",27),u.NdJ("click",function(){return s.resetBenefice()}),u._uU(57,"Reunitialiser"),u.qZA()()()(),u._UZ(58,"app-bar-chart",14),u.qZA()()()()()()),2&i&&(u.xp6(15),u.um2(15,s.listeEmployeAsItem.length>0&&s.tempsMoyen.length>0?15:-1),u.xp6(),u.Q6J("divName","listeEmpDiv")("categoryName","employe")("data",s.tempsMoyen),u.xp6(),u.um2(17,s.isLoadingTempsMoyen?17:-1),u.xp6(7),u.Q6J("items",s.choix)("showSearch",!1)("showStatus",!0)("showError",!1),u.xp6(),u.Q6J("divName","nbReservation")("categoryName","label")("data",s.nbReservation),u.xp6(),u.um2(26,s.isLoadingNbReservation?26:-1),u.xp6(8),u.Q6J("items",s.choix)("showSearch",!1)("showStatus",!0)("showError",!1),u.xp6(),u.Q6J("divName","revenue")("categoryName","label")("data",s.revenue),u.xp6(),u.um2(36,s.isLoadingRevenue?36:-1),u.xp6(8),u.Q6J("formGroup",s.beneficeForm),u.xp6(3),u.Q6J("items",s.monthsArray)("showSearch",!1)("showStatus",!0)("showError",!1),u.xp6(11),u.Q6J("divName","benefice")("categoryName","label")("data",s.benefice))},dependencies:[Ta.J,j._Y,j.Fj,j.wV,j.JJ,j.JL,j.sg,j.u,gu],styles:[".loading-area[_ngcontent-%COMP%]{width:100%;background-color:#ffeff6;position:fixed;left:0;top:0;opacity:1;z-index:999999999;background-image:url(loading.e8ee632ce5c73a34.svg),url(loading.b450e7865f5dda0e.png);background-repeat:no-repeat;background-size:120px,200px;background-position:center}.container[_ngcontent-%COMP%]{position:relative}.overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;display:block;background-color:#ffeff6;opacity:1;z-index:999999999;background-image:url(loading.e8ee632ce5c73a34.svg),url(loading.b450e7865f5dda0e.png);background-repeat:no-repeat;background-size:120px,200px;background-position:center}"]})}return l})();const Lr=[{path:"",component:pi,children:[{path:"",component:ps,canActivate:[_t]},{path:"dashboard",component:ps,canActivate:[_t]},{path:"login",component:bn}]},{path:"emp",component:pi,children:[{path:"list",component:Bt,canActivate:[_t]},{path:"add",component:St,canActivate:[_t]},{path:"edit/:id",component:St,canActivate:[_t]}]},{path:"service",component:pi,children:[{path:"list",component:Pa,canActivate:[_t]},{path:"add",component:xa,canActivate:[_t]},{path:"edit/:id",component:xa,canActivate:[_t]}]},{path:"offre",component:pi,children:[{path:"list",component:nl,canActivate:[_t]},{path:"add",component:ws,canActivate:[_t]},{path:"edit/:id",component:fl,canActivate:[_t]}]}];let te=(()=>{class l{static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275mod=u.oAB({type:l});static#i=this.\u0275inj=u.cJS({imports:[D.Bz.forChild(Lr),D.Bz]})}return l})();var dn=me(6208);let ga=(()=>{class l{static#e=this.\u0275fac=function(i){return new(i||l)};static#t=this.\u0275mod=u.oAB({type:l});static#i=this.\u0275inj=u.cJS({imports:[dn.m,di.ez,te,j.u5,j.UX]})}return l})()},6990:function(nr,ar,me){var di;nr=me.nmd(nr),function(){var D,Ct="Expected a function",fi="__lodash_hash_undefined__",or="__lodash_placeholder__",Wi=1/0,gi=9007199254740991,Qt=4294967295,jo=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],cr="[object Arguments]",bs="[object Array]",Br="[object Boolean]",jr="[object Date]",vs="[object Error]",ys="[object Function]",va="[object GeneratorFunction]",St="[object Map]",Ur="[object Number]",mi="[object Object]",ya="[object Promise]",Yr="[object RegExp]",Bt="[object Set]",Nr="[object String]",xs="[object Symbol]",Zr="[object WeakMap]",Hr="[object ArrayBuffer]",dr="[object DataView]",bn="[object Float32Array]",vn="[object Float64Array]",yn="[object Int8Array]",xn="[object Int16Array]",wn="[object Int32Array]",Pn="[object Uint8Array]",Tn="[object Uint8ClampedArray]",Dn="[object Uint16Array]",Cn="[object Uint32Array]",zo=/\b__p \+= '';/g,xa=/\b(__p \+=) '' \+/g,Wo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xr=/&(?:amp|lt|gt|quot|#39);/g,wa=/[&<>"']/g,Go=RegExp(Xr.source),Vo=RegExp(wa.source),qo=/<%-([\s\S]+?)%>/g,Jo=/<%([\s\S]+?)%>/g,Pa=/<%=([\s\S]+?)%>/g,Eu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,An=/^\w*$/,Ko=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/[\\^$.*+?()[\]{}|]/g,$o=RegExp(Sn.source),On=/^\s+/,Qo=/\s/,el=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,tl=/\{\n\/\* \[wrapped with (.+)\] \*/,il=/,? & /,rl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sl=/[()=,{}\[\]\/\s]/,nl=/\\(\\)?/g,fr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zr=/\w*$/,Ta=/^[-+]0x[0-9a-f]+$/i,al=/^0b[01]+$/i,ol=/^\[object .+?Constructor\]$/,ll=/^0o[0-7]+$/i,ul=/^(?:0|[1-9]\d*)$/,hl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wr=/($^)/,cl=/['\n\r\u2028\u2029\\]/g,ws="\\ud800-\\udfff",Da="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ca="\\u2700-\\u27bf",Qe="a-z\\xdf-\\xf6\\xf8-\\xff",ge="A-Z\\xc0-\\xd6\\xd8-\\xde",pl="\\ufe0e\\ufe0f",_i="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Iu="["+ws+"]",dt="["+_i+"]",Ps="["+Da+"]",Aa="\\d+",Sa="["+Ca+"]",Ts="["+Qe+"]",Gi="[^"+ws+_i+Aa+Ca+Qe+ge+"]",R="\\ud83c[\\udffb-\\udfff]",gl="[^"+ws+"]",ei="(?:\\ud83c[\\udde6-\\uddff]){2}",Ei="[\\ud800-\\udbff][\\udc00-\\udfff]",Ut="["+ge+"]",Cs="(?:"+Ts+"|"+Gi+")",I="(?:"+Ut+"|"+Gi+")",pr="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",En="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",ml="(?:"+Ps+"|"+R+")?",_l="["+pl+"]?",vl=_l+ml+"(?:\\u200d(?:"+[gl,ei,Ei].join("|")+")"+_l+ml+")*",bt="(?:"+[Sa,ei,Ei].join("|")+")"+vl,ot="(?:"+[gl+Ps+"?",Ps,ei,Ei,Iu].join("|")+")",Ma=RegExp("['\u2019]","g"),Bu=RegExp(Ps,"g"),Vi=RegExp(R+"(?="+R+")|"+ot+vl,"g"),ju=RegExp([Ut+"?"+Ts+"+"+pr+"(?="+[dt,Ut,"$"].join("|")+")",I+"+"+En+"(?="+[dt,Ut+Cs,"$"].join("|")+")",Ut+"?"+Cs+"+"+pr,Ut+"+"+En,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Aa,bt].join("|"),"g"),Uu=RegExp("[\\u200d"+ws+Da+pl+"]"),Yu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ln=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Nu=-1,xe={};xe[bn]=xe[vn]=xe[yn]=xe[xn]=xe[wn]=xe[Pn]=xe[Tn]=xe[Dn]=xe[Cn]=!0,xe[cr]=xe[bs]=xe[Hr]=xe[Br]=xe[dr]=xe[jr]=xe[vs]=xe[ys]=xe[St]=xe[Ur]=xe[mi]=xe[Yr]=xe[Bt]=xe[Nr]=xe[Zr]=!1;var we={};we[cr]=we[bs]=we[Hr]=we[dr]=we[Br]=we[jr]=we[bn]=we[vn]=we[yn]=we[xn]=we[wn]=we[St]=we[Ur]=we[mi]=we[Yr]=we[Bt]=we[Nr]=we[xs]=we[Pn]=we[Tn]=we[Dn]=we[Cn]=!0,we[vs]=we[ys]=we[Zr]=!1;var xl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zu=parseFloat,Hu=parseInt,La="object"==typeof global&&global&&global.Object===Object&&global,wl="object"==typeof self&&self&&self.Object===Object&&self,Re=La||wl||Function("return this")(),As=ar&&!ar.nodeType&&ar,Oe=As&&nr&&!nr.nodeType&&nr,Ia=Oe&&Oe.exports===As,st=Ia&&La.process,Yt=function(){try{return Oe&&Oe.require&&Oe.require("util").types||st&&st.binding&&st.binding("util")}catch{}}(),In=Yt&&Yt.isArrayBuffer,Pl=Yt&&Yt.isDate,Ra=Yt&&Yt.isMap,Ae=Yt&&Yt.isRegExp,Rn=Yt&&Yt.isSet,ti=Yt&&Yt.isTypedArray;function lt(M,U,F){switch(F.length){case 0:return M.call(U);case 1:return M.call(U,F[0]);case 2:return M.call(U,F[0],F[1]);case 3:return M.call(U,F[0],F[1],F[2])}return M.apply(U,F)}function Tl(M,U,F,X){for(var ne=-1,ve=null==M?0:M.length;++ne<ve;){var He=M[ne];U(X,He,F(He),M)}return X}function Ot(M,U){for(var F=-1,X=null==M?0:M.length;++F<X&&!1!==U(M[F],F,M););return M}function Fn(M,U){for(var F=null==M?0:M.length;F--&&!1!==U(M[F],F,M););return M}function Ss(M,U){for(var F=-1,X=null==M?0:M.length;++F<X;)if(!U(M[F],F,M))return!1;return!0}function Nt(M,U){for(var F=-1,X=null==M?0:M.length,ne=0,ve=[];++F<X;){var He=M[F];U(He,F,M)&&(ve[ne++]=He)}return ve}function Os(M,U){return!(null==M||!M.length)&&Vr(M,U,0)>-1}function Ms(M,U,F){for(var X=-1,ne=null==M?0:M.length;++X<ne;)if(F(U,M[X]))return!0;return!1}function Se(M,U){for(var F=-1,X=null==M?0:M.length,ne=Array(X);++F<X;)ne[F]=U(M[F],F,M);return ne}function bi(M,U){for(var F=-1,X=U.length,ne=M.length;++F<X;)M[ne+F]=U[F];return M}function Li(M,U,F,X){var ne=-1,ve=null==M?0:M.length;for(X&&ve&&(F=M[++ne]);++ne<ve;)F=U(F,M[ne],ne,M);return F}function Xu(M,U,F,X){var ne=null==M?0:M.length;for(X&&ne&&(F=M[--ne]);ne--;)F=U(F,M[ne],ne,M);return F}function Gr(M,U){for(var F=-1,X=null==M?0:M.length;++F<X;)if(U(M[F],F,M))return!0;return!1}var Dl=qe("length");function Al(M,U,F){var X;return F(M,function(ne,ve,He){if(U(ne,ve,He))return X=ve,!1}),X}function Bn(M,U,F,X){for(var ne=M.length,ve=F+(X?1:-1);X?ve--:++ve<ne;)if(U(M[ve],ve,M))return ve;return-1}function Vr(M,U,F){return U==U?function Rl(M,U,F){for(var X=F-1,ne=M.length;++X<ne;)if(M[X]===U)return X;return-1}(M,U,F):Bn(M,Ba,F)}function zu(M,U,F,X){for(var ne=F-1,ve=M.length;++ne<ve;)if(X(M[ne],U))return ne;return-1}function Ba(M){return M!=M}function ja(M,U){var F=null==M?0:M.length;return F?Un(M,U)/F:NaN}function qe(M){return function(U){return null==U?D:U[M]}}function jn(M){return function(U){return null==M?D:M[U]}}function Me(M,U,F,X,ne){return ne(M,function(ve,He,De){F=X?(X=!1,ve):U(F,ve,He,De)}),F}function Un(M,U){for(var F,X=-1,ne=M.length;++X<ne;){var ve=U(M[X]);ve!==D&&(F=F===D?ve:F+ve)}return F}function Ii(M,U){for(var F=-1,X=Array(M);++F<M;)X[F]=U(F);return X}function Ua(M){return M&&M.slice(0,Na(M)+1).replace(On,"")}function ut(M){return function(U){return M(U)}}function qr(M,U){return Se(U,function(F){return M[F]})}function ks(M,U){return M.has(U)}function Yn(M,U){for(var F=-1,X=M.length;++F<X&&Vr(U,M[F],0)>-1;);return F}function Ml(M,U){for(var F=M.length;F--&&Vr(U,M[F],0)>-1;);return F}var Es=jn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),kl=jn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function El(M){return"\\"+xl[M]}function vi(M){return Uu.test(M)}function Is(M){var U=-1,F=Array(M.size);return M.forEach(function(X,ne){F[++U]=[ne,X]}),F}function Nn(M,U){return function(F){return M(U(F))}}function yi(M,U){for(var F=-1,X=M.length,ne=0,ve=[];++F<X;){var He=M[F];(He===U||He===or)&&(M[F]=or,ve[ne++]=F)}return ve}function Rs(M){var U=-1,F=Array(M.size);return M.forEach(function(X){F[++U]=X}),F}function qi(M){return vi(M)?function Za(M){for(var U=Vi.lastIndex=0;Vi.test(M);)++U;return U}(M):Dl(M)}function Zt(M){return vi(M)?function Ha(M){return M.match(Vi)||[]}(M):function Cl(M){return M.split("")}(M)}function Na(M){for(var U=M.length;U--&&Qo.test(M.charAt(U)););return U}var Ze=jn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),J=function M(U){var r,F=(U=null==U?Re:J.defaults(Re.Object(),U,J.pick(Re,Ln))).Array,X=U.Date,ne=U.Error,ve=U.Function,He=U.Math,De=U.Object,Bs=U.RegExp,Gu=U.String,Fe=U.TypeError,js=F.prototype,gr=De.prototype,Us=U["__core-js_shared__"],vt=ve.prototype.toString,Pe=gr.hasOwnProperty,mr=0,Bl=(r=/[^.]+$/.exec(Us&&Us.keys&&Us.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"",Ri=gr.toString,_r=vt.call(De),Ys=Re._,br=Bs("^"+vt.call(Pe).replace(Sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ns=Ia?U.Buffer:D,xi=U.Symbol,Zn=U.Uint8Array,Fi=Ns?Ns.allocUnsafe:D,Hn=Nn(De.getPrototypeOf,De),jl=De.create,Ul=gr.propertyIsEnumerable,Xn=js.splice,Yl=xi?xi.isConcatSpreadable:D,ii=xi?xi.iterator:D,vr=xi?xi.toStringTag:D,yr=function(){try{var r=l(De,"defineProperty");return r({},"",{}),r}catch{}}(),Nl=U.clearTimeout!==Re.clearTimeout&&U.clearTimeout,Zl=X&&X.now!==Re.Date.now&&X.now,Hl=U.setTimeout!==Re.setTimeout&&U.setTimeout,Zs=He.ceil,Hs=He.floor,zn=De.getOwnPropertySymbols,Xl=Ns?Ns.isBuffer:D,za=U.isFinite,Xs=js.join,Vu=Nn(De.keys,De),Xe=He.max,nt=He.min,Wa=X.now,Ga=U.parseInt,Va=He.random,qu=js.reverse,Wn=l(U,"DataView"),Kr=l(U,"Map"),Gn=l(U,"Promise"),et=l(U,"Set"),zs=l(U,"WeakMap"),Ws=l(De,"create"),ri=zs&&new zs,Ji={},Ju=Tt(Wn),qa=Tt(Kr),zl=Tt(Gn),Gs=Tt(et),Wl=Tt(zs),$r=xi?xi.prototype:D,Be=$r?$r.valueOf:D,Ja=$r?$r.toString:D;function x(r){if(Ne(r)&&!oe(r)&&!(r instanceof de)){if(r instanceof pt)return r;if(Pe.call(r,"__wrapped__"))return wo(r)}return new pt(r)}var xr=function(){function r(){}return function(n){if(!Ie(n))return{};if(jl)return jl(n);r.prototype=n;var h=new r;return r.prototype=D,h}}();function ft(){}function pt(r,n){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=D}function de(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Qt,this.__views__=[]}function Ki(r){var n=-1,h=null==r?0:r.length;for(this.clear();++n<h;){var p=r[n];this.set(p[0],p[1])}}function Ht(r){var n=-1,h=null==r?0:r.length;for(this.clear();++n<h;){var p=r[n];this.set(p[0],p[1])}}function wi(r){var n=-1,h=null==r?0:r.length;for(this.clear();++n<h;){var p=r[n];this.set(p[0],p[1])}}function wr(r){var n=-1,h=null==r?0:r.length;for(this.__data__=new wi;++n<h;)this.add(r[n])}function Le(r){var n=this.__data__=new Ht(r);this.size=n.size}function yt(r,n){var h=oe(r),p=!h&&gs(r),y=!h&&!p&&Rr(r),w=!h&&!p&&!y&&fn(r),A=h||p||y||w,O=A?Ii(r.length,Gu):[],L=O.length;for(var Y in r)(n||Pe.call(r,Y))&&(!A||!("length"==Y||y&&("offset"==Y||"parent"==Y)||w&&("buffer"==Y||"byteLength"==Y||"byteOffset"==Y)||g(Y,L)))&&O.push(Y);return O}function si(r){var n=r.length;return n?r[sa(0,n-1)]:D}function Pi(r,n){return Lt(Ke(r),zt(n,0,r.length))}function Pr(r){return Lt(Ke(r))}function ji(r,n,h){(h!==D&&!Oi(r[n],h)||h===D&&!(n in r))&&ht(r,n,h)}function Xt(r,n,h){var p=r[n];(!Pe.call(r,n)||!Oi(p,h)||h===D&&!(n in r))&&ht(r,n,h)}function gt(r,n){for(var h=r.length;h--;)if(Oi(r[h][0],n))return h;return-1}function ts(r,n,h,p){return Wt(r,function(y,w,A){n(p,y,h(y),A)}),p}function Ks(r,n){return r&&mt(n,at(n),r)}function ht(r,n,h){"__proto__"==n&&yr?yr(r,n,{configurable:!0,enumerable:!0,value:h,writable:!0}):r[n]=h}function ie(r,n){for(var h=-1,p=n.length,y=F(p),w=null==r;++h<p;)y[h]=w?D:Pu(r,n[h]);return y}function zt(r,n,h){return r==r&&(h!==D&&(r=r<=h?r:h),n!==D&&(r=r>=n?r:n)),r}function Mt(r,n,h,p,y,w){var A,O=1&n,L=2&n,Y=4&n;if(h&&(A=y?h(r,p,y,w):h(r)),A!==D)return A;if(!Ie(r))return r;var N=oe(r);if(N){if(A=function d(r){var n=r.length,h=new r.constructor(n);return n&&"string"==typeof r[0]&&Pe.call(r,"index")&&(h.index=r.index,h.input=r.input),h}(r),!O)return Ke(r,A)}else{var H=s(r),q=H==ys||H==va;if(Rr(r))return go(r,O);if(H==mi||H==cr||q&&!y){if(A=L||q?{}:f(r),!O)return L?function on(r,n){return mt(r,i(r),n)}(r,function Vl(r,n){return r&&mt(n,Rt(n),r)}(A,r)):function Or(r,n){return mt(r,t(r),n)}(r,Ks(A,r))}else{if(!we[H])return y?r:{};A=function b(r,n,h){var p=r.constructor;switch(n){case Hr:return mo(r);case Br:case jr:return new p(+r);case dr:return function lh(r,n){var h=n?mo(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.byteLength)}(r,h);case bn:case vn:case yn:case xn:case wn:case Pn:case Tn:case Dn:case Cn:return hu(r,h);case St:return new p;case Ur:case Nr:return new p(r);case Yr:return function uu(r){var n=new r.constructor(r.source,zr.exec(r));return n.lastIndex=r.lastIndex,n}(r);case Bt:return new p;case xs:return function uh(r){return Be?De(Be.call(r)):{}}(r)}}(r,H,O)}}w||(w=new Le);var Q=w.get(r);if(Q)return Q;w.set(r,A),Mh(r)?r.forEach(function(se){A.add(Mt(se,n,h,se,r,w))}):Sh(r)&&r.forEach(function(se,fe){A.set(fe,Mt(se,n,h,fe,r,w))});var ce=N?D:(Y?L?fa:da:L?Rt:at)(r);return Ot(ce||r,function(se,fe){ce&&(se=r[fe=se]),Xt(A,fe,Mt(se,n,h,fe,r,w))}),A}function is(r,n,h){var p=h.length;if(null==r)return!p;for(r=De(r);p--;){var y=h[p],A=r[y];if(A===D&&!(y in r)||!(0,n[y])(A))return!1}return!0}function $a(r,n,h){if("function"!=typeof r)throw new Fe(Ct);return ui(function(){r.apply(D,h)},n)}function rs(r,n,h,p){var y=-1,w=Os,A=!0,O=r.length,L=[],Y=n.length;if(!O)return L;h&&(n=Se(n,ut(h))),p?(w=Ms,A=!1):n.length>=200&&(w=ks,A=!1,n=new wr(n));e:for(;++y<O;){var N=r[y],H=null==h?N:h(N);if(N=p||0!==N?N:0,A&&H==H){for(var q=Y;q--;)if(n[q]===H)continue e;L.push(N)}else w(n,H,p)||L.push(N)}return L}x.templateSettings={escape:qo,evaluate:Jo,interpolate:Pa,variable:"",imports:{_:x}},(x.prototype=ft.prototype).constructor=x,(pt.prototype=xr(ft.prototype)).constructor=pt,(de.prototype=xr(ft.prototype)).constructor=de,Ki.prototype.clear=function Ku(){this.__data__=Ws?Ws(null):{},this.size=0},Ki.prototype.delete=function $u(r){var n=this.has(r)&&delete this.__data__[r];return this.size-=n?1:0,n},Ki.prototype.get=function je(r){var n=this.__data__;if(Ws){var h=n[r];return h===fi?D:h}return Pe.call(n,r)?n[r]:D},Ki.prototype.has=function Vn(r){var n=this.__data__;return Ws?n[r]!==D:Pe.call(n,r)},Ki.prototype.set=function Qu(r,n){var h=this.__data__;return this.size+=this.has(r)?0:1,h[r]=Ws&&n===D?fi:n,this},Ht.prototype.clear=function qs(){this.__data__=[],this.size=0},Ht.prototype.delete=function Gl(r){var n=this.__data__,h=gt(n,r);return!(h<0||(h==n.length-1?n.pop():Xn.call(n,h,1),--this.size,0))},Ht.prototype.get=function qn(r){var n=this.__data__,h=gt(n,r);return h<0?D:n[h][1]},Ht.prototype.has=function eh(r){return gt(this.__data__,r)>-1},Ht.prototype.set=function th(r,n){var h=this.__data__,p=gt(h,r);return p<0?(++this.size,h.push([r,n])):h[p][1]=n,this},wi.prototype.clear=function ih(){this.size=0,this.__data__={hash:new Ki,map:new(Kr||Ht),string:new Ki}},wi.prototype.delete=function rh(r){var n=dn(this,r).delete(r);return this.size-=n?1:0,n},wi.prototype.get=function sh(r){return dn(this,r).get(r)},wi.prototype.has=function nh(r){return dn(this,r).has(r)},wi.prototype.set=function ah(r,n){var h=dn(this,r),p=h.size;return h.set(r,n),this.size+=h.size==p?0:1,this},wr.prototype.add=wr.prototype.push=function oh(r){return this.__data__.set(r,fi),this},wr.prototype.has=function Js(r){return this.__data__.has(r)},Le.prototype.clear=function Qr(){this.__data__=new Ht,this.size=0},Le.prototype.delete=function es(r){var n=this.__data__,h=n.delete(r);return this.size=n.size,h},Le.prototype.get=function Jn(r){return this.__data__.get(r)},Le.prototype.has=function Ka(r){return this.__data__.has(r)},Le.prototype.set=function ze(r,n){var h=this.__data__;if(h instanceof Ht){var p=h.__data__;if(!Kr||p.length<199)return p.push([r,n]),this.size=++h.size,this;h=this.__data__=new wi(p)}return h.set(r,n),this.size=h.size,this};var Wt=us(ai),Ti=us(Qs,!0);function Tr(r,n){var h=!0;return Wt(r,function(p,y,w){return h=!!n(p,y,w)}),h}function ni(r,n,h){for(var p=-1,y=r.length;++p<y;){var w=r[p],A=n(w);if(null!=A&&(O===D?A==A&&!Vt(A):h(A,O)))var O=A,L=w}return L}function Kn(r,n){var h=[];return Wt(r,function(p,y,w){n(p,y,w)&&h.push(p)}),h}function Je(r,n,h,p,y){var w=-1,A=r.length;for(h||(h=_),y||(y=[]);++w<A;){var O=r[w];n>0&&h(O)?n>1?Je(O,n-1,h,p,y):bi(y,O):p||(y[y.length]=O)}return y}var $n=ca(),Qa=ca(!0);function ai(r,n){return r&&$n(r,n,at)}function Qs(r,n){return r&&Qa(r,n,at)}function en(r,n){return Nt(n,function(h){return ir(r[h])})}function Di(r,n){for(var h=0,p=(n=Yi(n,r)).length;null!=r&&h<p;)r=r[We(n[h++])];return h&&h==p?r:D}function K(r,n,h){var p=n(r);return oe(r)?p:bi(p,h(r))}function ct(r){return null==r?r===D?"[object Undefined]":"[object Null]":vr&&vr in De(r)?function e(r){var n=Pe.call(r,vr),h=r[vr];try{r[vr]=D;var p=!0}catch{}var y=Ri.call(r);return p&&(n?r[vr]=h:delete r[vr]),y}(r):function $(r){return Ri.call(r)}(r)}function ss(r,n){return r>n}function Jl(r,n){return null!=r&&Pe.call(r,n)}function ns(r,n){return null!=r&&n in De(r)}function ea(r,n,h){for(var p=h?Ms:Os,y=r[0].length,w=r.length,A=w,O=F(w),L=1/0,Y=[];A--;){var N=r[A];A&&n&&(N=Se(N,ut(n))),L=nt(N.length,L),O[A]=!h&&(n||y>=120&&N.length>=120)?new wr(A&&N):D}N=r[0];var H=-1,q=O[0];e:for(;++H<y&&Y.length<L;){var Q=N[H],re=n?n(Q):Q;if(Q=h||0!==Q?Q:0,!(q?ks(q,re):p(Y,re,h))){for(A=w;--A;){var ce=O[A];if(!(ce?ks(ce,re):p(r[A],re,h)))continue e}q&&q.push(re),Y.push(Q)}}return Y}function as(r,n,h){var p=null==(r=Ce(r,n=Yi(n,r)))?r:r[We(hi(n))];return null==p?D:lt(p,r,h)}function to(r){return Ne(r)&&ct(r)==cr}function Ci(r,n,h,p,y){return r===n||(null==r||null==n||!Ne(r)&&!Ne(n)?r!=r&&n!=n:function xt(r,n,h,p,y,w){var A=oe(r),O=oe(n),L=A?bs:s(r),Y=O?bs:s(n),N=(L=L==cr?mi:L)==mi,H=(Y=Y==cr?mi:Y)==mi,q=L==Y;if(q&&Rr(r)){if(!Rr(n))return!1;A=!0,N=!1}if(q&&!N)return w||(w=new Le),A||fn(r)?Xi(r,n,h,p,y,w):function cn(r,n,h,p,y,w,A){switch(h){case dr:if(r.byteLength!=n.byteLength||r.byteOffset!=n.byteOffset)return!1;r=r.buffer,n=n.buffer;case Hr:return!(r.byteLength!=n.byteLength||!w(new Zn(r),new Zn(n)));case Br:case jr:case Ur:return Oi(+r,+n);case vs:return r.name==n.name&&r.message==n.message;case Yr:case Nr:return r==n+"";case St:var O=Is;case Bt:if(O||(O=Rs),r.size!=n.size&&!(1&p))return!1;var Y=A.get(r);if(Y)return Y==n;p|=2,A.set(r,n);var N=Xi(O(r),O(n),p,y,w,A);return A.delete(r),N;case xs:if(Be)return Be.call(r)==Be.call(n)}return!1}(r,n,L,h,p,y,w);if(!(1&h)){var Q=N&&Pe.call(r,"__wrapped__"),re=H&&Pe.call(n,"__wrapped__");if(Q||re){var ce=Q?r.value():r,se=re?n.value():n;return w||(w=new Le),y(ce,se,h,p,w)}}return!!q&&(w||(w=new Le),function gu(r,n,h,p,y,w){var A=1&h,O=da(r),L=O.length;if(L!=da(n).length&&!A)return!1;for(var H=L;H--;){var q=O[H];if(!(A?q in n:Pe.call(n,q)))return!1}var Q=w.get(r),re=w.get(n);if(Q&&re)return Q==n&&re==r;var ce=!0;w.set(r,n),w.set(n,r);for(var se=A;++H<L;){var fe=r[q=O[H]],pe=n[q];if(p)var qt=A?p(pe,fe,q,n,r,w):p(fe,pe,q,r,n,w);if(!(qt===D?fe===pe||y(fe,pe,h,p,w):qt)){ce=!1;break}se||(se="constructor"==q)}if(ce&&!se){var Dt=r.constructor,Jt=n.constructor;Dt!=Jt&&"constructor"in r&&"constructor"in n&&!("function"==typeof Dt&&Dt instanceof Dt&&"function"==typeof Jt&&Jt instanceof Jt)&&(ce=!1)}return w.delete(r),w.delete(n),ce}(r,n,h,p,y,w))}(r,n,h,p,Ci,y))}function tn(r,n,h,p){var y=h.length,w=y,A=!p;if(null==r)return!w;for(r=De(r);y--;){var O=h[y];if(A&&O[2]?O[1]!==r[O[0]]:!(O[0]in r))return!1}for(;++y<w;){var L=(O=h[y])[0],Y=r[L],N=O[1];if(A&&O[2]){if(Y===D&&!(L in r))return!1}else{var H=new Le;if(p)var q=p(Y,N,L,r,n,H);if(!(q===D?Ci(N,Y,3,p,H):q))return!1}}return!0}function io(r){return!(!Ie(r)||function E(r){return!!Bl&&Bl in r}(r))&&(ir(r)?br:ol).test(Tt(r))}function Dr(r){return"function"==typeof r?r:null==r?Ft:"object"==typeof r?oe(r)?Ue(r[0],r[1]):ke(r):Hh(r)}function sn(r){if(!S(r))return Vu(r);var n=[];for(var h in De(r))Pe.call(r,h)&&"constructor"!=h&&n.push(h);return n}function Cr(r,n){return r<n}function so(r,n){var h=-1,p=It(r)?F(r.length):[];return Wt(r,function(y,w,A){p[++h]=n(y,w,A)}),p}function ke(r){var n=ga(r);return 1==n.length&&n[0][2]?z(n[0][0],n[0][1]):function(h){return h===r||tn(h,r,n)}}function Ue(r,n){return v(r)&&B(n)?z(We(r),n):function(h){var p=Pu(h,r);return p===D&&p===n?Tu(h,r):Ci(n,p,3)}}function nn(r,n,h,p,y){r!==n&&$n(n,function(w,A){if(y||(y=new Le),Ie(w))!function ta(r,n,h,p,y,w,A){var O=Et(r,h),L=Et(n,h),Y=A.get(L);if(Y)ji(r,h,Y);else{var N=w?w(O,L,h+"",r,n,A):D,H=N===D;if(H){var q=oe(L),Q=!q&&Rr(L),re=!q&&!Q&&fn(L);N=L,q||Q||re?oe(O)?N=O:Ge(O)?N=Ke(O):Q?(H=!1,N=go(L,!0)):re?(H=!1,N=hu(L,!0)):N=[]:ma(L)||gs(L)?(N=O,gs(O)?N=Lh(O):(!Ie(O)||ir(O))&&(N=f(L))):H=!1}H&&(A.set(L,N),y(N,L,p,w,A),A.delete(L)),ji(r,h,N)}}(r,n,A,h,nn,p,y);else{var O=p?p(Et(r,A),w,A+"",r,n,y):D;O===D&&(O=w),ji(r,A,O)}},Rt)}function no(r,n){var h=r.length;if(h)return g(n+=n<0?h:0,h)?r[n]:D}function ao(r,n,h){n=n.length?Se(n,function(w){return oe(w)?function(A){return Di(A,1===w.length?w[0]:w)}:w}):[Ft];var p=-1;return n=Se(n,ut(te())),function Sl(M,U){var F=M.length;for(M.sort(U);F--;)M[F]=M[F].value;return M}(so(r,function(w,A,O){return{criteria:Se(n,function(Y){return Y(w)}),index:++p,value:w}}),function(w,A){return function cu(r,n,h){for(var p=-1,y=r.criteria,w=n.criteria,A=y.length,O=h.length;++p<A;){var L=Qi(y[p],w[p]);if(L)return p>=O?L:L*("desc"==h[p]?-1:1)}return r.index-n.index}(w,A,h)})}function oo(r,n,h){for(var p=-1,y=n.length,w={};++p<y;){var A=n[p],O=Di(r,A);h(O,A)&&os(w,Yi(A,r),O)}return w}function ra(r,n,h,p){var y=p?zu:Vr,w=-1,A=n.length,O=r;for(r===n&&(n=Ke(n)),h&&(O=Se(r,ut(h)));++w<A;)for(var L=0,Y=n[w],N=h?h(Y):Y;(L=y(O,N,L,p))>-1;)O!==r&&Xn.call(O,L,1),Xn.call(r,L,1);return r}function lo(r,n){for(var h=r?n.length:0,p=h-1;h--;){var y=n[h];if(h==p||y!==w){var w=y;g(y)?Xn.call(r,y,1):oa(r,y)}}return r}function sa(r,n){return r+Hs(Va()*(n-r+1))}function na(r,n){var h="";if(!r||n<1||n>gi)return h;do{n%2&&(h+=r),(n=Hs(n/2))&&(r+=r)}while(n);return h}function ue(r,n){return ae(ee(r,n,Ft),r+"")}function su(r){return si(pn(r))}function nu(r,n){var h=pn(r);return Lt(h,zt(n,0,h.length))}function os(r,n,h,p){if(!Ie(r))return r;for(var y=-1,w=(n=Yi(n,r)).length,A=w-1,O=r;null!=O&&++y<w;){var L=We(n[y]),Y=h;if("__proto__"===L||"constructor"===L||"prototype"===L)return r;if(y!=A){var N=O[L];(Y=p?p(N,L,O):D)===D&&(Y=Ie(N)?N:g(n[y+1])?[]:{})}Xt(O,L,Y),O=O[L]}return r}var uo=ri?function(r,n){return ri.set(r,n),r}:Ft,au=yr?function(r,n){return yr(r,"toString",{configurable:!0,enumerable:!1,value:Cu(n),writable:!0})}:Ft;function ou(r){return Lt(pn(r))}function kt(r,n,h){var p=-1,y=r.length;n<0&&(n=-n>y?0:y+n),(h=h>y?y:h)<0&&(h+=y),y=n>h?0:h-n>>>0,n>>>=0;for(var w=F(y);++p<y;)w[p]=r[p+n];return w}function ho(r,n){var h;return Wt(r,function(p,y,w){return!(h=n(p,y,w))}),!!h}function an(r,n,h){var p=0,y=null==r?p:r.length;if("number"==typeof n&&n==n&&y<=2147483647){for(;p<y;){var w=p+y>>>1,A=r[w];null!==A&&!Vt(A)&&(h?A<=n:A<n)?p=w+1:y=w}return y}return aa(r,n,Ft,h)}function aa(r,n,h,p){var y=0,w=null==r?0:r.length;if(0===w)return 0;for(var A=(n=h(n))!=n,O=null===n,L=Vt(n),Y=n===D;y<w;){var N=Hs((y+w)/2),H=h(r[N]),q=H!==D,Q=null===H,re=H==H,ce=Vt(H);if(A)var se=p||re;else se=Y?re&&(p||q):O?re&&q&&(p||!Q):L?re&&q&&!Q&&(p||!ce):!Q&&!ce&&(p?H<=n:H<n);se?y=N+1:w=N}return nt(w,4294967294)}function co(r,n){for(var h=-1,p=r.length,y=0,w=[];++h<p;){var A=r[h],O=n?n(A):A;if(!h||!Oi(O,L)){var L=O;w[y++]=0===A?0:A}}return w}function fo(r){return"number"==typeof r?r:Vt(r)?NaN:+r}function wt(r){if("string"==typeof r)return r;if(oe(r))return Se(r,wt)+"";if(Vt(r))return Ja?Ja.call(r):"";var n=r+"";return"0"==n&&1/r==-Wi?"-0":n}function Ui(r,n,h){var p=-1,y=Os,w=r.length,A=!0,O=[],L=O;if(h)A=!1,y=Ms;else if(w>=200){var Y=n?null:hn(r);if(Y)return Rs(Y);A=!1,y=ks,L=new wr}else L=n?[]:O;e:for(;++p<w;){var N=r[p],H=n?n(N):N;if(N=h||0!==N?N:0,A&&H==H){for(var q=L.length;q--;)if(L[q]===H)continue e;n&&L.push(H),O.push(N)}else y(L,H,h)||(L!==O&&L.push(H),O.push(N))}return O}function oa(r,n){return null==(r=Ce(r,n=Yi(n,r)))||delete r[We(hi(n))]}function la(r,n,h,p){return os(r,n,h(Di(r,n)),p)}function Ar(r,n,h,p){for(var y=r.length,w=p?y:-1;(p?w--:++w<y)&&n(r[w],w,r););return h?kt(r,p?0:w,p?w+1:y):kt(r,p?w+1:0,p?y:w)}function po(r,n){var h=r;return h instanceof de&&(h=h.value()),Li(n,function(p,y){return y.func.apply(y.thisArg,bi([p],y.args))},h)}function ua(r,n,h){var p=r.length;if(p<2)return p?Ui(r[0]):[];for(var y=-1,w=F(p);++y<p;)for(var A=r[y],O=-1;++O<p;)O!=y&&(w[y]=rs(w[y]||A,r[O],n,h));return Ui(Je(w,1),n,h)}function Sr(r,n,h){for(var p=-1,y=r.length,w=n.length,A={};++p<y;)h(A,r[p],p<w?n[p]:D);return A}function ha(r){return Ge(r)?r:[]}function ls(r){return"function"==typeof r?r:Ft}function Yi(r,n){return oe(r)?r:v(r,n)?[r]:Ir(Te(r))}var $i=ue;function Ni(r,n,h){var p=r.length;return h=h===D?p:h,!n&&h>=p?r:kt(r,n,h)}var lu=Nl||function(r){return Re.clearTimeout(r)};function go(r,n){if(n)return r.slice();var h=r.length,p=Fi?Fi(h):new r.constructor(h);return r.copy(p),p}function mo(r){var n=new r.constructor(r.byteLength);return new Zn(n).set(new Zn(r)),n}function hu(r,n){var h=n?mo(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.length)}function Qi(r,n){if(r!==n){var h=r!==D,p=null===r,y=r==r,w=Vt(r),A=n!==D,O=null===n,L=n==n,Y=Vt(n);if(!O&&!Y&&!w&&r>n||w&&A&&L&&!O&&!Y||p&&A&&L||!h&&L||!y)return 1;if(!p&&!w&&!Y&&r<n||Y&&h&&y&&!p&&!w||O&&h&&y||!A&&y||!L)return-1}return 0}function du(r,n,h,p){for(var y=-1,w=r.length,A=h.length,O=-1,L=n.length,Y=Xe(w-A,0),N=F(L+Y),H=!p;++O<L;)N[O]=n[O];for(;++y<A;)(H||y<w)&&(N[h[y]]=r[y]);for(;Y--;)N[O++]=r[y++];return N}function _o(r,n,h,p){for(var y=-1,w=r.length,A=-1,O=h.length,L=-1,Y=n.length,N=Xe(w-O,0),H=F(N+Y),q=!p;++y<N;)H[y]=r[y];for(var Q=y;++L<Y;)H[Q+L]=n[L];for(;++A<O;)(q||y<w)&&(H[Q+h[A]]=r[y++]);return H}function Ke(r,n){var h=-1,p=r.length;for(n||(n=F(p));++h<p;)n[h]=r[h];return n}function mt(r,n,h,p){var y=!h;h||(h={});for(var w=-1,A=n.length;++w<A;){var O=n[w],L=p?p(h[O],r[O],O,h,r):D;L===D&&(L=r[O]),y?ht(h,O,L):Xt(h,O,L)}return h}function er(r,n){return function(h,p){var y=oe(h)?Tl:ts,w=n?n():{};return y(h,r,te(p,2),w)}}function Gt(r){return ue(function(n,h){var p=-1,y=h.length,w=y>1?h[y-1]:D,A=y>2?h[2]:D;for(w=r.length>3&&"function"==typeof w?(y--,w):D,A&&T(h[0],h[1],A)&&(w=y<3?D:w,y=1),n=De(n);++p<y;){var O=h[p];O&&r(n,O,p,w)}return n})}function us(r,n){return function(h,p){if(null==h)return h;if(!It(h))return r(h,p);for(var y=h.length,w=n?y:-1,A=De(h);(n?w--:++w<y)&&!1!==p(A[w],w,A););return h}}function ca(r){return function(n,h,p){for(var y=-1,w=De(n),A=p(n),O=A.length;O--;){var L=A[r?O:++y];if(!1===h(w[L],L,w))break}return n}}function fu(r){return function(n){var h=vi(n=Te(n))?Zt(n):D,p=h?h[0]:n.charAt(0),y=h?Ni(h,1).join(""):n.slice(1);return p[r]()+y}}function hs(r){return function(n){return Li(Nh(Yh(n).replace(Ma,"")),r,"")}}function ln(r){return function(){var n=arguments;switch(n.length){case 0:return new r;case 1:return new r(n[0]);case 2:return new r(n[0],n[1]);case 3:return new r(n[0],n[1],n[2]);case 4:return new r(n[0],n[1],n[2],n[3]);case 5:return new r(n[0],n[1],n[2],n[3],n[4]);case 6:return new r(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new r(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var h=xr(r.prototype),p=r.apply(h,n);return Ie(p)?p:h}}function Mr(r){return function(n,h,p){var y=De(n);if(!It(n)){var w=te(h,3);n=at(n),h=function(O){return w(y[O],O,y)}}var A=r(n,h,p);return A>-1?y[w?n[A]:A]:D}}function kr(r){return Si(function(n){var h=n.length,p=h,y=pt.prototype.thru;for(r&&n.reverse();p--;){var w=n[p];if("function"!=typeof w)throw new Fe(Ct);if(y&&!A&&"wrapper"==ps(w))var A=new pt([],!0)}for(p=A?p:h;++p<h;){var O=ps(w=n[p]),L="wrapper"==O?pa(w):D;A=L&&C(L[0])&&424==L[1]&&!L[4].length&&1==L[9]?A[ps(L[0])].apply(A,L[3]):1==w.length&&C(w)?A[O]():A.thru(w)}return function(){var Y=arguments,N=Y[0];if(A&&1==Y.length&&oe(N))return A.plant(N).value();for(var H=0,q=h?n[H].apply(this,Y):N;++H<h;)q=n[H].call(this,q);return q}})}function tr(r,n,h,p,y,w,A,O,L,Y){var N=128&n,H=1&n,q=2&n,Q=24&n,re=512&n,ce=q?D:ln(r);return function se(){for(var fe=arguments.length,pe=F(fe),qt=fe;qt--;)pe[qt]=arguments[qt];if(Q)var Dt=Lr(se),Jt=function Ya(M,U){for(var F=M.length,X=0;F--;)M[F]===U&&++X;return X}(pe,Dt);if(p&&(pe=du(pe,p,y,Q)),w&&(pe=_o(pe,w,A,Q)),fe-=Jt,Q&&fe<Y){var Ve=yi(pe,Dt);return Hi(r,n,tr,se.placeholder,h,pe,Ve,O,L,Y-fe)}var Mi=H?h:this,sr=q?Mi[r]:r;return fe=pe.length,O?pe=function Ye(r,n){for(var h=r.length,p=nt(n.length,h),y=Ke(r);p--;){var w=n[p];r[p]=g(w,h)?y[w]:D}return r}(pe,O):re&&fe>1&&pe.reverse(),N&&L<fe&&(pe.length=L),this&&this!==Re&&this instanceof se&&(sr=ce||ln(sr)),sr.apply(Mi,pe)}}function cs(r,n){return function(h,p){return function eo(r,n,h,p){return ai(r,function(y,w,A){n(p,h(y),w,A)}),p}(h,r,n(p),{})}}function oi(r,n){return function(h,p){var y;if(h===D&&p===D)return n;if(h!==D&&(y=h),p!==D){if(y===D)return p;"string"==typeof h||"string"==typeof p?(h=wt(h),p=wt(p)):(h=fo(h),p=fo(p)),y=r(h,p)}return y}}function Er(r){return Si(function(n){return n=Se(n,ut(te())),ue(function(h){var p=this;return r(n,function(y){return lt(y,p,h)})})})}function un(r,n){var h=(n=n===D?" ":wt(n)).length;if(h<2)return h?na(n,r):n;var p=na(n,Zs(r/qi(n)));return vi(n)?Ni(Zt(p),0,r).join(""):p.slice(0,r)}function Zi(r){return function(n,h,p){return p&&"number"!=typeof p&&T(n,h,p)&&(h=p=D),n=rr(n),h===D?(h=n,n=0):h=rr(h),function ru(r,n,h,p){for(var y=-1,w=Xe(Zs((n-r)/(h||1)),0),A=F(w);w--;)A[p?w:++y]=r,r+=h;return A}(n,h,p=p===D?n<h?1:-1:rr(p),r)}}function li(r){return function(n,h){return"string"==typeof n&&"string"==typeof h||(n=ci(n),h=ci(h)),r(n,h)}}function Hi(r,n,h,p,y,w,A,O,L,Y){var N=8&n;n|=N?32:64,4&(n&=~(N?64:32))||(n&=-4);var ce=[r,n,y,N?w:D,N?A:D,N?D:w,N?D:A,O,L,Y],se=h.apply(D,ce);return C(r)&&Ee(se,ce),se.placeholder=p,ye(se,r,n)}function Ai(r){var n=He[r];return function(h,p){if(h=ci(h),(p=null==p?0:nt(he(p),292))&&za(h)){var y=(Te(h)+"e").split("e");return+((y=(Te(n(y[0]+"e"+(+y[1]+p)))+"e").split("e"))[0]+"e"+(+y[1]-p))}return n(h)}}var hn=et&&1/Rs(new et([,-0]))[1]==Wi?function(r){return new et(r)}:Ou;function ds(r){return function(n){var h=s(n);return h==St?Is(n):h==Bt?function Fs(M){var U=-1,F=Array(M.size);return M.forEach(function(X){F[++U]=[X,X]}),F}(n):function Ol(M,U){return Se(U,function(F){return[F,M[F]]})}(n,r(n))}}function Pt(r,n,h,p,y,w,A,O){var L=2&n;if(!L&&"function"!=typeof r)throw new Fe(Ct);var Y=p?p.length:0;if(Y||(n&=-97,p=y=D),A=A===D?A:Xe(he(A),0),O=O===D?O:he(O),Y-=y?y.length:0,64&n){var N=p,H=y;p=y=D}var q=L?D:pa(r),Q=[r,n,h,p,y,N,H,w,A,O];if(q&&function Z(r,n){var h=r[1],p=n[1],y=h|p;if(!(y<131)&&!(128==p&&8==h||128==p&&256==h&&r[7].length<=n[8]||384==p&&n[7].length<=n[8]&&8==h))return r;1&p&&(r[2]=n[2],y|=1&h?0:4);var O=n[3];if(O){var L=r[3];r[3]=L?du(L,O,n[4]):O,r[4]=L?yi(r[3],or):n[4]}(O=n[5])&&(r[5]=(L=r[5])?_o(L,O,n[6]):O,r[6]=L?yi(r[5],or):n[6]),(O=n[7])&&(r[7]=O),128&p&&(r[8]=null==r[8]?n[8]:nt(r[8],n[8])),null==r[9]&&(r[9]=n[9]),r[0]=n[0],r[1]=y}(Q,q),r=Q[0],n=Q[1],h=Q[2],p=Q[3],y=Q[4],!(O=Q[9]=Q[9]===D?L?0:r.length:Xe(Q[9]-Y,0))&&24&n&&(n&=-25),n&&1!=n)re=8==n||16==n?function pu(r,n,h){var p=ln(r);return function y(){for(var w=arguments.length,A=F(w),O=w,L=Lr(y);O--;)A[O]=arguments[O];var Y=w<3&&A[0]!==L&&A[w-1]!==L?[]:yi(A,L);return(w-=Y.length)<h?Hi(r,n,tr,y.placeholder,D,A,Y,D,D,h-w):lt(this&&this!==Re&&this instanceof y?p:r,this,A)}}(r,n,O):32!=n&&33!=n||y.length?tr.apply(D,Q):function hh(r,n,h,p){var y=1&n,w=ln(r);return function A(){for(var O=-1,L=arguments.length,Y=-1,N=p.length,H=F(N+L),q=this&&this!==Re&&this instanceof A?w:r;++Y<N;)H[Y]=p[Y];for(;L--;)H[Y++]=arguments[++O];return lt(q,y?h:this,H)}}(r,n,h,p);else var re=function bo(r,n,h){var p=1&n,y=ln(r);return function w(){return(this&&this!==Re&&this instanceof w?y:r).apply(p?h:this,arguments)}}(r,n,h);return ye((q?uo:Ee)(re,Q),r,n)}function vo(r,n,h,p){return r===D||Oi(r,gr[h])&&!Pe.call(p,h)?n:r}function yo(r,n,h,p,y,w){return Ie(r)&&Ie(n)&&(w.set(n,r),nn(r,n,D,yo,w),w.delete(n)),r}function fs(r){return ma(r)?D:r}function Xi(r,n,h,p,y,w){var A=1&h,O=r.length,L=n.length;if(O!=L&&!(A&&L>O))return!1;var Y=w.get(r),N=w.get(n);if(Y&&N)return Y==n&&N==r;var H=-1,q=!0,Q=2&h?new wr:D;for(w.set(r,n),w.set(n,r);++H<O;){var re=r[H],ce=n[H];if(p)var se=A?p(ce,re,H,n,r,w):p(re,ce,H,r,n,w);if(se!==D){if(se)continue;q=!1;break}if(Q){if(!Gr(n,function(fe,pe){if(!ks(Q,pe)&&(re===fe||y(re,fe,h,p,w)))return Q.push(pe)})){q=!1;break}}else if(re!==ce&&!y(re,ce,h,p,w)){q=!1;break}}return w.delete(r),w.delete(n),q}function Si(r){return ae(ee(r,D,fh),r+"")}function da(r){return K(r,at,t)}function fa(r){return K(r,Rt,i)}var pa=ri?function(r){return ri.get(r)}:Ou;function ps(r){for(var n=r.name+"",h=Ji[n],p=Pe.call(Ji,n)?h.length:0;p--;){var y=h[p],w=y.func;if(null==w||w==r)return y.name}return n}function Lr(r){return(Pe.call(x,"placeholder")?x:r).placeholder}function te(){var r=x.iteratee||Au;return r=r===Au?Dr:r,arguments.length?r(arguments[0],arguments[1]):r}function dn(r,n){var h=r.__data__;return function P(r){var n=typeof r;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r}(n)?h["string"==typeof n?"string":"hash"]:h.map}function ga(r){for(var n=at(r),h=n.length;h--;){var p=n[h],y=r[p];n[h]=[p,y,B(y)]}return n}function l(r,n){var h=function Ll(M,U){return null==M?D:M[U]}(r,n);return io(h)?h:D}var t=zn?function(r){return null==r?[]:(r=De(r),Nt(zn(r),function(n){return Ul.call(r,n)}))}:Mu,i=zn?function(r){for(var n=[];r;)bi(n,t(r)),r=Hn(r);return n}:Mu,s=ct;function c(r,n,h){for(var p=-1,y=(n=Yi(n,r)).length,w=!1;++p<y;){var A=We(n[p]);if(!(w=null!=r&&h(r,A)))break;r=r[A]}return w||++p!=y?w:!!(y=null==r?0:r.length)&&So(y)&&g(A,y)&&(oe(r)||gs(r))}function f(r){return"function"!=typeof r.constructor||S(r)?{}:xr(Hn(r))}function _(r){return oe(r)||gs(r)||!!(Yl&&r&&r[Yl])}function g(r,n){var h=typeof r;return!!(n=n??gi)&&("number"==h||"symbol"!=h&&ul.test(r))&&r>-1&&r%1==0&&r<n}function T(r,n,h){if(!Ie(h))return!1;var p=typeof n;return!!("number"==p?It(h)&&g(n,h.length):"string"==p&&n in h)&&Oi(h[n],r)}function v(r,n){if(oe(r))return!1;var h=typeof r;return!("number"!=h&&"symbol"!=h&&"boolean"!=h&&null!=r&&!Vt(r))||An.test(r)||!Eu.test(r)||null!=n&&r in De(n)}function C(r){var n=ps(r),h=x[n];if("function"!=typeof h||!(n in de.prototype))return!1;if(r===h)return!0;var p=pa(h);return!!p&&r===p[0]}(Wn&&s(new Wn(new ArrayBuffer(1)))!=dr||Kr&&s(new Kr)!=St||Gn&&s(Gn.resolve())!=ya||et&&s(new et)!=Bt||zs&&s(new zs)!=Zr)&&(s=function(r){var n=ct(r),h=n==mi?r.constructor:D,p=h?Tt(h):"";if(p)switch(p){case Ju:return dr;case qa:return St;case zl:return ya;case Gs:return Bt;case Wl:return Zr}return n});var k=Us?ir:ku;function S(r){var n=r&&r.constructor;return r===("function"==typeof n&&n.prototype||gr)}function B(r){return r==r&&!Ie(r)}function z(r,n){return function(h){return null!=h&&h[r]===n&&(n!==D||r in De(h))}}function ee(r,n,h){return n=Xe(n===D?r.length-1:n,0),function(){for(var p=arguments,y=-1,w=Xe(p.length-n,0),A=F(w);++y<w;)A[y]=p[n+y];y=-1;for(var O=F(n+1);++y<n;)O[y]=p[y];return O[n]=h(A),lt(r,this,O)}}function Ce(r,n){return n.length<2?r:Di(r,kt(n,0,-1))}function Et(r,n){if(("constructor"!==n||"function"!=typeof r[n])&&"__proto__"!=n)return r[n]}var Ee=be(uo),ui=Hl||function(r,n){return Re.setTimeout(r,n)},ae=be(au);function ye(r,n,h){var p=n+"";return ae(r,function m(r,n){var h=n.length;if(!h)return r;var p=h-1;return n[p]=(h>1?"& ":"")+n[p],n=n.join(h>2?", ":" "),r.replace(el,"{\n/* [wrapped with "+n+"] */\n")}(p,function xo(r,n){return Ot(jo,function(h){var p="_."+h[0];n&h[1]&&!Os(r,p)&&r.push(p)}),r.sort()}(function o(r){var n=r.match(tl);return n?n[1].split(il):[]}(p),h)))}function be(r){var n=0,h=0;return function(){var p=Wa(),y=16-(p-h);if(h=p,y>0){if(++n>=800)return arguments[0]}else n=0;return r.apply(D,arguments)}}function Lt(r,n){var h=-1,p=r.length,y=p-1;for(n=n===D?p:n;++h<n;){var w=sa(h,y),A=r[w];r[w]=r[h],r[h]=A}return r.length=n,r}var Ir=function G(r){var n=Co(r,function(p){return 500===h.size&&h.clear(),p}),h=n.cache;return n}(function(r){var n=[];return 46===r.charCodeAt(0)&&n.push(""),r.replace(Ko,function(h,p,y,w){n.push(y?w.replace(nl,"$1"):p||h)}),n});function We(r){if("string"==typeof r||Vt(r))return r;var n=r+"";return"0"==n&&1/r==-Wi?"-0":n}function Tt(r){if(null!=r){try{return vt.call(r)}catch{}try{return r+""}catch{}}return""}function wo(r){if(r instanceof de)return r.clone();var n=new pt(r.__wrapped__,r.__chain__);return n.__actions__=Ke(r.__actions__),n.__index__=r.__index__,n.__values__=r.__values__,n}var Gh=ue(function(r,n){return Ge(r)?rs(r,Je(n,1,Ge,!0)):[]}),Vh=ue(function(r,n){var h=hi(n);return Ge(h)&&(h=D),Ge(r)?rs(r,Je(n,1,Ge,!0),te(h,2)):[]}),qh=ue(function(r,n){var h=hi(n);return Ge(h)&&(h=D),Ge(r)?rs(r,Je(n,1,Ge,!0),D,h):[]});function ch(r,n,h){var p=null==r?0:r.length;if(!p)return-1;var y=null==h?0:he(h);return y<0&&(y=Xe(p+y,0)),Bn(r,te(n,3),y)}function dh(r,n,h){var p=null==r?0:r.length;if(!p)return-1;var y=p-1;return h!==D&&(y=he(h),y=h<0?Xe(p+y,0):nt(y,p-1)),Bn(r,te(n,3),y,!0)}function fh(r){return null!=r&&r.length?Je(r,1):[]}function ph(r){return r&&r.length?r[0]:D}var ac=ue(function(r){var n=Se(r,ha);return n.length&&n[0]===r[0]?ea(n):[]}),oc=ue(function(r){var n=hi(r),h=Se(r,ha);return n===hi(h)?n=D:h.pop(),h.length&&h[0]===r[0]?ea(h,te(n,2)):[]}),lc=ue(function(r){var n=hi(r),h=Se(r,ha);return(n="function"==typeof n?n:D)&&h.pop(),h.length&&h[0]===r[0]?ea(h,D,n):[]});function hi(r){var n=null==r?0:r.length;return n?r[n-1]:D}var dc=ue(gh);function gh(r,n){return r&&r.length&&n&&n.length?ra(r,n):r}var gc=Si(function(r,n){var h=null==r?0:r.length,p=ie(r,n);return lo(r,Se(n,function(y){return g(y,h)?+y:y}).sort(Qi)),p});function _u(r){return null==r?r:qu.call(r)}var kc=ue(function(r){return Ui(Je(r,1,Ge,!0))}),Ec=ue(function(r){var n=hi(r);return Ge(n)&&(n=D),Ui(Je(r,1,Ge,!0),te(n,2))}),Lc=ue(function(r){var n=hi(r);return n="function"==typeof n?n:D,Ui(Je(r,1,Ge,!0),D,n)});function bu(r){if(!r||!r.length)return[];var n=0;return r=Nt(r,function(h){if(Ge(h))return n=Xe(h.length,n),!0}),Ii(n,function(h){return Se(r,qe(h))})}function mh(r,n){if(!r||!r.length)return[];var h=bu(r);return null==n?h:Se(h,function(p){return lt(n,D,p)})}var Bc=ue(function(r,n){return Ge(r)?rs(r,n):[]}),jc=ue(function(r){return ua(Nt(r,Ge))}),Uc=ue(function(r){var n=hi(r);return Ge(n)&&(n=D),ua(Nt(r,Ge),te(n,2))}),Yc=ue(function(r){var n=hi(r);return n="function"==typeof n?n:D,ua(Nt(r,Ge),D,n)}),Nc=ue(bu),Xc=ue(function(r){var n=r.length,h=n>1?r[n-1]:D;return h="function"==typeof h?(r.pop(),h):D,mh(r,h)});function _h(r){var n=x(r);return n.__chain__=!0,n}function Po(r,n){return n(r)}var Wc=Si(function(r){var n=r.length,h=n?r[0]:0,p=this.__wrapped__,y=function(w){return ie(w,r)};return!(n>1||this.__actions__.length)&&p instanceof de&&g(h)?((p=p.slice(h,+h+(n?1:0))).__actions__.push({func:Po,args:[y],thisArg:D}),new pt(p,this.__chain__).thru(function(w){return n&&!w.length&&w.push(D),w})):this.thru(y)}),ed=er(function(r,n,h){Pe.call(r,h)?++r[h]:ht(r,h,1)}),rd=Mr(ch),sd=Mr(dh);function bh(r,n){return(oe(r)?Ot:Wt)(r,te(n,3))}function vh(r,n){return(oe(r)?Fn:Ti)(r,te(n,3))}var ld=er(function(r,n,h){Pe.call(r,h)?r[h].push(n):ht(r,h,[n])}),hd=ue(function(r,n,h){var p=-1,y="function"==typeof n,w=It(r)?F(r.length):[];return Wt(r,function(A){w[++p]=y?lt(n,A,h):as(A,n,h)}),w}),cd=er(function(r,n,h){ht(r,h,n)});function To(r,n){return(oe(r)?Se:so)(r,te(n,3))}var fd=er(function(r,n,h){r[h?0:1].push(n)},function(){return[[],[]]}),wd=ue(function(r,n){if(null==r)return[];var h=n.length;return h>1&&T(r,n[0],n[1])?n=[]:h>2&&T(n[0],n[1],n[2])&&(n=[n[0]]),ao(r,Je(n,1),[])}),Do=Zl||function(){return Re.Date.now()};function yh(r,n,h){return n=h?D:n,Pt(r,128,D,D,D,D,n=r&&null==n?r.length:n)}function xh(r,n){var h;if("function"!=typeof n)throw new Fe(Ct);return r=he(r),function(){return--r>0&&(h=n.apply(this,arguments)),r<=1&&(n=D),h}}var vu=ue(function(r,n,h){var p=1;if(h.length){var y=yi(h,Lr(vu));p|=32}return Pt(r,p,n,h,y)}),wh=ue(function(r,n,h){var p=3;if(h.length){var y=yi(h,Lr(wh));p|=32}return Pt(n,p,r,h,y)});function Dh(r,n,h){var p,y,w,A,O,L,Y=0,N=!1,H=!1,q=!0;if("function"!=typeof r)throw new Fe(Ct);function Q(Ve){var Mi=p,sr=y;return p=y=D,Y=Ve,A=r.apply(sr,Mi)}function se(Ve){var Mi=Ve-L;return L===D||Mi>=n||Mi<0||H&&Ve-Y>=w}function fe(){var Ve=Do();if(se(Ve))return pe(Ve);O=ui(fe,function ce(Ve){var Xh=n-(Ve-L);return H?nt(Xh,w-(Ve-Y)):Xh}(Ve))}function pe(Ve){return O=D,q&&p?Q(Ve):(p=y=D,A)}function Jt(){var Ve=Do(),Mi=se(Ve);if(p=arguments,y=this,L=Ve,Mi){if(O===D)return function re(Ve){return Y=Ve,O=ui(fe,n),N?Q(Ve):A}(L);if(H)return lu(O),O=ui(fe,n),Q(L)}return O===D&&(O=ui(fe,n)),A}return n=ci(n)||0,Ie(h)&&(N=!!h.leading,w=(H="maxWait"in h)?Xe(ci(h.maxWait)||0,n):w,q="trailing"in h?!!h.trailing:q),Jt.cancel=function qt(){O!==D&&lu(O),Y=0,p=L=y=O=D},Jt.flush=function Dt(){return O===D?A:pe(Do())},Jt}var Td=ue(function(r,n){return $a(r,1,n)}),Dd=ue(function(r,n,h){return $a(r,ci(n)||0,h)});function Co(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw new Fe(Ct);var h=function(){var p=arguments,y=n?n.apply(this,p):p[0],w=h.cache;if(w.has(y))return w.get(y);var A=r.apply(this,p);return h.cache=w.set(y,A)||w,A};return h.cache=new(Co.Cache||wi),h}function Ao(r){if("function"!=typeof r)throw new Fe(Ct);return function(){var n=arguments;switch(n.length){case 0:return!r.call(this);case 1:return!r.call(this,n[0]);case 2:return!r.call(this,n[0],n[1]);case 3:return!r.call(this,n[0],n[1],n[2])}return!r.apply(this,n)}}Co.Cache=wi;var Sd=$i(function(r,n){var h=(n=1==n.length&&oe(n[0])?Se(n[0],ut(te())):Se(Je(n,1),ut(te()))).length;return ue(function(p){for(var y=-1,w=nt(p.length,h);++y<w;)p[y]=n[y].call(this,p[y]);return lt(r,this,p)})}),yu=ue(function(r,n){var h=yi(n,Lr(yu));return Pt(r,32,D,n,h)}),Ch=ue(function(r,n){var h=yi(n,Lr(Ch));return Pt(r,64,D,n,h)}),Od=Si(function(r,n){return Pt(r,256,D,D,D,n)});function Oi(r,n){return r===n||r!=r&&n!=n}var Nd=li(ss),Zd=li(function(r,n){return r>=n}),gs=to(function(){return arguments}())?to:function(r){return Ne(r)&&Pe.call(r,"callee")&&!Ul.call(r,"callee")},oe=F.isArray,Hd=In?ut(In):function Kl(r){return Ne(r)&&ct(r)==Hr};function It(r){return null!=r&&So(r.length)&&!ir(r)}function Ge(r){return Ne(r)&&It(r)}var Rr=Xl||ku,zd=Pl?ut(Pl):function $l(r){return Ne(r)&&ct(r)==jr};function xu(r){if(!Ne(r))return!1;var n=ct(r);return n==vs||"[object DOMException]"==n||"string"==typeof r.message&&"string"==typeof r.name&&!ma(r)}function ir(r){if(!Ie(r))return!1;var n=ct(r);return n==ys||n==va||"[object AsyncFunction]"==n||"[object Proxy]"==n}function Ah(r){return"number"==typeof r&&r==he(r)}function So(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=gi}function Ie(r){var n=typeof r;return null!=r&&("object"==n||"function"==n)}function Ne(r){return null!=r&&"object"==typeof r}var Sh=Ra?ut(Ra):function Ql(r){return Ne(r)&&s(r)==St};function Oh(r){return"number"==typeof r||Ne(r)&&ct(r)==Ur}function ma(r){if(!Ne(r)||ct(r)!=mi)return!1;var n=Hn(r);if(null===n)return!0;var h=Pe.call(n,"constructor")&&n.constructor;return"function"==typeof h&&h instanceof h&&vt.call(h)==_r}var wu=Ae?ut(Ae):function rn(r){return Ne(r)&&ct(r)==Yr},Mh=Rn?ut(Rn):function eu(r){return Ne(r)&&s(r)==Bt};function Oo(r){return"string"==typeof r||!oe(r)&&Ne(r)&&ct(r)==Nr}function Vt(r){return"symbol"==typeof r||Ne(r)&&ct(r)==xs}var fn=ti?ut(ti):function ro(r){return Ne(r)&&So(r.length)&&!!xe[ct(r)]},lf=li(Cr),uf=li(function(r,n){return r<=n});function kh(r){if(!r)return[];if(It(r))return Oo(r)?Zt(r):Ke(r);if(ii&&r[ii])return function Il(M){for(var U,F=[];!(U=M.next()).done;)F.push(U.value);return F}(r[ii]());var n=s(r);return(n==St?Is:n==Bt?Rs:pn)(r)}function rr(r){return r?(r=ci(r))===Wi||r===-Wi?17976931348623157e292*(r<0?-1:1):r==r?r:0:0===r?r:0}function he(r){var n=rr(r),h=n%1;return n==n?h?n-h:n:0}function Eh(r){return r?zt(he(r),0,Qt):0}function ci(r){if("number"==typeof r)return r;if(Vt(r))return NaN;if(Ie(r)){var n="function"==typeof r.valueOf?r.valueOf():r;r=Ie(n)?n+"":n}if("string"!=typeof r)return 0===r?r:+r;r=Ua(r);var h=al.test(r);return h||ll.test(r)?Hu(r.slice(2),h?2:8):Ta.test(r)?NaN:+r}function Lh(r){return mt(r,Rt(r))}function Te(r){return null==r?"":wt(r)}var cf=Gt(function(r,n){if(S(n)||It(n))mt(n,at(n),r);else for(var h in n)Pe.call(n,h)&&Xt(r,h,n[h])}),Ih=Gt(function(r,n){mt(n,Rt(n),r)}),Mo=Gt(function(r,n,h,p){mt(n,Rt(n),r,p)}),df=Gt(function(r,n,h,p){mt(n,at(n),r,p)}),ff=Si(ie),gf=ue(function(r,n){r=De(r);var h=-1,p=n.length,y=p>2?n[2]:D;for(y&&T(n[0],n[1],y)&&(p=1);++h<p;)for(var w=n[h],A=Rt(w),O=-1,L=A.length;++O<L;){var Y=A[O],N=r[Y];(N===D||Oi(N,gr[Y])&&!Pe.call(r,Y))&&(r[Y]=w[Y])}return r}),mf=ue(function(r){return r.push(D,yo),lt(Rh,D,r)});function Pu(r,n,h){var p=null==r?D:Di(r,n);return p===D?h:p}function Tu(r,n){return null!=r&&c(r,n,ns)}var Cf=cs(function(r,n,h){null!=n&&"function"!=typeof n.toString&&(n=Ri.call(n)),r[n]=h},Cu(Ft)),Af=cs(function(r,n,h){null!=n&&"function"!=typeof n.toString&&(n=Ri.call(n)),Pe.call(r,n)?r[n].push(h):r[n]=[h]},te),Sf=ue(as);function at(r){return It(r)?yt(r):sn(r)}function Rt(r){return It(r)?yt(r,!0):function tu(r){if(!Ie(r))return function V(r){var n=[];if(null!=r)for(var h in De(r))n.push(h);return n}(r);var n=S(r),h=[];for(var p in r)"constructor"==p&&(n||!Pe.call(r,p))||h.push(p);return h}(r)}var kf=Gt(function(r,n,h){nn(r,n,h)}),Rh=Gt(function(r,n,h,p){nn(r,n,h,p)}),Ef=Si(function(r,n){var h={};if(null==r)return h;var p=!1;n=Se(n,function(w){return w=Yi(w,r),p||(p=w.length>1),w}),mt(r,fa(r),h),p&&(h=Mt(h,7,fs));for(var y=n.length;y--;)oa(h,n[y]);return h}),If=Si(function(r,n){return null==r?{}:function ia(r,n){return oo(r,n,function(h,p){return Tu(r,p)})}(r,n)});function Fh(r,n){if(null==r)return{};var h=Se(fa(r),function(p){return[p]});return n=te(n),oo(r,h,function(p,y){return n(p,y[0])})}var Bh=ds(at),jh=ds(Rt);function pn(r){return null==r?[]:qr(r,at(r))}var Wf=hs(function(r,n,h){return n=n.toLowerCase(),r+(h?Uh(n):n)});function Uh(r){return Du(Te(r).toLowerCase())}function Yh(r){return(r=Te(r))&&r.replace(hl,Es).replace(Bu,"")}var Jf=hs(function(r,n,h){return r+(h?"-":"")+n.toLowerCase()}),Kf=hs(function(r,n,h){return r+(h?" ":"")+n.toLowerCase()}),$f=fu("toLowerCase"),np=hs(function(r,n,h){return r+(h?"_":"")+n.toLowerCase()}),op=hs(function(r,n,h){return r+(h?" ":"")+Du(n)}),_p=hs(function(r,n,h){return r+(h?" ":"")+n.toUpperCase()}),Du=fu("toUpperCase");function Nh(r,n,h){return r=Te(r),(n=h?D:n)===D?function Ls(M){return Yu.test(M)}(r)?function Fl(M){return M.match(ju)||[]}(r):function Fa(M){return M.match(rl)||[]}(r):r.match(n)||[]}var Zh=ue(function(r,n){try{return lt(r,D,n)}catch(h){return xu(h)?h:new ne(h)}}),bp=Si(function(r,n){return Ot(n,function(h){h=We(h),ht(r,h,vu(r[h],r))}),r});function Cu(r){return function(){return r}}var wp=kr(),Pp=kr(!0);function Ft(r){return r}function Au(r){return Dr("function"==typeof r?r:Mt(r,1))}var Cp=ue(function(r,n){return function(h){return as(h,r,n)}}),Ap=ue(function(r,n){return function(h){return as(r,h,n)}});function Su(r,n,h){var p=at(n),y=en(n,p);null==h&&(!Ie(n)||!y.length&&p.length)&&(h=n,n=r,r=this,y=en(n,at(n)));var w=!(Ie(h)&&"chain"in h&&!h.chain),A=ir(r);return Ot(y,function(O){var L=n[O];r[O]=L,A&&(r.prototype[O]=function(){var Y=this.__chain__;if(w||Y){var N=r(this.__wrapped__);return(N.__actions__=Ke(this.__actions__)).push({func:L,args:arguments,thisArg:r}),N.__chain__=Y,N}return L.apply(r,bi([this.value()],arguments))})}),r}function Ou(){}var Mp=Er(Se),kp=Er(Ss),Ep=Er(Gr);function Hh(r){return v(r)?qe(We(r)):function iu(r){return function(n){return Di(n,r)}}(r)}var Ip=Zi(),Rp=Zi(!0);function Mu(){return[]}function ku(){return!1}var Zp=oi(function(r,n){return r+n},0),Hp=Ai("ceil"),Xp=oi(function(r,n){return r/n},1),zp=Ai("floor"),$p=oi(function(r,n){return r*n},1),Qp=Ai("round"),eg=oi(function(r,n){return r-n},0);return x.after=function Pd(r,n){if("function"!=typeof n)throw new Fe(Ct);return r=he(r),function(){if(--r<1)return n.apply(this,arguments)}},x.ary=yh,x.assign=cf,x.assignIn=Ih,x.assignInWith=Mo,x.assignWith=df,x.at=ff,x.before=xh,x.bind=vu,x.bindAll=bp,x.bindKey=wh,x.castArray=function Rd(){if(!arguments.length)return[];var r=arguments[0];return oe(r)?r:[r]},x.chain=_h,x.chunk=function mu(r,n,h){n=(h?T(r,n,h):n===D)?1:Xe(he(n),0);var p=null==r?0:r.length;if(!p||n<1)return[];for(var y=0,w=0,A=F(Zs(p/n));y<p;)A[w++]=kt(r,y,y+=n);return A},x.compact=function zh(r){for(var n=-1,h=null==r?0:r.length,p=0,y=[];++n<h;){var w=r[n];w&&(y[p++]=w)}return y},x.concat=function Wh(){var r=arguments.length;if(!r)return[];for(var n=F(r-1),h=arguments[0],p=r;p--;)n[p-1]=arguments[p];return bi(oe(h)?Ke(h):[h],Je(n,1))},x.cond=function vp(r){var n=null==r?0:r.length,h=te();return r=n?Se(r,function(p){if("function"!=typeof p[1])throw new Fe(Ct);return[h(p[0]),p[1]]}):[],ue(function(p){for(var y=-1;++y<n;){var w=r[y];if(lt(w[0],this,p))return lt(w[1],this,p)}})},x.conforms=function yp(r){return function $s(r){var n=at(r);return function(h){return is(h,r,n)}}(Mt(r,1))},x.constant=Cu,x.countBy=ed,x.create=function pf(r,n){var h=xr(r);return null==n?h:Ks(h,n)},x.curry=function Ph(r,n,h){var p=Pt(r,8,D,D,D,D,D,n=h?D:n);return p.placeholder=Ph.placeholder,p},x.curryRight=function Th(r,n,h){var p=Pt(r,16,D,D,D,D,D,n=h?D:n);return p.placeholder=Th.placeholder,p},x.debounce=Dh,x.defaults=gf,x.defaultsDeep=mf,x.defer=Td,x.delay=Dd,x.difference=Gh,x.differenceBy=Vh,x.differenceWith=qh,x.drop=function Jh(r,n,h){var p=null==r?0:r.length;return p?kt(r,(n=h||n===D?1:he(n))<0?0:n,p):[]},x.dropRight=function Kh(r,n,h){var p=null==r?0:r.length;return p?kt(r,0,(n=p-(n=h||n===D?1:he(n)))<0?0:n):[]},x.dropRightWhile=function $h(r,n){return r&&r.length?Ar(r,te(n,3),!0,!0):[]},x.dropWhile=function Qh(r,n){return r&&r.length?Ar(r,te(n,3),!0):[]},x.fill=function ec(r,n,h,p){var y=null==r?0:r.length;return y?(h&&"number"!=typeof h&&T(r,n,h)&&(h=0,p=y),function ql(r,n,h,p){var y=r.length;for((h=he(h))<0&&(h=-h>y?0:y+h),(p=p===D||p>y?y:he(p))<0&&(p+=y),p=h>p?0:Eh(p);h<p;)r[h++]=n;return r}(r,n,h,p)):[]},x.filter=function id(r,n){return(oe(r)?Nt:Kn)(r,te(n,3))},x.flatMap=function nd(r,n){return Je(To(r,n),1)},x.flatMapDeep=function ad(r,n){return Je(To(r,n),Wi)},x.flatMapDepth=function od(r,n,h){return h=h===D?1:he(h),Je(To(r,n),h)},x.flatten=fh,x.flattenDeep=function tc(r){return null!=r&&r.length?Je(r,Wi):[]},x.flattenDepth=function ic(r,n){return null!=r&&r.length?Je(r,n=n===D?1:he(n)):[]},x.flip=function Cd(r){return Pt(r,512)},x.flow=wp,x.flowRight=Pp,x.fromPairs=function rc(r){for(var n=-1,h=null==r?0:r.length,p={};++n<h;){var y=r[n];p[y[0]]=y[1]}return p},x.functions=function Pf(r){return null==r?[]:en(r,at(r))},x.functionsIn=function Tf(r){return null==r?[]:en(r,Rt(r))},x.groupBy=ld,x.initial=function nc(r){return null!=r&&r.length?kt(r,0,-1):[]},x.intersection=ac,x.intersectionBy=oc,x.intersectionWith=lc,x.invert=Cf,x.invertBy=Af,x.invokeMap=hd,x.iteratee=Au,x.keyBy=cd,x.keys=at,x.keysIn=Rt,x.map=To,x.mapKeys=function Of(r,n){var h={};return n=te(n,3),ai(r,function(p,y,w){ht(h,n(p,y,w),p)}),h},x.mapValues=function Mf(r,n){var h={};return n=te(n,3),ai(r,function(p,y,w){ht(h,y,n(p,y,w))}),h},x.matches=function Tp(r){return ke(Mt(r,1))},x.matchesProperty=function Dp(r,n){return Ue(r,Mt(n,1))},x.memoize=Co,x.merge=kf,x.mergeWith=Rh,x.method=Cp,x.methodOf=Ap,x.mixin=Su,x.negate=Ao,x.nthArg=function Op(r){return r=he(r),ue(function(n){return no(n,r)})},x.omit=Ef,x.omitBy=function Lf(r,n){return Fh(r,Ao(te(n)))},x.once=function Ad(r){return xh(2,r)},x.orderBy=function dd(r,n,h,p){return null==r?[]:(oe(n)||(n=null==n?[]:[n]),oe(h=p?D:h)||(h=null==h?[]:[h]),ao(r,n,h))},x.over=Mp,x.overArgs=Sd,x.overEvery=kp,x.overSome=Ep,x.partial=yu,x.partialRight=Ch,x.partition=fd,x.pick=If,x.pickBy=Fh,x.property=Hh,x.propertyOf=function Lp(r){return function(n){return null==r?D:Di(r,n)}},x.pull=dc,x.pullAll=gh,x.pullAllBy=function fc(r,n,h){return r&&r.length&&n&&n.length?ra(r,n,te(h,2)):r},x.pullAllWith=function pc(r,n,h){return r&&r.length&&n&&n.length?ra(r,n,D,h):r},x.pullAt=gc,x.range=Ip,x.rangeRight=Rp,x.rearg=Od,x.reject=function md(r,n){return(oe(r)?Nt:Kn)(r,Ao(te(n,3)))},x.remove=function mc(r,n){var h=[];if(!r||!r.length)return h;var p=-1,y=[],w=r.length;for(n=te(n,3);++p<w;){var A=r[p];n(A,p,r)&&(h.push(A),y.push(p))}return lo(r,y),h},x.rest=function Md(r,n){if("function"!=typeof r)throw new Fe(Ct);return ue(r,n=n===D?n:he(n))},x.reverse=_u,x.sampleSize=function bd(r,n,h){return n=(h?T(r,n,h):n===D)?1:he(n),(oe(r)?Pi:nu)(r,n)},x.set=function Ff(r,n,h){return null==r?r:os(r,n,h)},x.setWith=function Bf(r,n,h,p){return p="function"==typeof p?p:D,null==r?r:os(r,n,h,p)},x.shuffle=function vd(r){return(oe(r)?Pr:ou)(r)},x.slice=function _c(r,n,h){var p=null==r?0:r.length;return p?(h&&"number"!=typeof h&&T(r,n,h)?(n=0,h=p):(n=null==n?0:he(n),h=h===D?p:he(h)),kt(r,n,h)):[]},x.sortBy=wd,x.sortedUniq=function Tc(r){return r&&r.length?co(r):[]},x.sortedUniqBy=function Dc(r,n){return r&&r.length?co(r,te(n,2)):[]},x.split=function ap(r,n,h){return h&&"number"!=typeof h&&T(r,n,h)&&(n=h=D),(h=h===D?Qt:h>>>0)?(r=Te(r))&&("string"==typeof n||null!=n&&!wu(n))&&!(n=wt(n))&&vi(r)?Ni(Zt(r),0,h):r.split(n,h):[]},x.spread=function kd(r,n){if("function"!=typeof r)throw new Fe(Ct);return n=null==n?0:Xe(he(n),0),ue(function(h){var p=h[n],y=Ni(h,0,n);return p&&bi(y,p),lt(r,this,y)})},x.tail=function Cc(r){var n=null==r?0:r.length;return n?kt(r,1,n):[]},x.take=function Ac(r,n,h){return r&&r.length?kt(r,0,(n=h||n===D?1:he(n))<0?0:n):[]},x.takeRight=function Sc(r,n,h){var p=null==r?0:r.length;return p?kt(r,(n=p-(n=h||n===D?1:he(n)))<0?0:n,p):[]},x.takeRightWhile=function Oc(r,n){return r&&r.length?Ar(r,te(n,3),!1,!0):[]},x.takeWhile=function Mc(r,n){return r&&r.length?Ar(r,te(n,3)):[]},x.tap=function zc(r,n){return n(r),r},x.throttle=function Ed(r,n,h){var p=!0,y=!0;if("function"!=typeof r)throw new Fe(Ct);return Ie(h)&&(p="leading"in h?!!h.leading:p,y="trailing"in h?!!h.trailing:y),Dh(r,n,{leading:p,maxWait:n,trailing:y})},x.thru=Po,x.toArray=kh,x.toPairs=Bh,x.toPairsIn=jh,x.toPath=function Yp(r){return oe(r)?Se(r,We):Vt(r)?[r]:Ke(Ir(Te(r)))},x.toPlainObject=Lh,x.transform=function jf(r,n,h){var p=oe(r),y=p||Rr(r)||fn(r);if(n=te(n,4),null==h){var w=r&&r.constructor;h=y?p?new w:[]:Ie(r)&&ir(w)?xr(Hn(r)):{}}return(y?Ot:ai)(r,function(A,O,L){return n(h,A,O,L)}),h},x.unary=function Ld(r){return yh(r,1)},x.union=kc,x.unionBy=Ec,x.unionWith=Lc,x.uniq=function Ic(r){return r&&r.length?Ui(r):[]},x.uniqBy=function Rc(r,n){return r&&r.length?Ui(r,te(n,2)):[]},x.uniqWith=function Fc(r,n){return n="function"==typeof n?n:D,r&&r.length?Ui(r,D,n):[]},x.unset=function Uf(r,n){return null==r||oa(r,n)},x.unzip=bu,x.unzipWith=mh,x.update=function Yf(r,n,h){return null==r?r:la(r,n,ls(h))},x.updateWith=function Nf(r,n,h,p){return p="function"==typeof p?p:D,null==r?r:la(r,n,ls(h),p)},x.values=pn,x.valuesIn=function Zf(r){return null==r?[]:qr(r,Rt(r))},x.without=Bc,x.words=Nh,x.wrap=function Id(r,n){return yu(ls(n),r)},x.xor=jc,x.xorBy=Uc,x.xorWith=Yc,x.zip=Nc,x.zipObject=function Zc(r,n){return Sr(r||[],n||[],Xt)},x.zipObjectDeep=function Hc(r,n){return Sr(r||[],n||[],os)},x.zipWith=Xc,x.entries=Bh,x.entriesIn=jh,x.extend=Ih,x.extendWith=Mo,Su(x,x),x.add=Zp,x.attempt=Zh,x.camelCase=Wf,x.capitalize=Uh,x.ceil=Hp,x.clamp=function Hf(r,n,h){return h===D&&(h=n,n=D),h!==D&&(h=(h=ci(h))==h?h:0),n!==D&&(n=(n=ci(n))==n?n:0),zt(ci(r),n,h)},x.clone=function Fd(r){return Mt(r,4)},x.cloneDeep=function jd(r){return Mt(r,5)},x.cloneDeepWith=function Ud(r,n){return Mt(r,5,n="function"==typeof n?n:D)},x.cloneWith=function Bd(r,n){return Mt(r,4,n="function"==typeof n?n:D)},x.conformsTo=function Yd(r,n){return null==n||is(r,n,at(n))},x.deburr=Yh,x.defaultTo=function xp(r,n){return null==r||r!=r?n:r},x.divide=Xp,x.endsWith=function Gf(r,n,h){r=Te(r),n=wt(n);var p=r.length,y=h=h===D?p:zt(he(h),0,p);return(h-=n.length)>=0&&r.slice(h,y)==n},x.eq=Oi,x.escape=function Vf(r){return(r=Te(r))&&Vo.test(r)?r.replace(wa,kl):r},x.escapeRegExp=function qf(r){return(r=Te(r))&&$o.test(r)?r.replace(Sn,"\\$&"):r},x.every=function td(r,n,h){var p=oe(r)?Ss:Tr;return h&&T(r,n,h)&&(n=D),p(r,te(n,3))},x.find=rd,x.findIndex=ch,x.findKey=function _f(r,n){return Al(r,te(n,3),ai)},x.findLast=sd,x.findLastIndex=dh,x.findLastKey=function bf(r,n){return Al(r,te(n,3),Qs)},x.floor=zp,x.forEach=bh,x.forEachRight=vh,x.forIn=function vf(r,n){return null==r?r:$n(r,te(n,3),Rt)},x.forInRight=function yf(r,n){return null==r?r:Qa(r,te(n,3),Rt)},x.forOwn=function xf(r,n){return r&&ai(r,te(n,3))},x.forOwnRight=function wf(r,n){return r&&Qs(r,te(n,3))},x.get=Pu,x.gt=Nd,x.gte=Zd,x.has=function Df(r,n){return null!=r&&c(r,n,Jl)},x.hasIn=Tu,x.head=ph,x.identity=Ft,x.includes=function ud(r,n,h,p){r=It(r)?r:pn(r),h=h&&!p?he(h):0;var y=r.length;return h<0&&(h=Xe(y+h,0)),Oo(r)?h<=y&&r.indexOf(n,h)>-1:!!y&&Vr(r,n,h)>-1},x.indexOf=function sc(r,n,h){var p=null==r?0:r.length;if(!p)return-1;var y=null==h?0:he(h);return y<0&&(y=Xe(p+y,0)),Vr(r,n,y)},x.inRange=function Xf(r,n,h){return n=rr(n),h===D?(h=n,n=0):h=rr(h),function Qn(r,n,h){return r>=nt(n,h)&&r<Xe(n,h)}(r=ci(r),n,h)},x.invoke=Sf,x.isArguments=gs,x.isArray=oe,x.isArrayBuffer=Hd,x.isArrayLike=It,x.isArrayLikeObject=Ge,x.isBoolean=function Xd(r){return!0===r||!1===r||Ne(r)&&ct(r)==Br},x.isBuffer=Rr,x.isDate=zd,x.isElement=function Wd(r){return Ne(r)&&1===r.nodeType&&!ma(r)},x.isEmpty=function Gd(r){if(null==r)return!0;if(It(r)&&(oe(r)||"string"==typeof r||"function"==typeof r.splice||Rr(r)||fn(r)||gs(r)))return!r.length;var n=s(r);if(n==St||n==Bt)return!r.size;if(S(r))return!sn(r).length;for(var h in r)if(Pe.call(r,h))return!1;return!0},x.isEqual=function Vd(r,n){return Ci(r,n)},x.isEqualWith=function qd(r,n,h){var p=(h="function"==typeof h?h:D)?h(r,n):D;return p===D?Ci(r,n,D,h):!!p},x.isError=xu,x.isFinite=function Jd(r){return"number"==typeof r&&za(r)},x.isFunction=ir,x.isInteger=Ah,x.isLength=So,x.isMap=Sh,x.isMatch=function Kd(r,n){return r===n||tn(r,n,ga(n))},x.isMatchWith=function $d(r,n,h){return h="function"==typeof h?h:D,tn(r,n,ga(n),h)},x.isNaN=function Qd(r){return Oh(r)&&r!=+r},x.isNative=function ef(r){if(k(r))throw new ne("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return io(r)},x.isNil=function rf(r){return null==r},x.isNull=function tf(r){return null===r},x.isNumber=Oh,x.isObject=Ie,x.isObjectLike=Ne,x.isPlainObject=ma,x.isRegExp=wu,x.isSafeInteger=function sf(r){return Ah(r)&&r>=-gi&&r<=gi},x.isSet=Mh,x.isString=Oo,x.isSymbol=Vt,x.isTypedArray=fn,x.isUndefined=function nf(r){return r===D},x.isWeakMap=function af(r){return Ne(r)&&s(r)==Zr},x.isWeakSet=function of(r){return Ne(r)&&"[object WeakSet]"==ct(r)},x.join=function uc(r,n){return null==r?"":Xs.call(r,n)},x.kebabCase=Jf,x.last=hi,x.lastIndexOf=function hc(r,n,h){var p=null==r?0:r.length;if(!p)return-1;var y=p;return h!==D&&(y=(y=he(h))<0?Xe(p+y,0):nt(y,p-1)),n==n?function Wu(M,U,F){for(var X=F+1;X--;)if(M[X]===U)return X;return X}(r,n,y):Bn(r,Ba,y,!0)},x.lowerCase=Kf,x.lowerFirst=$f,x.lt=lf,x.lte=uf,x.max=function Wp(r){return r&&r.length?ni(r,Ft,ss):D},x.maxBy=function Gp(r,n){return r&&r.length?ni(r,te(n,2),ss):D},x.mean=function Vp(r){return ja(r,Ft)},x.meanBy=function qp(r,n){return ja(r,te(n,2))},x.min=function Jp(r){return r&&r.length?ni(r,Ft,Cr):D},x.minBy=function Kp(r,n){return r&&r.length?ni(r,te(n,2),Cr):D},x.stubArray=Mu,x.stubFalse=ku,x.stubObject=function Fp(){return{}},x.stubString=function Bp(){return""},x.stubTrue=function jp(){return!0},x.multiply=$p,x.nth=function cc(r,n){return r&&r.length?no(r,he(n)):D},x.noConflict=function Sp(){return Re._===this&&(Re._=Ys),this},x.noop=Ou,x.now=Do,x.pad=function Qf(r,n,h){r=Te(r);var p=(n=he(n))?qi(r):0;if(!n||p>=n)return r;var y=(n-p)/2;return un(Hs(y),h)+r+un(Zs(y),h)},x.padEnd=function ep(r,n,h){r=Te(r);var p=(n=he(n))?qi(r):0;return n&&p<n?r+un(n-p,h):r},x.padStart=function tp(r,n,h){r=Te(r);var p=(n=he(n))?qi(r):0;return n&&p<n?un(n-p,h)+r:r},x.parseInt=function ip(r,n,h){return h||null==n?n=0:n&&(n=+n),Ga(Te(r).replace(On,""),n||0)},x.random=function zf(r,n,h){if(h&&"boolean"!=typeof h&&T(r,n,h)&&(n=h=D),h===D&&("boolean"==typeof n?(h=n,n=D):"boolean"==typeof r&&(h=r,r=D)),r===D&&n===D?(r=0,n=1):(r=rr(r),n===D?(n=r,r=0):n=rr(n)),r>n){var p=r;r=n,n=p}if(h||r%1||n%1){var y=Va();return nt(r+y*(n-r+Zu("1e-"+((y+"").length-1))),n)}return sa(r,n)},x.reduce=function pd(r,n,h){var p=oe(r)?Li:Me,y=arguments.length<3;return p(r,te(n,4),h,y,Wt)},x.reduceRight=function gd(r,n,h){var p=oe(r)?Xu:Me,y=arguments.length<3;return p(r,te(n,4),h,y,Ti)},x.repeat=function rp(r,n,h){return n=(h?T(r,n,h):n===D)?1:he(n),na(Te(r),n)},x.replace=function sp(){var r=arguments,n=Te(r[0]);return r.length<3?n:n.replace(r[1],r[2])},x.result=function Rf(r,n,h){var p=-1,y=(n=Yi(n,r)).length;for(y||(y=1,r=D);++p<y;){var w=null==r?D:r[We(n[p])];w===D&&(p=y,w=h),r=ir(w)?w.call(r):w}return r},x.round=Qp,x.runInContext=M,x.sample=function _d(r){return(oe(r)?si:su)(r)},x.size=function yd(r){if(null==r)return 0;if(It(r))return Oo(r)?qi(r):r.length;var n=s(r);return n==St||n==Bt?r.size:sn(r).length},x.snakeCase=np,x.some=function xd(r,n,h){var p=oe(r)?Gr:ho;return h&&T(r,n,h)&&(n=D),p(r,te(n,3))},x.sortedIndex=function bc(r,n){return an(r,n)},x.sortedIndexBy=function vc(r,n,h){return aa(r,n,te(h,2))},x.sortedIndexOf=function yc(r,n){var h=null==r?0:r.length;if(h){var p=an(r,n);if(p<h&&Oi(r[p],n))return p}return-1},x.sortedLastIndex=function xc(r,n){return an(r,n,!0)},x.sortedLastIndexBy=function wc(r,n,h){return aa(r,n,te(h,2),!0)},x.sortedLastIndexOf=function Pc(r,n){if(null!=r&&r.length){var p=an(r,n,!0)-1;if(Oi(r[p],n))return p}return-1},x.startCase=op,x.startsWith=function lp(r,n,h){return r=Te(r),h=null==h?0:zt(he(h),0,r.length),n=wt(n),r.slice(h,h+n.length)==n},x.subtract=eg,x.sum=function tg(r){return r&&r.length?Un(r,Ft):0},x.sumBy=function ig(r,n){return r&&r.length?Un(r,te(n,2)):0},x.template=function up(r,n,h){var p=x.templateSettings;h&&T(r,n,h)&&(n=D),r=Te(r),n=Mo({},n,p,vo);var O,L,y=Mo({},n.imports,p.imports,vo),w=at(y),A=qr(y,w),Y=0,N=n.interpolate||Wr,H="__p += '",q=Bs((n.escape||Wr).source+"|"+N.source+"|"+(N===Pa?fr:Wr).source+"|"+(n.evaluate||Wr).source+"|$","g"),Q="//# sourceURL="+(Pe.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Nu+"]")+"\n";r.replace(q,function(se,fe,pe,qt,Dt,Jt){return pe||(pe=qt),H+=r.slice(Y,Jt).replace(cl,El),fe&&(O=!0,H+="' +\n__e("+fe+") +\n'"),Dt&&(L=!0,H+="';\n"+Dt+";\n__p += '"),pe&&(H+="' +\n((__t = ("+pe+")) == null ? '' : __t) +\n'"),Y=Jt+se.length,se}),H+="';\n";var re=Pe.call(n,"variable")&&n.variable;if(re){if(sl.test(re))throw new ne("Invalid `variable` option passed into `_.template`")}else H="with (obj) {\n"+H+"\n}\n";H=(L?H.replace(zo,""):H).replace(xa,"$1").replace(Wo,"$1;"),H="function("+(re||"obj")+") {\n"+(re?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(O?", __e = _.escape":"")+(L?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+H+"return __p\n}";var ce=Zh(function(){return ve(w,Q+"return "+H).apply(D,A)});if(ce.source=H,xu(ce))throw ce;return ce},x.times=function Up(r,n){if((r=he(r))<1||r>gi)return[];var h=Qt,p=nt(r,Qt);n=te(n),r-=Qt;for(var y=Ii(p,n);++h<r;)n(h);return y},x.toFinite=rr,x.toInteger=he,x.toLength=Eh,x.toLower=function hp(r){return Te(r).toLowerCase()},x.toNumber=ci,x.toSafeInteger=function hf(r){return r?zt(he(r),-gi,gi):0===r?r:0},x.toString=Te,x.toUpper=function cp(r){return Te(r).toUpperCase()},x.trim=function dp(r,n,h){if((r=Te(r))&&(h||n===D))return Ua(r);if(!r||!(n=wt(n)))return r;var p=Zt(r),y=Zt(n);return Ni(p,Yn(p,y),Ml(p,y)+1).join("")},x.trimEnd=function fp(r,n,h){if((r=Te(r))&&(h||n===D))return r.slice(0,Na(r)+1);if(!r||!(n=wt(n)))return r;var p=Zt(r);return Ni(p,0,Ml(p,Zt(n))+1).join("")},x.trimStart=function pp(r,n,h){if((r=Te(r))&&(h||n===D))return r.replace(On,"");if(!r||!(n=wt(n)))return r;var p=Zt(r);return Ni(p,Yn(p,Zt(n))).join("")},x.truncate=function gp(r,n){var h=30,p="...";if(Ie(n)){var y="separator"in n?n.separator:y;h="length"in n?he(n.length):h,p="omission"in n?wt(n.omission):p}var w=(r=Te(r)).length;if(vi(r)){var A=Zt(r);w=A.length}if(h>=w)return r;var O=h-qi(p);if(O<1)return p;var L=A?Ni(A,0,O).join(""):r.slice(0,O);if(y===D)return L+p;if(A&&(O+=L.length-O),wu(y)){if(r.slice(O).search(y)){var Y,N=L;for(y.global||(y=Bs(y.source,Te(zr.exec(y))+"g")),y.lastIndex=0;Y=y.exec(N);)var H=Y.index;L=L.slice(0,H===D?O:H)}}else if(r.indexOf(wt(y),O)!=O){var q=L.lastIndexOf(y);q>-1&&(L=L.slice(0,q))}return L+p},x.unescape=function mp(r){return(r=Te(r))&&Go.test(r)?r.replace(Xr,Ze):r},x.uniqueId=function Np(r){var n=++mr;return Te(r)+n},x.upperCase=_p,x.upperFirst=Du,x.each=bh,x.eachRight=vh,x.first=ph,Su(x,function(){var r={};return ai(x,function(n,h){Pe.call(x.prototype,h)||(r[h]=n)}),r}(),{chain:!1}),x.VERSION="4.17.21",Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){x[r].placeholder=x}),Ot(["drop","take"],function(r,n){de.prototype[r]=function(h){h=h===D?1:Xe(he(h),0);var p=this.__filtered__&&!n?new de(this):this.clone();return p.__filtered__?p.__takeCount__=nt(h,p.__takeCount__):p.__views__.push({size:nt(h,Qt),type:r+(p.__dir__<0?"Right":"")}),p},de.prototype[r+"Right"]=function(h){return this.reverse()[r](h).reverse()}}),Ot(["filter","map","takeWhile"],function(r,n){var h=n+1,p=1==h||3==h;de.prototype[r]=function(y){var w=this.clone();return w.__iteratees__.push({iteratee:te(y,3),type:h}),w.__filtered__=w.__filtered__||p,w}}),Ot(["head","last"],function(r,n){var h="take"+(n?"Right":"");de.prototype[r]=function(){return this[h](1).value()[0]}}),Ot(["initial","tail"],function(r,n){var h="drop"+(n?"":"Right");de.prototype[r]=function(){return this.__filtered__?new de(this):this[h](1)}}),de.prototype.compact=function(){return this.filter(Ft)},de.prototype.find=function(r){return this.filter(r).head()},de.prototype.findLast=function(r){return this.reverse().find(r)},de.prototype.invokeMap=ue(function(r,n){return"function"==typeof r?new de(this):this.map(function(h){return as(h,r,n)})}),de.prototype.reject=function(r){return this.filter(Ao(te(r)))},de.prototype.slice=function(r,n){r=he(r);var h=this;return h.__filtered__&&(r>0||n<0)?new de(h):(r<0?h=h.takeRight(-r):r&&(h=h.drop(r)),n!==D&&(h=(n=he(n))<0?h.dropRight(-n):h.take(n-r)),h)},de.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},de.prototype.toArray=function(){return this.take(Qt)},ai(de.prototype,function(r,n){var h=/^(?:filter|find|map|reject)|While$/.test(n),p=/^(?:head|last)$/.test(n),y=x[p?"take"+("last"==n?"Right":""):n],w=p||/^find/.test(n);y&&(x.prototype[n]=function(){var A=this.__wrapped__,O=p?[1]:arguments,L=A instanceof de,Y=O[0],N=L||oe(A),H=function(fe){var pe=y.apply(x,bi([fe],O));return p&&q?pe[0]:pe};N&&h&&"function"==typeof Y&&1!=Y.length&&(L=N=!1);var q=this.__chain__,re=w&&!q,ce=L&&!this.__actions__.length;if(!w&&N){A=ce?A:new de(this);var se=r.apply(A,O);return se.__actions__.push({func:Po,args:[H],thisArg:D}),new pt(se,q)}return re&&ce?r.apply(this,O):(se=this.thru(H),re?p?se.value()[0]:se.value():se)})}),Ot(["pop","push","shift","sort","splice","unshift"],function(r){var n=js[r],h=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",p=/^(?:pop|shift)$/.test(r);x.prototype[r]=function(){var y=arguments;if(p&&!this.__chain__){var w=this.value();return n.apply(oe(w)?w:[],y)}return this[h](function(A){return n.apply(oe(A)?A:[],y)})}}),ai(de.prototype,function(r,n){var h=x[n];if(h){var p=h.name+"";Pe.call(Ji,p)||(Ji[p]=[]),Ji[p].push({name:n,func:h})}}),Ji[tr(D,2).name]=[{name:"wrapper",func:D}],de.prototype.clone=function Vs(){var r=new de(this.__wrapped__);return r.__actions__=Ke(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ke(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ke(this.__views__),r},de.prototype.reverse=function Bi(){if(this.__filtered__){var r=new de(this);r.__dir__=-1,r.__filtered__=!0}else(r=this.clone()).__dir__*=-1;return r},de.prototype.value=function tt(){var r=this.__wrapped__.value(),n=this.__dir__,h=oe(r),p=n<0,y=h?r.length:0,w=function a(r,n,h){for(var p=-1,y=h.length;++p<y;){var w=h[p],A=w.size;switch(w.type){case"drop":r+=A;break;case"dropRight":n-=A;break;case"take":n=nt(n,r+A);break;case"takeRight":r=Xe(r,n-A)}}return{start:r,end:n}}(0,y,this.__views__),A=w.start,O=w.end,L=O-A,Y=p?O:A-1,N=this.__iteratees__,H=N.length,q=0,Q=nt(L,this.__takeCount__);if(!h||!p&&y==L&&Q==L)return po(r,this.__actions__);var re=[];e:for(;L--&&q<Q;){for(var ce=-1,se=r[Y+=n];++ce<H;){var fe=N[ce],qt=fe.type,Dt=(0,fe.iteratee)(se);if(2==qt)se=Dt;else if(!Dt){if(1==qt)continue e;break e}}re[q++]=se}return re},x.prototype.at=Wc,x.prototype.chain=function Gc(){return _h(this)},x.prototype.commit=function Vc(){return new pt(this.value(),this.__chain__)},x.prototype.next=function qc(){this.__values__===D&&(this.__values__=kh(this.value()));var r=this.__index__>=this.__values__.length;return{done:r,value:r?D:this.__values__[this.__index__++]}},x.prototype.plant=function Kc(r){for(var n,h=this;h instanceof ft;){var p=wo(h);p.__index__=0,p.__values__=D,n?y.__wrapped__=p:n=p;var y=p;h=h.__wrapped__}return y.__wrapped__=r,n},x.prototype.reverse=function $c(){var r=this.__wrapped__;if(r instanceof de){var n=r;return this.__actions__.length&&(n=new de(this)),(n=n.reverse()).__actions__.push({func:Po,args:[_u],thisArg:D}),new pt(n,this.__chain__)}return this.thru(_u)},x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=function Qc(){return po(this.__wrapped__,this.__actions__)},x.prototype.first=x.prototype.head,ii&&(x.prototype[ii]=function Jc(){return this}),x}();Re._=J,(di=function(){return J}.call(ar,me,ar,nr))!==D&&(nr.exports=di)}.call(this)}}]);